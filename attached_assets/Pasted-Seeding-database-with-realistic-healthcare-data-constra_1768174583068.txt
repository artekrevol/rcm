Seeding database with realistic healthcare data...
  constraint: undefined,
error: relation "users" does not exist
  file: 'parse_relation.c',
    at /app/dist/seed.cjs:2:13326
  line: '1449',
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
  routine: 'parserOpenTable'
    at async /app/dist/seed.cjs:8:31375
}
    at async Rp (/app/dist/seed.cjs:8:114026) {
  length: 104,
  severity: 'ERROR',
  code: '42P01',
  detail: undefined,
  hint: undefined,
  position: '55',
  internalPosition: undefined,
npm warn config production Use `--omit=dev` instead.
> rest-express@1.0.0 start
> NODE_ENV=production node dist/index.cjs
11:35:29 PM [express] serving on port 8080
/app/dist/index.cjs:64
  dataType: undefined,
`);Ra.write(ww.format.apply(ww,e))}}Object.defineProperty(Yt.exports,"isWin",{get:function(){return Bo},set:function(t){Bo=t}});Yt.exports.warnTo=function(t){var e=Ra;return Ra=t,e};Yt.exports.getFileName=function(t){var e=t||process.env,n=e.PGPASSFILE||(Bo?bw.join(e.APPDATA||"./","postgresql","pgpass.conf"):bw.join(e.HOME||"./",".pgpass"));return n};Yt.exports.usePgPass=function(t,e){return Object.prototype.hasOwnProperty.call(process.env,"PGPASSWORD")?!1:Bo?!0:(e=e||"<unkn>",Z9(t.mode)?t.mode&(V9|G9)?(Ud('WARNING: password file "%s" has group or world access; permissions should be u=rw (0600) or less',e),!1):!0:(Ud('WARNING: password file "%s" is not a plain file',e),!1))};var X9=Yt.exports.match=function(t,e){return oi.slice(0,-1).reduce(function(n,r,i){return i==1&&Number(t[r]||H9)===Number(e[r])?n&&!0:n&&(e[r]==="*"||e[r]===t[r])},!0)};Yt.exports.getPassword=function(t,e,n){var r,i=e.pipe(Q9());function a(l){var c=Y9(l);c&&eI(c)&&X9(t,c)&&(r=c[J9],i.end())}var s=function(){e.destroy(),n(r)},o=function(l){e.destroy(),Ud("WARNING: error on reading file: %s",l),n(void 0)};e.on("error",o),i.on("data",a).on("end",s).on("error",o)};var Y9=Yt.exports.parseLine=function(t){if(t.length<11||t.match(/^\s+#/))return null;for(var e="",n="",r=0,i=0,a=0,s={},o=!1,l=function(u,p,d){var f=t.substring(p,d);Object.hasOwnProperty.call(process.env,"PGPASS_NO_DEESCAPE")||(f=f.replace(/\\([:\\])/g,"$1")),s[oi[u]]=f},c=0;c<t.length-1;c+=1){if(e=t.charAt(c+1),n=t.charAt(c),o=r==zd-1,o){l(r,i);break}c>=0&&e==":"&&n!=="\\"&&(l(r,i,c+1),i=c+2,r+=1)}return s=Object.keys(s).length===zd?s:null,s},eI=Yt.exports.isValidEntry=function(t){for(var e={0:function(s){return s.length>0},1:function(s){return s==="*"?!0:(s=Number(s),isFinite(s)&&s>0&&s<9007199254740992&&Math.floor(s)===s)},2:function(s){return s.length>0},3:function(s){return s.length>0},4:function(s){return s.length>0}},n=0;n<oi.length;n+=1){var r=e[n],i=t[oi[n]]||"",a=r(i);if(!a)return!1}return!0}});var Cw=g((d7,Qd)=>{"use strict";var p7=require("path"),_w=require("fs"),Lo=Sw();Qd.exports=function(t,e){var n=Lo.getFileName();_w.stat(n,function(r,i){if(r||!Lo.usePgPass(i,n))return e(void 0);var a=_w.createReadStream(n);Lo.getPassword(t,a,e)})};Qd.exports.warnTo=Lo.warnTo});var Aw=g((f7,Tw)=>{"use strict";var tI=require("events").EventEmitter,Ew=ni(),Hd=H1(),nI=No(),rI=fd(),kw=iw(),iI=qa(),aI=$d(),sI=ud(),Fo=class extends tI{constructor(e){super(),this.connectionParameters=new rI(e),this.user=this.connectionParameters.user,this.database=this.connectionParameters.database,this.port=this.connectionParameters.port,this.host=this.connectionParameters.host,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:this.connectionParameters.password}),this.replication=this.connectionParameters.replication;let n=e||{};this._Promise=n.Promise||global.Promise,this._types=new nI(n.types),this._ending=!1,this._ended=!1,this._connecting=!1,this._connected=!1,this._connectionError=!1,this._queryable=!0,this.enableChannelBinding=!!n.enableChannelBinding,this.connection=n.connection||new aI({stream:n.stream,ssl:this.connectionParameters.ssl,keepAlive:n.keepAlive||!1,keepAliveInitialDelayMillis:n.keepAliveInitialDelayMillis||0,encoding:this.connectionParameters.client_encoding||"utf8"}),this.queryQueue=[],this.binary=n.binary||iI.binary,this.processID=null,this.secretKey=null,this.ssl=this.connectionParameters.ssl||!1,this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this._connectionTimeoutMillis=n.connectionTimeoutMillis||0}_errorAllQueries(e){let n=r=>{process.nextTick(()=>{r.handleError(e,this.connection)})};this.activeQuery&&(n(this.activeQuery),this.activeQuery=null),this.queryQueue.forEach(n),this.queryQueue.length=0}_connect(e){let n=this,r=this.connection;if(this._connectionCallback=e,this._connecting||this._connected){let i=new Error("Client has already been connected. You cannot reuse a client.");process.nextTick(()=>{e(i)});return}this._connecting=!0,this._connectionTimeoutMillis>0&&(this.connectionTimeoutHandle=setTimeout(()=>{r._ending=!0,r.stream.destroy(new Error("timeout expired"))},this._connectionTimeoutMillis),this.connectionTimeoutHandle.unref&&this.connectionTimeoutHandle.unref()),this.host&&this.host.indexOf("/")===0?r.connect(this.host+"/.s.PGSQL."+this.port):r.connect(this.port,this.host),r.on("connect",function(){n.ssl?r.requestSsl():r.startup(n.getStartupConf())}),r.on("sslconnect",function(){r.startup(n.getStartupConf())}),this._attachListeners(r),r.once("end",()=>{let i=this._ending?new Error("Connection terminated"):new Error("Connection terminated unexpectedly");clearTimeout(this.connectionTimeoutHandle),this._errorAllQueries(i),this._ended=!0,this._ending||(this._connecting&&!this._connectionError?this._connectionCallback?this._connectionCallback(i):this._handleErrorEvent(i):this._connectionError||this._handleErrorEvent(i)),process.nextTick(()=>{this.emit("end")})})}connect(e){if(e){this._connect(e);return}return new this._Promise((n,r)=>{this._connect(i=>{i?r(i):n()})})}_attachListeners(e){e.on("authenticationCleartextPassword",this._handleAuthCleartextPassword.bind(this)),e.on("authenticationMD5Password",this._handleAuthMD5Password.bind(this)),e.on("authenticationSASL",this._handleAuthSASL.bind(this)),e.on("authenticationSASLContinue",this._handleAuthSASLContinue.bind(this)),e.on("authenticationSASLFinal",this._handleAuthSASLFinal.bind(this)),e.on("backendKeyData",this._handleBackendKeyData.bind(this)),e.on("error",this._handleErrorEvent.bind(this)),e.on("errorMessage",this._handleErrorMessage.bind(this)),e.on("readyForQuery",this._handleReadyForQuery.bind(this)),e.on("notice",this._handleNotice.bind(this)),e.on("rowDescription",this._handleRowDescription.bind(this)),e.on("dataRow",this._handleDataRow.bind(this)),e.on("portalSuspended",this._handlePortalSuspended.bind(this)),e.on("emptyQuery",this._handleEmptyQuery.bind(this)),e.on("commandComplete",this._handleCommandComplete.bind(this)),e.on("parseComplete",this._handleParseComplete.bind(this)),e.on("copyInResponse",this._handleCopyInResponse.bind(this)),e.on("copyData",this._handleCopyData.bind(this)),e.on("notification",this._handleNotification.bind(this))}_checkPgPass(e){let n=this.connection;if(typeof this.password=="function")this._Promise.resolve().then(()=>this.password()).then(r=>{if(r!==void 0){if(typeof r!="string"){n.emit("error",new TypeError("Password must be a string"));return}this.connectionParameters.password=this.password=r}else this.connectionParameters.password=this.password=null;e()}).catch(r=>{n.emit("error",r)});else if(this.password!==null)e();else try{Cw()(this.connectionParameters,i=>{i!==void 0&&(this.connectionParameters.password=this.password=i),e()})}catch(r){this.emit("error",r)}}_handleAuthCleartextPassword(e){this._checkPgPass(()=>{this.connection.password(this.password)})}_handleAuthMD5Password(e){this._checkPgPass(async()=>{try{let n=await sI.postgresMd5PasswordHash(this.user,this.password,e.salt);this.connection.password(n)}catch(n){this.emit("error",n)}})}_handleAuthSASL(e){this._checkPgPass(()=>{try{this.saslSession=Hd.startSession(e.mechanisms,this.enableChannelBinding&&this.connection.stream),this.connection.sendSASLInitialResponseMessage(this.saslSession.mechanism,this.saslSession.response)}catch(n){this.connection.emit("error",n)}})}async _handleAuthSASLContinue(e){try{await Hd.continueSession(this.saslSession,this.password,e.data,this.enableChannelBinding&&this.connection.stream),this.connection.sendSCRAMClientFinalMessage(this.saslSession.response)}catch(n){this.connection.emit("error",n)}}_handleAuthSASLFinal(e){try{Hd.finalizeSession(this.saslSession,e.data),this.saslSession=null}catch(n){this.connection.emit("error",n)}}_handleBackendKeyData(e){this.processID=e.processID,this.secretKey=e.secretKey}_handleReadyForQuery(e){this._connecting&&(this._connecting=!1,this._connected=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback&&(this._connectionCallback(null,this),this._connectionCallback=null),this.emit("connect"));let{activeQuery:n}=this;this.activeQuery=null,this.readyForQuery=!0,n&&n.handleReadyForQuery(this.connection),this._pulseQueryQueue()}_handleErrorWhileConnecting(e){if(!this._connectionError){if(this._connectionError=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback)return this._connectionCallback(e);this.emit("error",e)}}_handleErrorEvent(e){if(this._connecting)return this._handleErrorWhileConnecting(e);this._queryable=!1,this._errorAllQueries(e),this.emit("error",e)}_handleErrorMessage(e){if(this._connecting)return this._handleErrorWhileConnecting(e);let n=this.activeQuery;if(!n){this._handleErrorEvent(e);return}this.activeQuery=null,n.handleError(e,this.connection)}_handleRowDescription(e){this.activeQuery.handleRowDescription(e)}_handleDataRow(e){this.activeQuery.handleDataRow(e)}_handlePortalSuspended(e){this.activeQuery.handlePortalSuspended(this.connection)}_handleEmptyQuery(e){this.activeQuery.handleEmptyQuery(this.connection)}_handleCommandComplete(e){if(this.activeQuery==null){let n=new Error("Received unexpected commandComplete message from backend.");this._handleErrorEvent(n);return}this.activeQuery.handleCommandComplete(e,this.connection)}_handleParseComplete(){if(this.activeQuery==null){let e=new Error("Received unexpected parseComplete message from backend.");this._handleErrorEvent(e);return}this.activeQuery.name&&(this.connection.parsedStatements[this.activeQuery.name]=this.activeQuery.text)}_handleCopyInResponse(e){this.activeQuery.handleCopyInResponse(this.connection)}_handleCopyData(e){this.activeQuery.handleCopyData(e,this.connection)}_handleNotification(e){this.emit("notification",e)}_handleNotice(e){this.emit("notice",e)}getStartupConf(){let e=this.connectionParameters,n={user:e.user,database:e.database},r=e.application_name||e.fallback_application_name;return r&&(n.application_name=r),e.replication&&(n.replication=""+e.replication),e.statement_timeout&&(n.statement_timeout=String(parseInt(e.statement_timeout,10))),e.lock_timeout&&(n.lock_timeout=String(parseInt(e.lock_timeout,10))),e.idle_in_transaction_session_timeout&&(n.idle_in_transaction_session_timeout=String(parseInt(e.idle_in_transaction_session_timeout,10))),e.options&&(n.options=e.options),n}cancel(e,n){if(e.activeQuery===n){let r=this.connection;this.host&&this.host.indexOf("/")===0?r.connect(this.host+"/.s.PGSQL."+this.port):r.connect(this.port,this.host),r.on("connect",function(){r.cancel(e.processID,e.secretKey)})}else e.queryQueue.indexOf(n)!==-1&&e.queryQueue.splice(e.queryQueue.indexOf(n),1)}setTypeParser(e,n,r){return this._types.setTypeParser(e,n,r)}getTypeParser(e,n){return this._types.getTypeParser(e,n)}escapeIdentifier(e){return Ew.escapeIdentifier(e)}escapeLiteral(e){return Ew.escapeLiteral(e)}_pulseQueryQueue(){if(this.readyForQuery===!0)if(this.activeQuery=this.queryQueue.shift(),this.activeQuery){this.readyForQuery=!1,this.hasExecuted=!0;let e=this.activeQuery.submit(this.connection);e&&process.nextTick(()=>{this.activeQuery.handleError(e,this.connection),this.readyForQuery=!0,this._pulseQueryQueue()})}else this.hasExecuted&&(this.activeQuery=null,this.emit("drain"))}query(e,n,r){let i,a,s,o,l;if(e==null)throw new TypeError("Client was passed a null or undefined query");return typeof e.submit=="function"?(s=e.query_timeout||this.connectionParameters.query_timeout,a=i=e,typeof n=="function"&&(i.callback=i.callback||n)):(s=e.query_timeout||this.connectionParameters.query_timeout,i=new kw(e,n,r),i.callback||(a=new this._Promise((c,u)=>{i.callback=(p,d)=>p?u(p):c(d)}).catch(c=>{throw Error.captureStackTrace(c),c}))),s&&(l=i.callback,o=setTimeout(()=>{let c=new Error("Query read timeout");process.nextTick(()=>{i.handleError(c,this.connection)}),l(c),i.callback=()=>{};let u=this.queryQueue.indexOf(i);u>-1&&this.queryQueue.splice(u,1),this._pulseQueryQueue()},s),i.callback=(c,u)=>{clearTimeout(o),l(c,u)}),this.binary&&!i.binary&&(i.binary=!0),i._result&&!i._result._types&&(i._result._types=this._types),this._queryable?this._ending?(process.nextTick(()=>{i.handleError(new Error("Client was closed and is not queryable"),this.connection)}),a):(this.queryQueue.push(i),this._pulseQueryQueue(),a):(process.nextTick(()=>{i.handleError(new Error("Client has encountered a connection error and is not queryable"),this.connection)}),a)}ref(){this.connection.ref()}unref(){this.connection.unref()}end(e){if(this._ending=!0,!this.connection._connecting||this._ended)if(e)e();else return this._Promise.resolve();if(this.activeQuery||!this._queryable?this.connection.stream.destroy():this.connection.end(),e)this.connection.once("end",e);else return new this._Promise(n=>{this.connection.once("end",n)})}};Fo.Query=kw;Tw.exports=Fo});var Ow=g((m7,Nw)=>{"use strict";var oI=require("events").EventEmitter,Pw=function(){},Iw=(t,e)=>{let n=t.findIndex(e);return n===-1?void 0:t.splice(n,1)[0]},Vd=class{constructor(e,n,r){this.client=e,this.idleListener=n,this.timeoutId=r}},ci=class{constructor(e){this.callback=e}};function cI(){throw new Error("Release called on client which has already been released to the pool.")}function $o(t,e){if(e)return{callback:e,result:void 0};let n,r,i=function(s,o){s?n(s):r(o)},a=new t(function(s,o){r=s,n=o}).catch(s=>{throw Error.captureStackTrace(s),s});return{callback:i,result:a}}function lI(t,e){return function n(r){r.client=e,e.removeListener("error",n),e.on("error",()=>{t.log("additional client error after disconnection due to error",r)}),t._remove(e),t.emit("error",r,e)}}var Gd=class extends oI{constructor(e,n){super(),this.options=Object.assign({},e),e!=null&&"password"in e&&Object.defineProperty(this.options,"password",{configurable:!0,enumerable:!1,writable:!0,value:e.password}),e!=null&&e.ssl&&e.ssl.key&&Object.defineProperty(this.options.ssl,"key",{enumerable:!1}),this.options.max=this.options.max||this.options.poolSize||10,this.options.min=this.options.min||0,this.options.maxUses=this.options.maxUses||1/0,this.options.allowExitOnIdle=this.options.allowExitOnIdle||!1,this.options.maxLifetimeSeconds=this.options.maxLifetimeSeconds||0,this.log=this.options.log||function(){},this.Client=this.options.Client||n||Kd().Client,this.Promise=this.options.Promise||global.Promise,typeof this.options.idleTimeoutMillis>"u"&&(this.options.idleTimeoutMillis=1e4),this._clients=[],this._idle=[],this._expired=new WeakSet,this._pendingQueue=[],this._endCallback=void 0,this.ending=!1,this.ended=!1}_isFull(){return this._clients.length>=this.options.max}_isAboveMin(){return this._clients.length>this.options.min}_pulseQueue(){if(this.log("pulse queue"),this.ended){this.log("pulse queue ended");return}if(this.ending){this.log("pulse queue on ending"),this._idle.length&&this._idle.slice().map(n=>{this._remove(n.client)}),this._clients.length||(this.ended=!0,this._endCallback());return}if(!this._pendingQueue.length){this.log("no queued requests");return}if(!this._idle.length&&this._isFull())return;let e=this._pendingQueue.shift();if(this._idle.length){let n=this._idle.pop();clearTimeout(n.timeoutId);let r=n.client;r.ref&&r.ref();let i=n.idleListener;return this._acquireClient(r,e,i,!1)}if(!this._isFull())return this.newClient(e);throw new Error("unexpected condition")}_remove(e,n){let r=Iw(this._idle,a=>a.client===e);r!==void 0&&clearTimeout(r.timeoutId),this._clients=this._clients.filter(a=>a!==e);let i=this;e.end(()=>{i.emit("remove",e),typeof n=="function"&&n()})}connect(e){if(this.ending){let i=new Error("Cannot use a pool after calling end on the pool");return e?e(i):this.Promise.reject(i)}let n=$o(this.Promise,e),r=n.result;if(this._isFull()||this._idle.length){if(this._idle.length&&process.nextTick(()=>this._pulseQueue()),!this.options.connectionTimeoutMillis)return this._pendingQueue.push(new ci(n.callback)),r;let i=(o,l,c)=>{clearTimeout(s),n.callback(o,l,c)},a=new ci(i),s=setTimeout(()=>{Iw(this._pendingQueue,o=>o.callback===i),a.timedOut=!0,n.callback(new Error("timeout exceeded when trying to connect"))},this.options.connectionTimeoutMillis);return s.unref&&s.unref(),this._pendingQueue.push(a),r}return this.newClient(new ci(n.callback)),r}newClient(e){let n=new this.Client(this.options);this._clients.push(n);let r=lI(this,n);this.log("checking client timeout");let i,a=!1;this.options.connectionTimeoutMillis&&(i=setTimeout(()=>{this.log("ending client due to timeout"),a=!0,n.connection?n.connection.stream.destroy():n.end()},this.options.connectionTimeoutMillis)),this.log("connecting new client"),n.connect(s=>{if(i&&clearTimeout(i),n.on("error",r),s)this.log("client failed to connect",s),this._clients=this._clients.filter(o=>o!==n),a&&(s=new Error("Connection terminated due to connection timeout",{cause:s})),this._pulseQueue(),e.timedOut||e.callback(s,void 0,Pw);else{if(this.log("new client connected"),this.options.maxLifetimeSeconds!==0){let o=setTimeout(()=>{this.log("ending client due to expired lifetime"),this._expired.add(n),this._idle.findIndex(c=>c.client===n)!==-1&&this._acquireClient(n,new ci((c,u,p)=>p()),r,!1)},this.options.maxLifetimeSeconds*1e3);o.unref(),n.once("end",()=>clearTimeout(o))}return this._acquireClient(n,e,r,!0)}})}_acquireClient(e,n,r,i){i&&this.emit("connect",e),this.emit("acquire",e),e.release=this._releaseOnce(e,r),e.removeListener("error",r),n.timedOut?i&&this.options.verify?this.options.verify(e,e.release):e.release():i&&this.options.verify?this.options.verify(e,a=>{if(a)return e.release(a),n.callback(a,void 0,Pw);n.callback(void 0,e,e.release)}):n.callback(void 0,e,e.release)}_releaseOnce(e,n){let r=!1;return i=>{r&&cI(),r=!0,this._release(e,n,i)}}_release(e,n,r){if(e.on("error",n),e._poolUseCount=(e._poolUseCount||0)+1,this.emit("release",r,e),r||this.ending||!e._queryable||e._ending||e._poolUseCount>=this.options.maxUses)return e._poolUseCount>=this.options.maxUses&&this.log("remove expended client"),this._remove(e,this._pulseQueue.bind(this));if(this._expired.has(e))return this.log("remove expired client"),this._expired.delete(e),this._remove(e,this._pulseQueue.bind(this));let a;this.options.idleTimeoutMillis&&this._isAboveMin()&&(a=setTimeout(()=>{this.log("remove idle client"),this._remove(e,this._pulseQueue.bind(this))},this.options.idleTimeoutMillis),this.options.allowExitOnIdle&&a.unref()),this.options.allowExitOnIdle&&e.unref(),this._idle.push(new Vd(e,n,a)),this._pulseQueue()}query(e,n,r){if(typeof e=="function"){let a=$o(this.Promise,e);return setImmediate(function(){return a.callback(new Error("Passing a function as the first parameter to pool.query is not supported"))}),a.result}typeof n=="function"&&(r=n,n=void 0);let i=$o(this.Promise,r);return r=i.callback,this.connect((a,s)=>{if(a)return r(a);let o=!1,l=c=>{o||(o=!0,s.release(c),r(c))};s.once("error",l),this.log("dispatching query");try{s.query(e,n,(c,u)=>{if(this.log("query dispatched"),s.removeListener("error",l),!o)return o=!0,s.release(c),c?r(c):r(void 0,u)})}catch(c){return s.release(c),r(c)}}),i.result}end(e){if(this.log("ending"),this.ending){let r=new Error("Called end on pool more than once");return e?e(r):this.Promise.reject(r)}this.ending=!0;let n=$o(this.Promise,e);return this._endCallback=n.callback,this._pulseQueue(),n.result}get waitingCount(){return this._pendingQueue.length}get idleCount(){return this._idle.length}get expiredCount(){return this._clients.reduce((e,n)=>e+(this._expired.has(n)?1:0),0)}get totalCount(){return this._clients.length}};Nw.exports=Gd});var Dw=g((h7,qw)=>{"use strict";var jw=require("events").EventEmitter,uI=require("util"),Wd=ni(),li=qw.exports=function(t,e,n){jw.call(this),t=Wd.normalizeQueryConfig(t,e,n),this.text=t.text,this.values=t.values,this.name=t.name,this.queryMode=t.queryMode,this.callback=t.callback,this.state="new",this._arrayMode=t.rowMode==="array",this._emitRowEvents=!1,this.on("newListener",function(r){r==="row"&&(this._emitRowEvents=!0)}.bind(this))};uI.inherits(li,jw);var pI={sqlState:"code",statementPosition:"position",messagePrimary:"message",context:"where",schemaName:"schema",tableName:"table",columnName:"column",dataTypeName:"dataType",constraintName:"constraint",sourceFile:"file",sourceLine:"line",sourceFunction:"routine"};li.prototype.handleError=function(t){let e=this.native.pq.resultErrorFields();if(e)for(let n in e){let r=pI[n]||n;t[r]=e[n]}this.callback?this.callback(t):this.emit("error",t),this.state="error"};li.prototype.then=function(t,e){return this._getPromise().then(t,e)};li.prototype.catch=function(t){return this._getPromise().catch(t)};li.prototype._getPromise=function(){return this._promise?this._promise:(this._promise=new Promise(function(t,e){this._once("end",t),this._once("error",e)}.bind(this)),this._promise)};li.prototype.submit=function(t){this.state="running";let e=this;this.native=t.native,t.native.arrayMode=this._arrayMode;let n=function(r,i,a){if(t.native.arrayMode=!1,setImmediate(function(){e.emit("_done")}),r)return e.handleError(r);e._emitRowEvents&&(a.length>1?i.forEach((s,o)=>{s.forEach(l=>{e.emit("row",l,a[o])})}):i.forEach(function(s){e.emit("row",s,a)})),e.state="end",e.emit("end",a),e.callback&&e.callback(null,a)};if(process.domain&&(n=process.domain.bind(n)),this.name){this.name.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",this.name,this.name.length),console.error("This can cause conflicts and silent errors executing queries"));let r=(this.values||[]).map(Wd.prepareValue);if(t.namedQueries[this.name]){if(this.text&&t.namedQueries[this.name]!==this.text){let i=new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`);return n(i)}return t.native.execute(this.name,r,n)}return t.native.prepare(this.name,this.text,r.length,function(i){return i?n(i):(t.namedQueries[e.name]=e.text,e.native.execute(e.name,r,n))})}else if(this.values){if(!Array.isArray(this.values)){let i=new Error("Query values must be an array");return n(i)}let r=this.values.map(Wd.prepareValue);t.native.query(this.text,r,n)}else this.queryMode==="extended"?t.native.query(this.text,[],n):t.native.query(this.text,n)}});var Fw=g((v7,Lw)=>{"use strict";var Rw;try{Rw=require("pg-native")}catch(t){throw t}var dI=No(),Mw=require("events").EventEmitter,fI=require("util"),mI=fd(),Bw=Dw(),rt=Lw.exports=function(t){Mw.call(this),t=t||{},this._Promise=t.Promise||global.Promise,this._types=new dI(t.types),this.native=new Rw({types:this._types}),this._queryQueue=[],this._ending=!1,this._connecting=!1,this._connected=!1,this._queryable=!0;let e=this.connectionParameters=new mI(t);t.nativeConnectionString&&(e.nativeConnectionString=t.nativeConnectionString),this.user=e.user,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:e.password}),this.database=e.database,this.host=e.host,this.port=e.port,this.namedQueries={}};rt.Query=Bw;fI.inherits(rt,Mw);rt.prototype._errorAllQueries=function(t){let e=n=>{process.nextTick(()=>{n.native=this.native,n.handleError(t)})};this._hasActiveQuery()&&(e(this._activeQuery),this._activeQuery=null),this._queryQueue.forEach(e),this._queryQueue.length=0};rt.prototype._connect=function(t){let e=this;if(this._connecting){process.nextTick(()=>t(new Error("Client has already been connected. You cannot reuse a client.")));return}this._connecting=!0,this.connectionParameters.getLibpqConnectionString(function(n,r){if(e.connectionParameters.nativeConnectionString&&(r=e.connectionParameters.nativeConnectionString),n)return t(n);e.native.connect(r,function(i){if(i)return e.native.end(),t(i);e._connected=!0,e.native.on("error",function(a){e._queryable=!1,e._errorAllQueries(a),e.emit("error",a)}),e.native.on("notification",function(a){e.emit("notification",{channel:a.relname,payload:a.extra})}),e.emit("connect"),e._pulseQueryQueue(!0),t()})})};rt.prototype.connect=function(t){if(t){this._connect(t);return}return new this._Promise((e,n)=>{this._connect(r=>{r?n(r):e()})})};rt.prototype.query=function(t,e,n){let r,i,a,s,o;if(t==null)throw new TypeError("Client was passed a null or undefined query");if(typeof t.submit=="function")a=t.query_timeout||this.connectionParameters.query_timeout,i=r=t,typeof e=="function"&&(t.callback=e);else if(a=t.query_timeout||this.connectionParameters.query_timeout,r=new Bw(t,e,n),!r.callback){let l,c;i=new this._Promise((u,p)=>{l=u,c=p}).catch(u=>{throw Error.captureStackTrace(u),u}),r.callback=(u,p)=>u?c(u):l(p)}return a&&(o=r.callback,s=setTimeout(()=>{let l=new Error("Query read timeout");process.nextTick(()=>{r.handleError(l,this.connection)}),o(l),r.callback=()=>{};let c=this._queryQueue.indexOf(r);c>-1&&this._queryQueue.splice(c,1),this._pulseQueryQueue()},a),r.callback=(l,c)=>{clearTimeout(s),o(l,c)}),this._queryable?this._ending?(r.native=this.native,process.nextTick(()=>{r.handleError(new Error("Client was closed and is not queryable"))}),i):(this._queryQueue.push(r),this._pulseQueryQueue(),i):(r.native=this.native,process.nextTick(()=>{r.handleError(new Error("Client has encountered a connection error and is not queryable"))}),i)};rt.prototype.end=function(t){let e=this;this._ending=!0,this._connected||this.once("connect",this.end.bind(this,t));let n;return t||(n=new this._Promise(function(r,i){t=a=>a?i(a):r()})),this.native.end(function(){e._errorAllQueries(new Error("Connection terminated")),process.nextTick(()=>{e.emit("end"),t&&t()})}),n};rt.prototype._hasActiveQuery=function(){return this._activeQuery&&this._activeQuery.state!=="error"&&this._activeQuery.state!=="end"};rt.prototype._pulseQueryQueue=function(t){if(!this._connected||this._hasActiveQuery())return;let e=this._queryQueue.shift();if(!e){t||this.emit("drain");return}this._activeQuery=e,e.submit(this);let n=this;e.once("_done",function(){n._pulseQueryQueue()})};rt.prototype.cancel=function(t){this._activeQuery===t?this.native.cancel(function(){}):this._queryQueue.indexOf(t)!==-1&&this._queryQueue.splice(this._queryQueue.indexOf(t),1)};rt.prototype.ref=function(){};rt.prototype.unref=function(){};rt.prototype.setTypeParser=function(t,e,n){return this._types.setTypeParser(t,e,n)};rt.prototype.getTypeParser=function(t,e){return this._types.getTypeParser(t,e)}});var Zd=g((g7,$w)=>{"use strict";$w.exports=Fw()});var Kd=g((x7,Ma)=>{"use strict";var hI=Aw(),vI=qa(),gI=$d(),yI=hd(),xI=ni(),bI=Ow(),wI=No(),{DatabaseError:SI}=Bd(),{escapeIdentifier:_I,escapeLiteral:CI}=ni(),EI=t=>class extends bI{constructor(n){super(n,t)}},Jd=function(t){this.defaults=vI,this.Client=t,this.Query=this.Client.Query,this.Pool=EI(this.Client),this._pools=[],this.Connection=gI,this.types=ja(),this.DatabaseError=SI,this.TypeOverrides=wI,this.escapeIdentifier=_I,this.escapeLiteral=CI,this.Result=yI,this.utils=xI};typeof process.env.NODE_PG_FORCE_NATIVE<"u"?Ma.exports=new Jd(Zd()):(Ma.exports=new Jd(hI),Object.defineProperty(Ma.exports,"native",{configurable:!0,enumerable:!1,get(){let t=null;try{t=new Jd(Zd())}catch(e){if(e.code!=="MODULE_NOT_FOUND")throw e}return Object.defineProperty(Ma.exports,"native",{value:t}),t}}))});var II={};cf(II,{log:()=>sf});module.exports=eS(II);var Qo=pi(tu(),1);var Kp={};cf(Kp,{calls:()=>ct,claimEvents:()=>tr,claims:()=>zt,denials:()=>vn,encounters:()=>Yr,insertCallSchema:()=>v5,insertClaimEventSchema:()=>m5,insertClaimSchema:()=>f5,insertDenialSchema:()=>h5,insertEncounterSchema:()=>d5,insertLeadSchema:()=>Vp,insertPatientSchema:()=>p5,insertPriorAuthSchema:()=>g5,insertRuleSchema:()=>Gp,insertUserSchema:()=>u5,leads:()=>Ft,patients:()=>$t,priorAuthorizations:()=>tt,rules:()=>gt,users:()=>hn});var m=Symbol.for("drizzle:entityKind"),GO=Symbol.for("drizzle:hasOwnEntityKind");function w(t,e){if(!t||typeof t!="object")return!1;if(t instanceof e)return!0;if(!Object.prototype.hasOwnProperty.call(e,m))throw new Error(`Class "${e.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let n=Object.getPrototypeOf(t).constructor;if(n)for(;n;){if(m in n&&n[m]===e[m])return!0;n=Object.getPrototypeOf(n)}return!1}var W=class{constructor(e,n){this.table=e,this.config=n,this.name=n.name,this.keyAsName=n.keyAsName,this.notNull=n.notNull,this.default=n.default,this.defaultFn=n.defaultFn,this.onUpdateFn=n.onUpdateFn,this.hasDefault=n.hasDefault,this.primary=n.primaryKey,this.isUnique=n.isUnique,this.uniqueName=n.uniqueName,this.uniqueType=n.uniqueType,this.dataType=n.dataType,this.columnType=n.columnType,this.generated=n.generated,this.generatedIdentity=n.generatedIdentity}static[m]="Column";name;keyAsName;primary;notNull;default;defaultFn;onUpdateFn;hasDefault;isUnique;uniqueName;uniqueType;dataType;columnType;enumValues=void 0;generated=void 0;generatedIdentity=void 0;config;mapFromDriverValue(e){return e}mapToDriverValue(e){return e}shouldDisableInsert(){return this.config.generated!==void 0&&this.config.generated.type!=="byDefault"}};var Ws=class{static[m]="ColumnBuilder";config;constructor(e,n,r){this.config={name:e,keyAsName:e==="",notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:n,columnType:r,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(e){return this.config.default=e,this.config.hasDefault=!0,this}$defaultFn(e){return this.config.defaultFn=e,this.config.hasDefault=!0,this}$default=this.$defaultFn;$onUpdateFn(e){return this.config.onUpdateFn=e,this.config.hasDefault=!0,this}$onUpdate=this.$onUpdateFn;primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(e){this.config.name===""&&(this.config.name=e)}};var Ct=Symbol.for("drizzle:Name");var Zs=class{static[m]="PgForeignKeyBuilder";reference;_onUpdate="no action";_onDelete="no action";constructor(e,n){this.reference=()=>{let{name:r,columns:i,foreignColumns:a}=e();return{name:r,columns:i,foreignTable:a[0].table,foreignColumns:a}},n&&(this._onUpdate=n.onUpdate,this._onDelete=n.onDelete)}onUpdate(e){return this._onUpdate=e===void 0?"no action":e,this}onDelete(e){return this._onDelete=e===void 0?"no action":e,this}build(e){return new nu(e,this)}},nu=class{constructor(e,n){this.table=e,this.reference=n.reference,this.onUpdate=n._onUpdate,this.onDelete=n._onDelete}static[m]="PgForeignKey";reference;onUpdate;onDelete;getName(){let{name:e,columns:n,foreignColumns:r}=this.reference(),i=n.map(o=>o.name),a=r.map(o=>o.name),s=[this.table[Ct],...i,r[0].table[Ct],...a];return e??`${s.join("_")}_fk`}};function Js(t,...e){return t(...e)}function au(t,e){return`${t[Ct]}_${e.join("_")}_unique`}var ru=class{constructor(e,n){this.name=n,this.columns=e}static[m]="PgUniqueConstraintBuilder";columns;nullsNotDistinctConfig=!1;nullsNotDistinct(){return this.nullsNotDistinctConfig=!0,this}build(e){return new iu(e,this.columns,this.nullsNotDistinctConfig,this.name)}},gb=class{static[m]="PgUniqueOnConstraintBuilder";name;constructor(e){this.name=e}on(...e){return new ru(e,this.name)}},iu=class{constructor(e,n,r,i){this.table=e,this.columns=n,this.name=i??au(this.table,this.columns.map(a=>a.name)),this.nullsNotDistinct=r}static[m]="PgUniqueConstraint";columns;name;nullsNotDistinct=!1;getName(){return this.name}};function yb(t,e,n){for(let r=e;r<t.length;r++){let i=t[r];if(i==="\\"){r++;continue}if(i==='"')return[t.slice(e,r).replace(/\\/g,""),r+1];if(!n&&(i===","||i==="}"))return[t.slice(e,r).replace(/\\/g,""),r]}return[t.slice(e).replace(/\\/g,""),t.length]}function xb(t,e=0){let n=[],r=e,i=!1;for(;r<t.length;){let a=t[r];if(a===","){(i||r===e)&&n.push(""),i=!0,r++;continue}if(i=!1,a==="\\"){r+=2;continue}if(a==='"'){let[l,c]=yb(t,r+1,!0);n.push(l),r=c;continue}if(a==="}")return[n,r+1];if(a==="{"){let[l,c]=xb(t,r+1);n.push(l),r=c;continue}let[s,o]=yb(t,r,!1);n.push(s),r=o}return[n,r]}function bb(t){let[e]=xb(t,1);return e}function su(t){return`{${t.map(e=>Array.isArray(e)?su(e):typeof e=="string"?`"${e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${e}`).join(",")}}`}var N=class extends Ws{foreignKeyConfigs=[];static[m]="PgColumnBuilder";array(e){return new cu(this.config.name,this,e)}references(e,n={}){return this.foreignKeyConfigs.push({ref:e,actions:n}),this}unique(e,n){return this.config.isUnique=!0,this.config.uniqueName=e,this.config.uniqueType=n?.nulls,this}generatedAlwaysAs(e){return this.config.generated={as:e,type:"always",mode:"stored"},this}buildForeignKeys(e,n){return this.foreignKeyConfigs.map(({ref:r,actions:i})=>Js((a,s)=>{let o=new Zs(()=>{let l=a();return{columns:[e],foreignColumns:[l]}});return s.onUpdate&&o.onUpdate(s.onUpdate),s.onDelete&&o.onDelete(s.onDelete),o.build(n)},r,i))}buildExtraConfigColumn(e){return new ou(e,this.config)}},E=class extends W{constructor(e,n){n.uniqueName||(n.uniqueName=au(e,[n.name])),super(e,n),this.table=e}static[m]="PgColumn"},ou=class extends E{static[m]="ExtraConfigColumn";getSQLType(){return this.getSQLType()}indexConfig={order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass};defaultConfig={order:"asc",nulls:"last",opClass:void 0};asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(e){return this.indexConfig.opClass=e,this}},wb=class{static[m]="IndexedColumn";constructor(e,n,r,i){this.name=e,this.keyAsName=n,this.type=r,this.indexConfig=i}name;keyAsName;type;indexConfig},cu=class extends N{static[m]="PgArrayBuilder";constructor(e,n,r){super(e,"array","PgArray"),this.config.baseBuilder=n,this.config.size=r}build(e){let n=this.config.baseBuilder.build(e);return new lu(e,this.config,n)}},lu=class t extends E{constructor(e,n,r,i){super(e,n),this.baseColumn=r,this.range=i,this.size=n.size}size;static[m]="PgArray";getSQLType(){return`${this.baseColumn.getSQLType()}[${typeof this.size=="number"?this.size:""}]`}mapFromDriverValue(e){return typeof e=="string"&&(e=bb(e)),e.map(n=>this.baseColumn.mapFromDriverValue(n))}mapToDriverValue(e,n=!1){let r=e.map(i=>i===null?null:w(this.baseColumn,t)?this.baseColumn.mapToDriverValue(i,!0):this.baseColumn.mapToDriverValue(i));return n?r:su(r)}};var Sb=Symbol.for("drizzle:isPgEnum");function Cb(t){return!!t&&typeof t=="function"&&Sb in t&&t[Sb]===!0}var _b=class extends N{static[m]="PgEnumColumnBuilder";constructor(e,n){super(e,"string","PgEnumColumn"),this.config.enum=n}build(e){return new uu(e,this.config)}},uu=class extends E{static[m]="PgEnumColumn";enum=this.config.enum;enumValues=this.config.enum.enumValues;constructor(e,n){super(e,n),this.enum=n.enum}getSQLType(){return this.enum.enumName}};var we=class{static[m]="Subquery";constructor(e,n,r,i=!1){this._={brand:"Subquery",sql:e,selectedFields:n,alias:r,isWith:i}}},Br=class extends we{static[m]="WithSubquery"};var Eb="0.39.3";var pu,du,ae={startActiveSpan(t,e){return pu?(du||(du=pu.trace.getTracer("drizzle-orm",Eb)),Js((n,r)=>r.startActiveSpan(t,i=>{try{return e(i)}catch(a){throw i.setStatus({code:n.SpanStatusCode.ERROR,message:a instanceof Error?a.message:"Unknown error"}),a}finally{i.end()}}),pu,du)):e()}};var se=Symbol.for("drizzle:ViewBaseConfig");var Xs=Symbol.for("drizzle:Schema"),Ys=Symbol.for("drizzle:Columns"),kb=Symbol.for("drizzle:ExtraConfigColumns"),fu=Symbol.for("drizzle:OriginalName"),mu=Symbol.for("drizzle:BaseName"),na=Symbol.for("drizzle:IsAlias"),Tb=Symbol.for("drizzle:ExtraConfigBuilder"),Ab=Symbol.for("drizzle:IsDrizzleTable"),T=class{static[m]="Table";static Symbol={Name:Ct,Schema:Xs,OriginalName:fu,Columns:Ys,ExtraConfigColumns:kb,BaseName:mu,IsAlias:na,ExtraConfigBuilder:Tb};[Ct];[fu];[Xs];[Ys];[kb];[mu];[na]=!1;[Ab]=!0;[Tb]=void 0;constructor(e,n,r){this[Ct]=this[fu]=e,this[Xs]=n,this[mu]=r}};function hu(t){return typeof t=="object"&&t!==null&&Ab in t}function Je(t){return t[Ct]}function Rn(t){return`${t[Xs]??"public"}.${t[Ct]}`}var Pb=class{static[m]="FakePrimitiveParam"};function vu(t){return t!=null&&typeof t.getSQL=="function"}function jA(t){let e={sql:"",params:[]};for(let n of t)e.sql+=n.sql,e.params.push(...n.params),n.typings?.length&&(e.typings||(e.typings=[]),e.typings.push(...n.typings));return e}var Se=class{static[m]="StringChunk";value;constructor(e){this.value=Array.isArray(e)?e:[e]}getSQL(){return new I([this])}},I=class t{constructor(e){this.queryChunks=e}static[m]="SQL";decoder=Nb;shouldInlineParams=!1;append(e){return this.queryChunks.push(...e.queryChunks),this}toQuery(e){return ae.startActiveSpan("drizzle.buildSQL",n=>{let r=this.buildQueryFromSourceParams(this.queryChunks,e);return n?.setAttributes({"drizzle.query.text":r.sql,"drizzle.query.params":JSON.stringify(r.params)}),r})}buildQueryFromSourceParams(e,n){let r=Object.assign({},n,{inlineParams:n.inlineParams||this.shouldInlineParams,paramStartIndex:n.paramStartIndex||{value:0}}),{casing:i,escapeName:a,escapeParam:s,prepareTyping:o,inlineParams:l,paramStartIndex:c}=r;return jA(e.map(u=>{if(w(u,Se))return{sql:u.value.join(""),params:[]};if(w(u,ra))return{sql:a(u.value),params:[]};if(u===void 0)return{sql:"",params:[]};if(Array.isArray(u)){let p=[new Se("(")];for(let[d,f]of u.entries())p.push(f),d<u.length-1&&p.push(new Se(", "));return p.push(new Se(")")),this.buildQueryFromSourceParams(p,r)}if(w(u,t))return this.buildQueryFromSourceParams(u.queryChunks,{...r,inlineParams:l||u.shouldInlineParams});if(w(u,T)){let p=u[T.Symbol.Schema],d=u[T.Symbol.Name];return{sql:p===void 0||u[na]?a(d):a(p)+"."+a(d),params:[]}}if(w(u,W)){let p=i.getColumnCasing(u);if(n.invokeSource==="indexes")return{sql:a(p),params:[]};let d=u.table[T.Symbol.Schema];return{sql:u.table[na]||d===void 0?a(u.table[T.Symbol.Name])+"."+a(p):a(d)+"."+a(u.table[T.Symbol.Name])+"."+a(p),params:[]}}if(w(u,ze)){let p=u[se].schema,d=u[se].name;return{sql:p===void 0||u[se].isAlias?a(d):a(p)+"."+a(d),params:[]}}if(w(u,Xe)){if(w(u.value,Vt))return{sql:s(c.value++,u),params:[u],typings:["none"]};let p=u.value===null?null:u.encoder.mapToDriverValue(u.value);if(w(p,t))return this.buildQueryFromSourceParams([p],r);if(l)return{sql:this.mapInlineParam(p,r),params:[]};let d=["none"];return o&&(d=[o(u.encoder)]),{sql:s(c.value++,p),params:[p],typings:d}}return w(u,Vt)?{sql:s(c.value++,u),params:[u],typings:["none"]}:w(u,t.Aliased)&&u.fieldAlias!==void 0?{sql:a(u.fieldAlias),params:[]}:w(u,we)?u._.isWith?{sql:a(u._.alias),params:[]}:this.buildQueryFromSourceParams([new Se("("),u._.sql,new Se(") "),new ra(u._.alias)],r):Cb(u)?u.schema?{sql:a(u.schema)+"."+a(u.enumName),params:[]}:{sql:a(u.enumName),params:[]}:vu(u)?u.shouldOmitSQLParens?.()?this.buildQueryFromSourceParams([u.getSQL()],r):this.buildQueryFromSourceParams([new Se("("),u.getSQL(),new Se(")")],r):l?{sql:this.mapInlineParam(u,r),params:[]}:{sql:s(c.value++,u),params:[u],typings:["none"]}}))}mapInlineParam(e,{escapeString:n}){if(e===null)return"null";if(typeof e=="number"||typeof e=="boolean")return e.toString();if(typeof e=="string")return n(e);if(typeof e=="object"){let r=e.toString();return n(r==="[object Object]"?JSON.stringify(e):r)}throw new Error("Unexpected param value: "+e)}getSQL(){return this}as(e){return e===void 0?this:new t.Aliased(this,e)}mapWith(e){return this.decoder=typeof e=="function"?{mapFromDriverValue:e}:e,this}inlineParams(){return this.shouldInlineParams=!0,this}if(e){return e?this:void 0}},ra=class{constructor(e){this.value=e}static[m]="Name";brand;getSQL(){return new I([this])}};function Ib(t){return typeof t=="object"&&t!==null&&"mapToDriverValue"in t&&typeof t.mapToDriverValue=="function"}var Nb={mapFromDriverValue:t=>t},Ob={mapToDriverValue:t=>t},Rj={...Nb,...Ob},Xe=class{constructor(e,n=Ob){this.value=e,this.encoder=n}static[m]="Param";brand;getSQL(){return new I([this])}};function h(t,...e){let n=[];(e.length>0||t.length>0&&t[0]!=="")&&n.push(new Se(t[0]));for(let[r,i]of e.entries())n.push(i,new Se(t[r+1]));return new I(n)}(t=>{function e(){return new I([])}t.empty=e;function n(l){return new I(l)}t.fromList=n;function r(l){return new I([new Se(l)])}t.raw=r;function i(l,c){let u=[];for(let[p,d]of l.entries())p>0&&c!==void 0&&u.push(c),u.push(d);return new I(u)}t.join=i;function a(l){return new ra(l)}t.identifier=a;function s(l){return new Vt(l)}t.placeholder=s;function o(l,c){return new Xe(l,c)}t.param=o})(h||(h={}));(t=>{class e{constructor(r,i){this.sql=r,this.fieldAlias=i}static[m]="SQL.Aliased";isSelectionField=!1;getSQL(){return this.sql}clone(){return new e(this.sql,this.fieldAlias)}}t.Aliased=e})(I||(I={}));var Vt=class{constructor(e){this.name=e}static[m]="Placeholder";getSQL(){return new I([this])}};function gu(t,e){return t.map(n=>{if(w(n,Vt)){if(!(n.name in e))throw new Error(`No value for placeholder "${n.name}" was provided`);return e[n.name]}if(w(n,Xe)&&w(n.value,Vt)){if(!(n.value.name in e))throw new Error(`No value for placeholder "${n.value.name}" was provided`);return n.encoder.mapToDriverValue(e[n.value.name])}return n})}var jb=Symbol.for("drizzle:IsDrizzleView"),ze=class{static[m]="View";[se];[jb]=!0;constructor({name:e,schema:n,selectedFields:r,query:i}){this[se]={name:e,originalName:e,schema:n,selectedFields:r,query:i,isExisting:!i,isAlias:!1}}getSQL(){return new I([this])}};function qb(t){return typeof t=="object"&&t!==null&&jb in t}W.prototype.getSQL=function(){return new I([this])};T.prototype.getSQL=function(){return new I([this])};we.prototype.getSQL=function(){return new I([this])};var Mn=class{constructor(e){this.table=e}static[m]="ColumnAliasProxyHandler";get(e,n){return n==="table"?this.table:e[n]}},Lr=class{constructor(e,n){this.alias=e,this.replaceOriginalName=n}static[m]="TableAliasProxyHandler";get(e,n){if(n===T.Symbol.IsAlias)return!0;if(n===T.Symbol.Name)return this.alias;if(this.replaceOriginalName&&n===T.Symbol.OriginalName)return this.alias;if(n===se)return{...e[se],name:this.alias,isAlias:!0};if(n===T.Symbol.Columns){let i=e[T.Symbol.Columns];if(!i)return i;let a={};return Object.keys(i).map(s=>{a[s]=new Proxy(i[s],new Mn(new Proxy(e,this)))}),a}let r=e[n];return w(r,W)?new Proxy(r,new Mn(new Proxy(e,this))):r}},Db=class{constructor(e){this.alias=e}static[m]="RelationTableAliasProxyHandler";get(e,n){return n==="sourceTable"?ia(e.sourceTable,this.alias):e[n]}};function ia(t,e){return new Proxy(t,new Lr(e,!1))}function Dt(t,e){return new Proxy(t,new Mn(new Proxy(t.table,new Lr(e,!1))))}function yu(t,e){return new I.Aliased(aa(t.sql,e),t.fieldAlias)}function aa(t,e){return h.join(t.queryChunks.map(n=>w(n,W)?Dt(n,e):w(n,I)?aa(n,e):w(n,I.Aliased)?yu(n,e):n))}var sa=class extends Error{static[m]="DrizzleError";constructor({message:e,cause:n}){super(e),this.name="DrizzleError",this.cause=n}},eo=class extends sa{static[m]="TransactionRollbackError";constructor(){super({message:"Rollback"})}};function Ye(t,e){return Ib(e)&&!vu(t)&&!w(t,Xe)&&!w(t,Vt)&&!w(t,W)&&!w(t,T)&&!w(t,ze)?new Xe(t,e):t}var ne=(t,e)=>h`${t} = ${Ye(e,t)}`,Rb=(t,e)=>h`${t} <> ${Ye(e,t)}`;function oa(...t){let e=t.filter(n=>n!==void 0);if(e.length!==0)return e.length===1?new I(e):new I([new Se("("),h.join(e,new Se(" and ")),new Se(")")])}function Mb(...t){let e=t.filter(n=>n!==void 0);if(e.length!==0)return e.length===1?new I(e):new I([new Se("("),h.join(e,new Se(" or ")),new Se(")")])}function Bb(t){return h`not ${t}`}var Lb=(t,e)=>h`${t} > ${Ye(e,t)}`,Fb=(t,e)=>h`${t} >= ${Ye(e,t)}`,$b=(t,e)=>h`${t} < ${Ye(e,t)}`,zb=(t,e)=>h`${t} <= ${Ye(e,t)}`;function Ub(t,e){return Array.isArray(e)?e.length===0?h`false`:h`${t} in ${e.map(n=>Ye(n,t))}`:h`${t} in ${Ye(e,t)}`}function Qb(t,e){return Array.isArray(e)?e.length===0?h`true`:h`${t} not in ${e.map(n=>Ye(n,t))}`:h`${t} not in ${Ye(e,t)}`}function Hb(t){return h`${t} is null`}function Vb(t){return h`${t} is not null`}function Gb(t){return h`exists ${t}`}function Kb(t){return h`not exists ${t}`}function Wb(t,e,n){return h`${t} between ${Ye(e,t)} and ${Ye(n,t)}`}function Zb(t,e,n){return h`${t} not between ${Ye(e,t)} and ${Ye(n,t)}`}function Jb(t,e){return h`${t} like ${e}`}function Xb(t,e){return h`${t} not like ${e}`}function Yb(t,e){return h`${t} ilike ${e}`}function e0(t,e){return h`${t} not ilike ${e}`}function t0(t){return h`${t} asc`}function Rt(t){return h`${t} desc`}var xu=class{static[m]="ConsoleLogWriter";write(e){console.log(e)}},to=class{static[m]="DefaultLogger";writer;constructor(e){this.writer=e?.writer??new xu}logQuery(e,n){let r=n.map(a=>{try{return JSON.stringify(a)}catch{return String(a)}}),i=r.length?` -- params: [${r.join(", ")}]`:"";this.writer.write(`Query: ${e}${i}`)}},no=class{static[m]="NoopLogger";logQuery(){}};var qe=class{static[m]="QueryPromise";[Symbol.toStringTag]="QueryPromise";catch(e){return this.then(void 0,e)}finally(e){return this.then(n=>(e?.(),n),n=>{throw e?.(),n})}then(e,n){return this.execute().then(e,n)}};function n0(t,e,n){let r={},i=t.reduce((a,{path:s,field:o},l)=>{let c;w(o,W)?c=o:w(o,I)?c=o.decoder:c=o.sql.decoder;let u=a;for(let[p,d]of s.entries())if(p<s.length-1)d in u||(u[d]={}),u=u[d];else{let f=e[l],v=u[d]=f===null?null:c.mapFromDriverValue(f);if(n&&w(o,W)&&s.length===2){let y=s[0];y in r?typeof r[y]=="string"&&r[y]!==Je(o.table)&&(r[y]=!1):r[y]=v===null?Je(o.table):!1}}return a},{});if(n&&Object.keys(r).length>0)for(let[a,s]of Object.entries(r))typeof s=="string"&&!n[s]&&(i[a]=null);return i}function ft(t,e){return Object.entries(t).reduce((n,[r,i])=>{if(typeof r!="string")return n;let a=e?[...e,r]:[r];return w(i,W)||w(i,I)||w(i,I.Aliased)?n.push({path:a,field:i}):w(i,T)?n.push(...ft(i[T.Symbol.Columns],a)):n.push(...ft(i,a)),n},[])}function ca(t,e){let n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(let[i,a]of n.entries())if(a!==r[i])return!1;return!0}function ro(t,e){let n=Object.entries(e).filter(([,r])=>r!==void 0).map(([r,i])=>w(i,I)||w(i,W)?[r,i]:[r,new Xe(i,t[T.Symbol.Columns][r])]);if(n.length===0)throw new Error("No values to set");return Object.fromEntries(n)}function r0(t,e){for(let n of e)for(let r of Object.getOwnPropertyNames(n.prototype))r!=="constructor"&&Object.defineProperty(t.prototype,r,Object.getOwnPropertyDescriptor(n.prototype,r)||Object.create(null))}function io(t){return t[T.Symbol.Columns]}function i0(t){return t[se].selectedFields}function Gt(t){return w(t,we)?t._.alias:w(t,ze)?t[se].name:w(t,I)?void 0:t[T.Symbol.IsAlias]?t[T.Symbol.Name]:t[T.Symbol.BaseName]}function V(t,e){return{name:typeof t=="string"&&t.length>0?t:"",config:typeof t=="object"?t:e}}function a0(t){if(typeof t!="object"||t===null||t.constructor.name!=="Object")return!1;if("logger"in t){let e=typeof t.logger;return!(e!=="boolean"&&(e!=="object"||typeof t.logger.logQuery!="function")&&e!=="undefined")}if("schema"in t){let e=typeof t.logger;return!(e!=="object"&&e!=="undefined")}if("casing"in t){let e=typeof t.logger;return!(e!=="string"&&e!=="undefined")}if("mode"in t)return!(t.mode!=="default"||t.mode!=="planetscale"||t.mode!==void 0);if("connection"in t){let e=typeof t.connection;return!(e!=="string"&&e!=="object"&&e!=="undefined")}if("client"in t){let e=typeof t.client;return!(e!=="object"&&e!=="function"&&e!=="undefined")}return Object.keys(t).length===0}var Kt=class extends N{static[m]="PgIntColumnBaseBuilder";generatedAlwaysAsIdentity(e){if(e){let{name:n,...r}=e;this.config.generatedIdentity={type:"always",sequenceName:n,sequenceOptions:r}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(e){if(e){let{name:n,...r}=e;this.config.generatedIdentity={type:"byDefault",sequenceName:n,sequenceOptions:r}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}};var bu=class extends Kt{static[m]="PgBigInt53Builder";constructor(e){super(e,"number","PgBigInt53")}build(e){return new wu(e,this.config)}},wu=class extends E{static[m]="PgBigInt53";getSQLType(){return"bigint"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}},Su=class extends Kt{static[m]="PgBigInt64Builder";constructor(e){super(e,"bigint","PgBigInt64")}build(e){return new _u(e,this.config)}},_u=class extends E{static[m]="PgBigInt64";getSQLType(){return"bigint"}mapFromDriverValue(e){return BigInt(e)}};function s0(t,e){let{name:n,config:r}=V(t,e);return r.mode==="number"?new bu(n):new Su(n)}var Cu=class extends N{static[m]="PgBigSerial53Builder";constructor(e){super(e,"number","PgBigSerial53"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new Eu(e,this.config)}},Eu=class extends E{static[m]="PgBigSerial53";getSQLType(){return"bigserial"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}},ku=class extends N{static[m]="PgBigSerial64Builder";constructor(e){super(e,"bigint","PgBigSerial64"),this.config.hasDefault=!0}build(e){return new Tu(e,this.config)}},Tu=class extends E{static[m]="PgBigSerial64";getSQLType(){return"bigserial"}mapFromDriverValue(e){return BigInt(e)}};function o0(t,e){let{name:n,config:r}=V(t,e);return r.mode==="number"?new Cu(n):new ku(n)}var Au=class extends N{static[m]="PgBooleanBuilder";constructor(e){super(e,"boolean","PgBoolean")}build(e){return new Pu(e,this.config)}},Pu=class extends E{static[m]="PgBoolean";getSQLType(){return"boolean"}};function Fr(t){return new Au(t??"")}var Iu=class extends N{static[m]="PgCharBuilder";constructor(e,n){super(e,"string","PgChar"),this.config.length=n.length,this.config.enumValues=n.enum}build(e){return new Nu(e,this.config)}},Nu=class extends E{static[m]="PgChar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return this.length===void 0?"char":`char(${this.length})`}};function c0(t,e={}){let{name:n,config:r}=V(t,e);return new Iu(n,r)}var Ou=class extends N{static[m]="PgCidrBuilder";constructor(e){super(e,"string","PgCidr")}build(e){return new ju(e,this.config)}},ju=class extends E{static[m]="PgCidr";getSQLType(){return"cidr"}};function l0(t){return new Ou(t??"")}var qu=class extends N{static[m]="PgCustomColumnBuilder";constructor(e,n,r){super(e,"custom","PgCustomColumn"),this.config.fieldConfig=n,this.config.customTypeParams=r}build(e){return new Du(e,this.config)}},Du=class extends E{static[m]="PgCustomColumn";sqlName;mapTo;mapFrom;constructor(e,n){super(e,n),this.sqlName=n.customTypeParams.dataType(n.fieldConfig),this.mapTo=n.customTypeParams.toDriver,this.mapFrom=n.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(e){return typeof this.mapFrom=="function"?this.mapFrom(e):e}mapToDriverValue(e){return typeof this.mapTo=="function"?this.mapTo(e):e}};function u0(t){return(e,n)=>{let{name:r,config:i}=V(e,n);return new qu(r,i,t)}}var Mt=class extends N{static[m]="PgDateColumnBaseBuilder";defaultNow(){return this.default(h`now()`)}};var Ru=class extends Mt{static[m]="PgDateBuilder";constructor(e){super(e,"date","PgDate")}build(e){return new la(e,this.config)}},la=class extends E{static[m]="PgDate";getSQLType(){return"date"}mapFromDriverValue(e){return new Date(e)}mapToDriverValue(e){return e.toISOString()}},Mu=class extends Mt{static[m]="PgDateStringBuilder";constructor(e){super(e,"string","PgDateString")}build(e){return new ua(e,this.config)}},ua=class extends E{static[m]="PgDateString";getSQLType(){return"date"}};function p0(t,e){let{name:n,config:r}=V(t,e);return r?.mode==="date"?new Ru(n):new Mu(n)}var Bu=class extends N{static[m]="PgDoublePrecisionBuilder";constructor(e){super(e,"number","PgDoublePrecision")}build(e){return new Lu(e,this.config)}},Lu=class extends E{static[m]="PgDoublePrecision";getSQLType(){return"double precision"}mapFromDriverValue(e){return typeof e=="string"?Number.parseFloat(e):e}};function d0(t){return new Bu(t??"")}var Fu=class extends N{static[m]="PgInetBuilder";constructor(e){super(e,"string","PgInet")}build(e){return new $u(e,this.config)}},$u=class extends E{static[m]="PgInet";getSQLType(){return"inet"}};function f0(t){return new Fu(t??"")}var zu=class extends Kt{static[m]="PgIntegerBuilder";constructor(e){super(e,"number","PgInteger")}build(e){return new Uu(e,this.config)}},Uu=class extends E{static[m]="PgInteger";getSQLType(){return"integer"}mapFromDriverValue(e){return typeof e=="string"?Number.parseInt(e):e}};function mt(t){return new zu(t??"")}var Qu=class extends N{static[m]="PgIntervalBuilder";constructor(e,n){super(e,"string","PgInterval"),this.config.intervalConfig=n}build(e){return new Hu(e,this.config)}},Hu=class extends E{static[m]="PgInterval";fields=this.config.intervalConfig.fields;precision=this.config.intervalConfig.precision;getSQLType(){let e=this.fields?` ${this.fields}`:"",n=this.precision?`(${this.precision})`:"";return`interval${e}${n}`}};function m0(t,e={}){let{name:n,config:r}=V(t,e);return new Qu(n,r)}var Vu=class extends N{static[m]="PgJsonBuilder";constructor(e){super(e,"json","PgJson")}build(e){return new pa(e,this.config)}},pa=class extends E{static[m]="PgJson";constructor(e,n){super(e,n)}getSQLType(){return"json"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}};function h0(t){return new Vu(t??"")}var Gu=class extends N{static[m]="PgJsonbBuilder";constructor(e){super(e,"json","PgJsonb")}build(e){return new da(e,this.config)}},da=class extends E{static[m]="PgJsonb";constructor(e,n){super(e,n)}getSQLType(){return"jsonb"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}};function Bn(t){return new Gu(t??"")}var Ku=class extends N{static[m]="PgLineBuilder";constructor(e){super(e,"array","PgLine")}build(e){return new Wu(e,this.config)}},Wu=class extends E{static[m]="PgLine";getSQLType(){return"line"}mapFromDriverValue(e){let[n,r,i]=e.slice(1,-1).split(",");return[Number.parseFloat(n),Number.parseFloat(r),Number.parseFloat(i)]}mapToDriverValue(e){return`{${e[0]},${e[1]},${e[2]}}`}},Zu=class extends N{static[m]="PgLineABCBuilder";constructor(e){super(e,"json","PgLineABC")}build(e){return new Ju(e,this.config)}},Ju=class extends E{static[m]="PgLineABC";getSQLType(){return"line"}mapFromDriverValue(e){let[n,r,i]=e.slice(1,-1).split(",");return{a:Number.parseFloat(n),b:Number.parseFloat(r),c:Number.parseFloat(i)}}mapToDriverValue(e){return`{${e.a},${e.b},${e.c}}`}};function v0(t,e){let{name:n,config:r}=V(t,e);return!r?.mode||r.mode==="tuple"?new Ku(n):new Zu(n)}var Xu=class extends N{static[m]="PgMacaddrBuilder";constructor(e){super(e,"string","PgMacaddr")}build(e){return new Yu(e,this.config)}},Yu=class extends E{static[m]="PgMacaddr";getSQLType(){return"macaddr"}};function g0(t){return new Xu(t??"")}var ep=class extends N{static[m]="PgMacaddr8Builder";constructor(e){super(e,"string","PgMacaddr8")}build(e){return new tp(e,this.config)}},tp=class extends E{static[m]="PgMacaddr8";getSQLType(){return"macaddr8"}};function y0(t){return new ep(t??"")}var np=class extends N{static[m]="PgNumericBuilder";constructor(e,n,r){super(e,"string","PgNumeric"),this.config.precision=n,this.config.scale=r}build(e){return new fa(e,this.config)}},fa=class extends E{static[m]="PgNumeric";precision;scale;constructor(e,n){super(e,n),this.precision=n.precision,this.scale=n.scale}getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}};function x0(t,e){let{name:n,config:r}=V(t,e);return new np(n,r?.precision,r?.scale)}var rp=class extends N{static[m]="PgPointTupleBuilder";constructor(e){super(e,"array","PgPointTuple")}build(e){return new ip(e,this.config)}},ip=class extends E{static[m]="PgPointTuple";getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){let[n,r]=e.slice(1,-1).split(",");return[Number.parseFloat(n),Number.parseFloat(r)]}return[e.x,e.y]}mapToDriverValue(e){return`(${e[0]},${e[1]})`}},ap=class extends N{static[m]="PgPointObjectBuilder";constructor(e){super(e,"json","PgPointObject")}build(e){return new sp(e,this.config)}},sp=class extends E{static[m]="PgPointObject";getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){let[n,r]=e.slice(1,-1).split(",");return{x:Number.parseFloat(n),y:Number.parseFloat(r)}}return e}mapToDriverValue(e){return`(${e.x},${e.y})`}};function b0(t,e){let{name:n,config:r}=V(t,e);return!r?.mode||r.mode==="tuple"?new rp(n):new ap(n)}function qA(t){let e=[];for(let n=0;n<t.length;n+=2)e.push(Number.parseInt(t.slice(n,n+2),16));return new Uint8Array(e)}function w0(t,e){let n=new ArrayBuffer(8),r=new DataView(n);for(let i=0;i<8;i++)r.setUint8(i,t[e+i]);return r.getFloat64(0,!0)}function op(t){let e=qA(t),n=0,r=e[n];n+=1;let i=new DataView(e.buffer),a=i.getUint32(n,r===1);n+=4;let s;if(a&536870912&&(s=i.getUint32(n,r===1),n+=4),(a&65535)===1){let o=w0(e,n);n+=8;let l=w0(e,n);return n+=8,[o,l]}throw new Error("Unsupported geometry type")}var cp=class extends N{static[m]="PgGeometryBuilder";constructor(e){super(e,"array","PgGeometry")}build(e){return new lp(e,this.config)}},lp=class extends E{static[m]="PgGeometry";getSQLType(){return"geometry(point)"}mapFromDriverValue(e){return op(e)}mapToDriverValue(e){return`point(${e[0]} ${e[1]})`}},up=class extends N{static[m]="PgGeometryObjectBuilder";constructor(e){super(e,"json","PgGeometryObject")}build(e){return new pp(e,this.config)}},pp=class extends E{static[m]="PgGeometryObject";getSQLType(){return"geometry(point)"}mapFromDriverValue(e){let n=op(e);return{x:n[0],y:n[1]}}mapToDriverValue(e){return`point(${e.x} ${e.y})`}};function S0(t,e){let{name:n,config:r}=V(t,e);return!r?.mode||r.mode==="tuple"?new cp(n):new up(n)}var dp=class extends N{static[m]="PgRealBuilder";constructor(e,n){super(e,"number","PgReal"),this.config.length=n}build(e){return new fp(e,this.config)}},fp=class extends E{static[m]="PgReal";constructor(e,n){super(e,n)}getSQLType(){return"real"}mapFromDriverValue=e=>typeof e=="string"?Number.parseFloat(e):e};function ma(t){return new dp(t??"")}var mp=class extends N{static[m]="PgSerialBuilder";constructor(e){super(e,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new hp(e,this.config)}},hp=class extends E{static[m]="PgSerial";getSQLType(){return"serial"}};function _0(t){return new mp(t??"")}var vp=class extends Kt{static[m]="PgSmallIntBuilder";constructor(e){super(e,"number","PgSmallInt")}build(e){return new gp(e,this.config)}},gp=class extends E{static[m]="PgSmallInt";getSQLType(){return"smallint"}mapFromDriverValue=e=>typeof e=="string"?Number(e):e};function C0(t){return new vp(t??"")}var yp=class extends N{static[m]="PgSmallSerialBuilder";constructor(e){super(e,"number","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new xp(e,this.config)}},xp=class extends E{static[m]="PgSmallSerial";getSQLType(){return"smallserial"}};function E0(t){return new yp(t??"")}var bp=class extends N{static[m]="PgTextBuilder";constructor(e,n){super(e,"string","PgText"),this.config.enumValues=n.enum}build(e){return new wp(e,this.config)}},wp=class extends E{static[m]="PgText";enumValues=this.config.enumValues;getSQLType(){return"text"}};function A(t,e={}){let{name:n,config:r}=V(t,e);return new bp(n,r)}var Sp=class extends Mt{constructor(e,n,r){super(e,"string","PgTime"),this.withTimezone=n,this.precision=r,this.config.withTimezone=n,this.config.precision=r}static[m]="PgTimeBuilder";build(e){return new ha(e,this.config)}},ha=class extends E{static[m]="PgTime";withTimezone;precision;constructor(e,n){super(e,n),this.withTimezone=n.withTimezone,this.precision=n.precision}getSQLType(){return`time${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}};function k0(t,e={}){let{name:n,config:r}=V(t,e);return new Sp(n,r.withTimezone??!1,r.precision)}var _p=class extends Mt{static[m]="PgTimestampBuilder";constructor(e,n,r){super(e,"date","PgTimestamp"),this.config.withTimezone=n,this.config.precision=r}build(e){return new va(e,this.config)}},va=class extends E{static[m]="PgTimestamp";withTimezone;precision;constructor(e,n){super(e,n),this.withTimezone=n.withTimezone,this.precision=n.precision}getSQLType(){return`timestamp${this.precision===void 0?"":` (${this.precision})`}${this.withTimezone?" with time zone":""}`}mapFromDriverValue=e=>new Date(this.withTimezone?e:e+"+0000");mapToDriverValue=e=>e.toISOString()},Cp=class extends Mt{static[m]="PgTimestampStringBuilder";constructor(e,n,r){super(e,"string","PgTimestampString"),this.config.withTimezone=n,this.config.precision=r}build(e){return new ga(e,this.config)}},ga=class extends E{static[m]="PgTimestampString";withTimezone;precision;constructor(e,n){super(e,n),this.withTimezone=n.withTimezone,this.precision=n.precision}getSQLType(){return`timestamp${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}};function Ue(t,e={}){let{name:n,config:r}=V(t,e);return r?.mode==="string"?new Cp(n,r.withTimezone??!1,r.precision):new _p(n,r?.withTimezone??!1,r?.precision)}var Ep=class extends N{static[m]="PgUUIDBuilder";constructor(e){super(e,"string","PgUUID")}defaultRandom(){return this.default(h`gen_random_uuid()`)}build(e){return new ya(e,this.config)}},ya=class extends E{static[m]="PgUUID";getSQLType(){return"uuid"}};function T0(t){return new Ep(t??"")}var kp=class extends N{static[m]="PgVarcharBuilder";constructor(e,n){super(e,"string","PgVarchar"),this.config.length=n.length,this.config.enumValues=n.enum}build(e){return new Tp(e,this.config)}},Tp=class extends E{static[m]="PgVarchar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return this.length===void 0?"varchar":`varchar(${this.length})`}};function ue(t,e={}){let{name:n,config:r}=V(t,e);return new kp(n,r)}var Ap=class extends N{static[m]="PgBinaryVectorBuilder";constructor(e,n){super(e,"string","PgBinaryVector"),this.config.dimensions=n.dimensions}build(e){return new Pp(e,this.config)}},Pp=class extends E{static[m]="PgBinaryVector";dimensions=this.config.dimensions;getSQLType(){return`bit(${this.dimensions})`}};function A0(t,e){let{name:n,config:r}=V(t,e);return new Ap(n,r)}var Ip=class extends N{static[m]="PgHalfVectorBuilder";constructor(e,n){super(e,"array","PgHalfVector"),this.config.dimensions=n.dimensions}build(e){return new Np(e,this.config)}},Np=class extends E{static[m]="PgHalfVector";dimensions=this.config.dimensions;getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){return e.slice(1,-1).split(",").map(n=>Number.parseFloat(n))}};function P0(t,e){let{name:n,config:r}=V(t,e);return new Ip(n,r)}var Op=class extends N{static[m]="PgSparseVectorBuilder";constructor(e,n){super(e,"string","PgSparseVector"),this.config.dimensions=n.dimensions}build(e){return new jp(e,this.config)}},jp=class extends E{static[m]="PgSparseVector";dimensions=this.config.dimensions;getSQLType(){return`sparsevec(${this.dimensions})`}};function I0(t,e){let{name:n,config:r}=V(t,e);return new Op(n,r)}var qp=class extends N{static[m]="PgVectorBuilder";constructor(e,n){super(e,"array","PgVector"),this.config.dimensions=n.dimensions}build(e){return new Dp(e,this.config)}},Dp=class extends E{static[m]="PgVector";dimensions=this.config.dimensions;getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){return e.slice(1,-1).split(",").map(n=>Number.parseFloat(n))}};function N0(t,e){let{name:n,config:r}=V(t,e);return new qp(n,r)}function O0(){return{bigint:s0,bigserial:o0,boolean:Fr,char:c0,cidr:l0,customType:u0,date:p0,doublePrecision:d0,inet:f0,integer:mt,interval:m0,json:h0,jsonb:Bn,line:v0,macaddr:g0,macaddr8:y0,numeric:x0,point:b0,geometry:S0,real:ma,serial:_0,smallint:C0,smallserial:E0,text:A,time:k0,timestamp:Ue,uuid:T0,varchar:ue,bit:A0,halfvec:P0,sparsevec:I0,vector:N0}}var Rp=Symbol.for("drizzle:PgInlineForeignKeys"),j0=Symbol.for("drizzle:EnableRLS"),Ie=class extends T{static[m]="PgTable";static Symbol=Object.assign({},T.Symbol,{InlineForeignKeys:Rp,EnableRLS:j0});[Rp]=[];[j0]=!1;[T.Symbol.ExtraConfigBuilder]=void 0};function DA(t,e,n,r,i=t){let a=new Ie(t,r,i),s=typeof e=="function"?e(O0()):e,o=Object.fromEntries(Object.entries(s).map(([u,p])=>{let d=p;d.setName(u);let f=d.build(a);return a[Rp].push(...d.buildForeignKeys(f,a)),[u,f]})),l=Object.fromEntries(Object.entries(s).map(([u,p])=>{let d=p;d.setName(u);let f=d.buildExtraConfigColumn(a);return[u,f]})),c=Object.assign(a,o);return c[T.Symbol.Columns]=o,c[T.Symbol.ExtraConfigColumns]=l,n&&(c[Ie.Symbol.ExtraConfigBuilder]=n),Object.assign(c,{enableRLS:()=>(c[Ie.Symbol.EnableRLS]=!0,c)})}var Et=(t,e,n)=>DA(t,e,n,void 0);var ao=class{static[m]="PgPrimaryKeyBuilder";columns;name;constructor(e,n){this.columns=e,this.name=n}build(e){return new Mp(e,this.columns,this.name)}},Mp=class{constructor(e,n,r){this.table=e,this.columns=n,this.name=r}static[m]="PgPrimaryKey";columns;name;getName(){return this.name??`${this.table[Ie.Symbol.Name]}_${this.columns.map(e=>e.name).join("_")}_pk`}};var so=class{constructor(e,n,r){this.sourceTable=e,this.referencedTable=n,this.relationName=r,this.referencedTableName=n[T.Symbol.Name]}static[m]="Relation";referencedTableName;fieldName},Bp=class{constructor(e,n){this.table=e,this.config=n}static[m]="Relations"},un=class t extends so{constructor(e,n,r,i){super(e,n,r?.relationName),this.config=r,this.isNullable=i}static[m]="One";withFieldName(e){let n=new t(this.sourceTable,this.referencedTable,this.config,this.isNullable);return n.fieldName=e,n}},xa=class t extends so{constructor(e,n,r){super(e,n,r?.relationName),this.config=r}static[m]="Many";withFieldName(e){let n=new t(tnpm warn config production Use `--omit=dev` instead.
  hint: undefined,
  constraint: undefined,
  position: '55',
  file: 'parse_relation.c',
> rest-express@1.0.0 seed
  line: '1449',
  internalPosition: undefined,
> NODE_ENV=production node dist/seed.cjs
  routine: 'parserOpenTable'
  internalQuery: undefined,
}
Seeding database with realistic healthcare data...
  where: undefined,
error: relation "users" does not exist
  schema: undefined,
    at /app/dist/seed.cjs:2:13326
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
  table: undefined,
    at async /app/dist/seed.cjs:8:31375
  column: undefined,
    at async Rp (/app/dist/seed.cjs:8:114026) {
  length: 104,
  severity: 'ERROR',
  code: '42P01',
  detail: undefined,
npm warn config production Use `--omit=dev` instead.
> rest-express@1.0.0 start
> NODE_ENV=production node dist/index.cjs
11:35:31 PM [express] serving on port 8080
/app/dist/index.cjs:64
`);Ra.write(ww.format.apply(ww,e))}}Object.defineProperty(Yt.exports,"isWin",{get:function(){return Bo},set:function(t){Bo=t}});Yt.exports.warnTo=function(t){var e=Ra;return Ra=t,e};Yt.exports.getFileName=function(t){var e=t||process.env,n=e.PGPASSFILE||(Bo?bw.join(e.APPDATA||"./","postgresql","pgpass.conf"):bw.join(e.HOME||"./",".pgpass"));return n};Yt.exports.usePgPass=function(t,e){return Object.prototype.hasOwnProperty.call(process.env,"PGPASSWORD")?!1:Bo?!0:(e=e||"<unkn>",Z9(t.mode)?t.mode&(V9|G9)?(Ud('WARNING: password file "%s" has group or world access; permissions should be u=rw (0600) or less',e),!1):!0:(Ud('WARNING: password file "%s" is not a plain file',e),!1))};var X9=Yt.exports.match=function(t,e){return oi.slice(0,-1).reduce(function(n,r,i){return i==1&&Number(t[r]||H9)===Number(e[r])?n&&!0:n&&(e[r]==="*"||e[r]===t[r])},!0)};Yt.exports.getPassword=function(t,e,n){var r,i=e.pipe(Q9());function a(l){var c=Y9(l);c&&eI(c)&&X9(t,c)&&(r=c[J9],i.end())}var s=function(){e.destroy(),n(r)},o=function(l){e.destroy(),Ud("WARNING: error on reading file: %s",l),n(void 0)};e.on("error",o),i.on("data",a).on("end",s).on("error",o)};var Y9=Yt.exports.parseLine=function(t){if(t.length<11||t.match(/^\s+#/))return null;for(var e="",n="",r=0,i=0,a=0,s={},o=!1,l=function(u,p,d){var f=t.substring(p,d);Object.hasOwnProperty.call(process.env,"PGPASS_NO_DEESCAPE")||(f=f.replace(/\\([:\\])/g,"$1")),s[oi[u]]=f},c=0;c<t.length-1;c+=1){if(e=t.charAt(c+1),n=t.charAt(c),o=r==zd-1,o){l(r,i);break}c>=0&&e==":"&&n!=="\\"&&(l(r,i,c+1),i=c+2,r+=1)}return s=Object.keys(s).length===zd?s:null,s},eI=Yt.exports.isValidEntry=function(t){for(var e={0:function(s){return s.length>0},1:function(s){return s==="*"?!0:(s=Number(s),isFinite(s)&&s>0&&s<9007199254740992&&Math.floor(s)===s)},2:function(s){return s.length>0},3:function(s){return s.length>0},4:function(s){return s.length>0}},n=0;n<oi.length;n+=1){var r=e[n],i=t[oi[n]]||"",a=r(i);if(!a)return!1}return!0}});var Cw=g((d7,Qd)=>{"use strict";var p7=require("path"),_w=require("fs"),Lo=Sw();Qd.exports=function(t,e){var n=Lo.getFileName();_w.stat(n,function(r,i){if(r||!Lo.usePgPass(i,n))return e(void 0);var a=_w.createReadStream(n);Lo.getPassword(t,a,e)})};Qd.exports.warnTo=Lo.warnTo});var Aw=g((f7,Tw)=>{"use strict";var tI=require("events").EventEmitter,Ew=ni(),Hd=H1(),nI=No(),rI=fd(),kw=iw(),iI=qa(),aI=$d(),sI=ud(),Fo=class extends tI{constructor(e){super(),this.connectionParameters=new rI(e),this.user=this.connectionParameters.user,this.database=this.connectionParameters.database,this.port=this.connectionParameters.port,this.host=this.connectionParameters.host,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:this.connectionParameters.password}),this.replication=this.connectionParameters.replication;let n=e||{};this._Promise=n.Promise||global.Promise,this._types=new nI(n.types),this._ending=!1,this._ended=!1,this._connecting=!1,this._connected=!1,this._connectionError=!1,this._queryable=!0,this.enableChannelBinding=!!n.enableChannelBinding,this.connection=n.connection||new aI({stream:n.stream,ssl:this.connectionParameters.ssl,keepAlive:n.keepAlive||!1,keepAliveInitialDelayMillis:n.keepAliveInitialDelayMillis||0,encoding:this.connectionParameters.client_encoding||"utf8"}),this.queryQueue=[],this.binary=n.binary||iI.binary,this.processID=null,this.secretKey=null,this.ssl=this.connectionParameters.ssl||!1,this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this._connectionTimeoutMillis=n.connectionTimeoutMillis||0}_errorAllQueries(e){let n=r=>{process.nextTick(()=>{r.handleError(e,this.connection)})};this.activeQuery&&(n(this.activeQuery),this.activeQuery=null),this.queryQueue.forEach(n),this.queryQueue.length=0}_connect(e){let n=this,r=this.connection;if(this._connectionCallback=e,this._connecting||this._connected){let i=new Error("Client has already been connected. You cannot reuse a client.");process.nextTick(()=>{e(i)});return}this._connecting=!0,this._connectionTimeoutMillis>0&&(this.connectionTimeoutHandle=setTimeout(()=>{r._ending=!0,r.stream.destroy(new Error("timeout expired"))},this._connectionTimeoutMillis),this.connectionTimeoutHandle.unref&&this.connectionTimeoutHandle.unref()),this.host&&this.host.indexOf("/")===0?r.connect(this.host+"/.s.PGSQL."+this.port):r.connect(this.port,this.host),r.on("connect",function(){n.ssl?r.requestSsl():r.startup(n.getStartupConf())}),r.on("sslconnect",function(){r.startup(n.getStartupConf())}),this._attachListeners(r),r.once("end",()=>{let i=this._ending?new Error("Connection terminated"):new Error("Connection terminated unexpectedly");clearTimeout(this.connectionTimeoutHandle),this._errorAllQueries(i),this._ended=!0,this._ending||(this._connecting&&!this._connectionError?this._connectionCallback?this._connectionCallback(i):this._handleErrorEvent(i):this._connectionError||this._handleErrorEvent(i)),process.nextTick(()=>{this.emit("end")})})}connect(e){if(e){this._connect(e);return}return new this._Promise((n,r)=>{this._connect(i=>{i?r(i):n()})})}_attachListeners(e){e.on("authenticationCleartextPassword",this._handleAuthCleartextPassword.bind(this)),e.on("authenticationMD5Password",this._handleAuthMD5Password.bind(this)),e.on("authenticationSASL",this._handleAuthSASL.bind(this)),e.on("authenticationSASLContinue",this._handleAuthSASLContinue.bind(this)),e.on("authenticationSASLFinal",this._handleAuthSASLFinal.bind(this)),e.on("backendKeyData",this._handleBackendKeyData.bind(this)),e.on("error",this._handleErrorEvent.bind(this)),e.on("errorMessage",this._handleErrorMessage.bind(this)),e.on("readyForQuery",this._handleReadyForQuery.bind(this)),e.on("notice",this._handleNotice.bind(this)),e.on("rowDescription",this._handleRowDescription.bind(this)),e.on("dataRow",this._handleDataRow.bind(this)),e.on("portalSuspended",this._handlePortalSuspended.bind(this)),e.on("emptyQuery",this._handleEmptyQuery.bind(this)),e.on("commandComplete",this._handleCommandComplete.bind(this)),e.on("parseComplete",this._handleParseComplete.bind(this)),e.on("copyInResponse",this._handleCopyInResponse.bind(this)),e.on("copyData",this._handleCopyData.bind(this)),e.on("notification",this._handleNotification.bind(this))}_checkPgPass(e){let n=this.connection;if(typeof this.password=="function")this._Promise.resolve().then(()=>this.password()).then(r=>{if(r!==void 0){if(typeof r!="string"){n.emit("error",new TypeError("Password must be a string"));return}this.connectionParameters.password=this.password=r}else this.connectionParameters.password=this.password=null;e()}).catch(r=>{n.emit("error",r)});else if(this.password!==null)e();else try{Cw()(this.connectionParameters,i=>{i!==void 0&&(this.connectionParameters.password=this.password=i),e()})}catch(r){this.emit("error",r)}}_handleAuthCleartextPassword(e){this._checkPgPass(()=>{this.connection.password(this.password)})}_handleAuthMD5Password(e){this._checkPgPass(async()=>{try{let n=await sI.postgresMd5PasswordHash(this.user,this.password,e.salt);this.connection.password(n)}catch(n){this.emit("error",n)}})}_handleAuthSASL(e){this._checkPgPass(()=>{try{this.saslSession=Hd.startSession(e.mechanisms,this.enableChannelBinding&&this.connection.stream),this.connection.sendSASLInitialResponseMessage(this.saslSession.mechanism,this.saslSession.response)}catch(n){this.connection.emit("error",n)}})}async _handleAuthSASLContinue(e){try{await Hd.continueSession(this.saslSession,this.password,e.data,this.enableChannelBinding&&this.connection.stream),this.connection.sendSCRAMClientFinalMessage(this.saslSession.response)}catch(n){this.connection.emit("error",n)}}_handleAuthSASLFinal(e){try{Hd.finalizeSession(this.saslSession,e.data),this.saslSession=null}catch(n){this.connection.emit("error",n)}}_handleBackendKeyData(e){this.processID=e.processID,this.secretKey=e.secretKey}_handleReadyForQuery(e){this._connecting&&(this._connecting=!1,this._connected=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback&&(this._connectionCallback(null,this),this._connectionCallback=null),this.emit("connect"));let{activeQuery:n}=this;this.activeQuery=null,this.readyForQuery=!0,n&&n.handleReadyForQuery(this.connection),this._pulseQueryQueue()}_handleErrorWhileConnecting(e){if(!this._connectionError){if(this._connectionError=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback)return this._connectionCallback(e);this.emit("error",e)}}_handleErrorEvent(e){if(this._connecting)return this._handleErrorWhileConnecting(e);this._queryable=!1,this._errorAllQueries(e),this.emit("error",e)}_handleErrorMessage(e){if(this._connecting)return this._handleErrorWhileConnecting(e);let n=this.activeQuery;if(!n){this._handleErrorEvent(e);return}this.activeQuery=null,n.handleError(e,this.connection)}_handleRowDescription(e){this.activeQuery.handleRowDescription(e)}_handleDataRow(e){this.activeQuery.handleDataRow(e)}_handlePortalSuspended(e){this.activeQuery.handlePortalSuspended(this.connection)}_handleEmptyQuery(e){this.activeQuery.handleEmptyQuery(this.connection)}_handleCommandComplete(e){if(this.activeQuery==null){let n=new Error("Received unexpected commandComplete message from backend.");this._handleErrorEvent(n);return}this.activeQuery.handleCommandComplete(e,this.connection)}_handleParseComplete(){if(this.activeQuery==null){let e=new Error("Received unexpected parseComplete message from backend.");this._handleErrorEvent(e);return}this.activeQuery.name&&(this.connection.parsedStatements[this.activeQuery.name]=this.activeQuery.text)}_handleCopyInResponse(e){this.activeQuery.handleCopyInResponse(this.connection)}_handleCopyData(e){this.activeQuery.handleCopyData(e,this.connection)}_handleNotification(e){this.emit("notification",e)}_handleNotice(e){this.emit("notice",e)}getStartupConf(){let e=this.connectionParameters,n={user:e.user,database:e.database},r=e.application_name||e.fallback_application_name;return r&&(n.application_name=r),e.replication&&(n.replication=""+e.replication),e.statement_timeout&&(n.statement_timeout=String(parseInt(e.statement_timeout,10))),e.lock_timeout&&(n.lock_timeout=String(parseInt(e.lock_timeout,10))),e.idle_in_transaction_session_timeout&&(n.idle_in_transaction_session_timeout=String(parseInt(e.idle_in_transaction_session_timeout,10))),e.options&&(n.options=e.options),n}cancel(e,n){if(e.activeQuery===n){let r=this.connection;this.host&&this.host.indexOf("/")===0?r.connect(this.host+"/.s.PGSQL."+this.port):r.connect(this.port,this.host),r.on("connect",function(){r.cancel(e.processID,e.secretKey)})}else e.queryQueue.indexOf(n)!==-1&&e.queryQueue.splice(e.queryQueue.indexOf(n),1)}setTypeParser(e,n,r){return this._types.setTypeParser(e,n,r)}getTypeParser(e,n){return this._types.getTypeParser(e,n)}escapeIdentifier(e){return Ew.escapeIdentifier(e)}escapeLiteral(e){return Ew.escapeLiteral(e)}_pulseQueryQueue(){if(this.readyForQuery===!0)if(this.activeQuery=this.queryQueue.shift(),this.activeQuery){this.readyForQuery=!1,this.hasExecuted=!0;let e=this.activeQuery.submit(this.connection);e&&process.nextTick(()=>{this.activeQuery.handleError(e,this.connection),this.readyForQuery=!0,this._pulseQueryQueue()})}else this.hasExecuted&&(this.activeQuery=null,this.emit("drain"))}query(e,n,r){let i,a,s,o,l;if(e==null)throw new TypeError("Client was passed a null or undefined query");return typeof e.submit=="function"?(s=e.query_timeout||this.connectionParameters.query_timeout,a=i=e,typeof n=="function"&&(i.callback=i.callback||n)):(s=e.query_timeout||this.connectionParameters.query_timeout,i=new kw(e,n,r),i.callback||(a=new this._Promise((c,u)=>{i.callback=(p,d)=>p?u(p):c(d)}).catch(c=>{throw Error.captureStackTrace(c),c}))),s&&(l=i.callback,o=setTimeout(()=>{let c=new Error("Query read timeout");process.nextTick(()=>{i.handleError(c,this.connection)}),l(c),i.callback=()=>{};let u=this.queryQueue.indexOf(i);u>-1&&this.queryQueue.splice(u,1),this._pulseQueryQueue()},s),i.callback=(c,u)=>{clearTimeout(o),l(c,u)}),this.binary&&!i.binary&&(i.binary=!0),i._result&&!i._result._types&&(i._result._types=this._types),this._queryable?this._ending?(process.nextTick(()=>{i.handleError(new Error("Client was closed and is not queryable"),this.connection)}),a):(this.queryQueue.push(i),this._pulseQueryQueue(),a):(process.nextTick(()=>{i.handleError(new Error("Client has encountered a connection error and is not queryable"),this.connection)}),a)}ref(){this.connection.ref()}unref(){this.connection.unref()}end(e){if(this._ending=!0,!this.connection._connecting||this._ended)if(e)e();else return this._Promise.resolve();if(this.activeQuery||!this._queryable?this.connection.stream.destroy():this.connection.end(),e)this.connection.once("end",e);else return new this._Promise(n=>{this.connection.once("end",n)})}};Fo.Query=kw;Tw.exports=Fo});var Ow=g((m7,Nw)=>{"use strict";var oI=require("events").EventEmitter,Pw=function(){},Iw=(t,e)=>{let n=t.findIndex(e);return n===-1?void 0:t.splice(n,1)[0]},Vd=class{constructor(e,n,r){this.client=e,this.idleListener=n,this.timeoutId=r}},ci=class{constructor(e){this.callback=e}};function cI(){throw new Error("Release called on client which has already been released to the pool.")}function $o(t,e){if(e)return{callback:e,result:void 0};let n,r,i=function(s,o){s?n(s):r(o)},a=new t(function(s,o){r=s,n=o}).catch(s=>{throw Error.captureStackTrace(s),s});return{callback:i,result:a}}function lI(t,e){return function n(r){r.client=e,e.removeListener("error",n),e.on("error",()=>{t.log("additional client error after disconnection due to error",r)}),t._remove(e),t.emit("error",r,e)}}var Gd=class extends oI{constructor(e,n){super(),this.options=Object.assign({},e),e!=null&&"password"in e&&Object.defineProperty(this.options,"password",{configurable:!0,enumerable:!1,writable:!0,value:e.password}),e!=null&&e.ssl&&e.ssl.key&&Object.defineProperty(this.options.ssl,"key",{enumerable:!1}),this.options.max=this.options.max||this.options.poolSize||10,this.options.min=this.options.min||0,this.options.maxUses=this.options.maxUses||1/0,this.options.allowExitOnIdle=this.options.allowExitOnIdle||!1,this.options.maxLifetimeSeconds=this.options.maxLifetimeSeconds||0,this.log=this.options.log||function(){},this.Client=this.options.Client||n||Kd().Client,this.Promise=this.options.Promise||global.Promise,typeof this.options.idleTimeoutMillis>"u"&&(this.options.idleTimeoutMillis=1e4),this._clients=[],this._idle=[],this._expired=new WeakSet,this._pendingQueue=[],this._endCallback=void 0,this.ending=!1,this.ended=!1}_isFull(){return this._clients.length>=this.options.max}_isAboveMin(){return this._clients.length>this.options.min}_pulseQueue(){if(this.log("pulse queue"),this.ended){this.log("pulse queue ended");return}if(this.ending){this.log("pulse queue on ending"),this._idle.length&&this._idle.slice().map(n=>{this._remove(n.client)}),this._clients.length||(this.ended=!0,this._endCallback());return}if(!this._pendingQueue.length){this.log("no queued requests");return}if(!this._idle.length&&this._isFull())return;let e=this._pendingQueue.shift();if(this._idle.length){let n=this._idle.pop();clearTimeout(n.timeoutId);let r=n.client;r.ref&&r.ref();let i=n.idleListener;return this._acquireClient(r,e,i,!1)}if(!this._isFull())return this.newClient(e);throw new Error("unexpected condition")}_remove(e,n){let r=Iw(this._idle,a=>a.client===e);r!==void 0&&clearTimeout(r.timeoutId),this._clients=this._clients.filter(a=>a!==e);let i=this;e.end(()=>{i.emit("remove",e),typeof n=="function"&&n()})}connect(e){if(this.ending){let i=new Error("Cannot use a pool after calling end on the pool");return e?e(i):this.Promise.reject(i)}let n=$o(this.Promise,e),r=n.result;if(this._isFull()||this._idle.length){if(this._idle.length&&process.nextTick(()=>this._pulseQueue()),!this.options.connectionTimeoutMillis)return this._pendingQueue.push(new ci(n.callback)),r;let i=(o,l,c)=>{clearTimeout(s),n.callback(o,l,c)},a=new ci(i),s=setTimeout(()=>{Iw(this._pendingQueue,o=>o.callback===i),a.timedOut=!0,n.callback(new Error("timeout exceeded when trying to connect"))},this.options.connectionTimeoutMillis);return s.unref&&s.unref(),this._pendingQueue.push(a),r}return this.newClient(new ci(n.callback)),r}newClient(e){let n=new this.Client(this.options);this._clients.push(n);let r=lI(this,n);this.log("checking client timeout");let i,a=!1;this.options.connectionTimeoutMillis&&(i=setTimeout(()=>{this.log("ending client due to timeout"),a=!0,n.connection?n.connection.stream.destroy():n.end()},this.options.connectionTimeoutMillis)),this.log("connecting new client"),n.connect(s=>{if(i&&clearTimeout(i),n.on("error",r),s)this.log("client failed to connect",s),this._clients=this._clients.filter(o=>o!==n),a&&(s=new Error("Connection terminated due to connection timeout",{cause:s})),this._pulseQueue(),e.timedOut||e.callback(s,void 0,Pw);else{if(this.log("new client connected"),this.options.maxLifetimeSeconds!==0){let o=setTimeout(()=>{this.log("ending client due to expired lifetime"),this._expired.add(n),this._idle.findIndex(c=>c.client===n)!==-1&&this._acquireClient(n,new ci((c,u,p)=>p()),r,!1)},this.options.maxLifetimeSeconds*1e3);o.unref(),n.once("end",()=>clearTimeout(o))}return this._acquireClient(n,e,r,!0)}})}_acquireClient(e,n,r,i){i&&this.emit("connect",e),this.emit("acquire",e),e.release=this._releaseOnce(e,r),e.removeListener("error",r),n.timedOut?i&&this.options.verify?this.options.verify(e,e.release):e.release():i&&this.options.verify?this.options.verify(e,a=>{if(a)return e.release(a),n.callback(a,void 0,Pw);n.callback(void 0,e,e.release)}):n.callback(void 0,e,e.release)}_releaseOnce(e,n){let r=!1;return i=>{r&&cI(),r=!0,this._release(e,n,i)}}_release(e,n,r){if(e.on("error",n),e._poolUseCount=(e._poolUseCount||0)+1,this.emit("release",r,e),r||this.ending||!e._queryable||e._ending||e._poolUseCount>=this.options.maxUses)return e._poolUseCount>=this.options.maxUses&&this.log("remove expended client"),this._remove(e,this._pulseQueue.bind(this));if(this._expired.has(e))return this.log("remove expired client"),this._expired.delete(e),this._remove(e,this._pulseQueue.bind(this));let a;this.options.idleTimeoutMillis&&this._isAboveMin()&&(a=setTimeout(()=>{this.log("remove idle client"),this._remove(e,this._pulseQueue.bind(this))},this.options.idleTimeoutMillis),this.options.allowExitOnIdle&&a.unref()),this.options.allowExitOnIdle&&e.unref(),this._idle.push(new Vd(e,n,a)),this._pulseQueue()}query(e,n,r){if(typeof e=="function"){let a=$o(this.Promise,e);return setImmediate(function(){return a.callback(new Error("Passing a function as the first parameter to pool.query is not supported"))}),a.result}typeof n=="function"&&(r=n,n=void 0);let i=$o(this.Promise,r);return r=i.callback,this.connect((a,s)=>{if(a)return r(a);let o=!1,l=c=>{o||(o=!0,s.release(c),r(c))};s.once("error",l),this.log("dispatching query");try{s.query(e,n,(c,u)=>{if(this.log("query dispatched"),s.removeListener("error",l),!o)return o=!0,s.release(c),c?r(c):r(void 0,u)})}catch(c){return s.release(c),r(c)}}),i.result}end(e){if(this.log("ending"),this.ending){let r=new Error("Called end on pool more than once");return e?e(r):this.Promise.reject(r)}this.ending=!0;let n=$o(this.Promise,e);return this._endCallback=n.callback,this._pulseQueue(),n.result}get waitingCount(){return this._pendingQueue.length}get idleCount(){return this._idle.length}get expiredCount(){return this._clients.reduce((e,n)=>e+(this._expired.has(n)?1:0),0)}get totalCount(){return this._clients.length}};Nw.exports=Gd});var Dw=g((h7,qw)=>{"use strict";var jw=require("events").EventEmitter,uI=require("util"),Wd=ni(),li=qw.exports=function(t,e,n){jw.call(this),t=Wd.normalizeQueryConfig(t,e,n),this.text=t.text,this.values=t.values,this.name=t.name,this.queryMode=t.queryMode,this.callback=t.callback,this.state="new",this._arrayMode=t.rowMode==="array",this._emitRowEvents=!1,this.on("newListener",function(r){r==="row"&&(this._emitRowEvents=!0)}.bind(this))};uI.inherits(li,jw);var pI={sqlState:"code",statementPosition:"position",messagePrimary:"message",context:"where",schemaName:"schema",tableName:"table",columnName:"column",dataTypeName:"dataType",constraintName:"constraint",sourceFile:"file",sourceLine:"line",sourceFunction:"routine"};li.prototype.handleError=function(t){let e=this.native.pq.resultErrorFields();if(e)for(let n in e){let r=pI[n]||n;t[r]=e[n]}this.callback?this.callback(t):this.emit("error",t),this.state="error"};li.prototype.then=function(t,e){return this._getPromise().then(t,e)};li.prototype.catch=function(t){return this._getPromise().catch(t)};li.prototype._getPromise=function(){return this._promise?this._promise:(this._promise=new Promise(function(t,e){this._once("end",t),this._once("error",e)}.bind(this)),this._promise)};li.prototype.submit=function(t){this.state="running";let e=this;this.native=t.native,t.native.arrayMode=this._arrayMode;let n=function(r,i,a){if(t.native.arrayMode=!1,setImmediate(function(){e.emit("_done")}),r)return e.handleError(r);e._emitRowEvents&&(a.length>1?i.forEach((s,o)=>{s.forEach(l=>{e.emit("row",l,a[o])})}):i.forEach(function(s){e.emit("row",s,a)})),e.state="end",e.emit("end",a),e.callback&&e.callback(null,a)};if(process.domain&&(n=process.domain.bind(n)),this.name){this.name.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",this.name,this.name.length),console.error("This can cause conflicts and silent errors executing queries"));let r=(this.values||[]).map(Wd.prepareValue);if(t.namedQueries[this.name]){if(this.text&&t.namedQueries[this.name]!==this.text){let i=new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`);return n(i)}return t.native.execute(this.name,r,n)}return t.native.prepare(this.name,this.text,r.length,function(i){return i?n(i):(t.namedQueries[e.name]=e.text,e.native.execute(e.name,r,n))})}else if(this.values){if(!Array.isArray(this.values)){let i=new Error("Query values must be an array");return n(i)}let r=this.values.map(Wd.prepareValue);t.native.query(this.text,r,n)}else this.queryMode==="extended"?t.native.query(this.text,[],n):t.native.query(this.text,n)}});var Fw=g((v7,Lw)=>{"use strict";var Rw;try{Rw=require("pg-native")}catch(t){throw t}var dI=No(),Mw=require("events").EventEmitter,fI=require("util"),mI=fd(),Bw=Dw(),rt=Lw.exports=function(t){Mw.call(this),t=t||{},this._Promise=t.Promise||global.Promise,this._types=new dI(t.types),this.native=new Rw({types:this._types}),this._queryQueue=[],this._ending=!1,this._connecting=!1,this._connected=!1,this._queryable=!0;let e=this.connectionParameters=new mI(t);t.nativeConnectionString&&(e.nativeConnectionString=t.nativeConnectionString),this.user=e.user,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:e.password}),this.database=e.database,this.host=e.host,this.port=e.port,this.namedQueries={}};rt.Query=Bw;fI.inherits(rt,Mw);rt.prototype._errorAllQueries=function(t){let e=n=>{process.nextTick(()=>{n.native=this.native,n.handleError(t)})};this._hasActiveQuery()&&(e(this._activeQuery),this._activeQuery=null),this._queryQueue.forEach(e),this._queryQueue.length=0};rt.prototype._connect=function(t){let e=this;if(this._connecting){process.nextTick(()=>t(new Error("Client has already been connected. You cannot reuse a client.")));return}this._connecting=!0,this.connectionParameters.getLibpqConnectionString(function(n,r){if(e.connectionParameters.nativeConnectionString&&(r=e.connectionParameters.nativeConnectionString),n)return t(n);e.native.connect(r,function(i){if(i)return e.native.end(),t(i);e._connected=!0,e.native.on("error",function(a){e._queryable=!1,e._errorAllQueries(a),e.emit("error",a)}),e.native.on("notification",function(a){e.emit("notification",{channel:a.relname,payload:a.extra})}),e.emit("connect"),e._pulseQueryQueue(!0),t()})})};rt.prototype.connect=function(t){if(t){this._connect(t);return}return new this._Promise((e,n)=>{this._connect(r=>{r?n(r):e()})})};rt.prototype.query=function(t,e,n){let r,i,a,s,o;if(t==null)throw new TypeError("Client was passed a null or undefined query");if(typeof t.submit=="function")a=t.query_timeout||this.connectionParameters.query_timeout,i=r=t,typeof e=="function"&&(t.callback=e);else if(a=t.query_timeout||this.connectionParameters.query_timeout,r=new Bw(t,e,n),!r.callback){let l,c;i=new this._Promise((u,p)=>{l=u,c=p}).catch(u=>{throw Error.captureStackTrace(u),u}),r.callback=(u,p)=>u?c(u):l(p)}return a&&(o=r.callback,s=setTimeout(()=>{let l=new Error("Query read timeout");process.nextTick(()=>{r.handleError(l,this.connection)}),o(l),r.callback=()=>{};let c=this._queryQueue.indexOf(r);c>-1&&this._queryQueue.splice(c,1),this._pulseQueryQueue()},a),r.callback=(l,c)=>{clearTimeout(s),o(l,c)}),this._queryable?this._ending?(r.native=this.native,process.nextTick(()=>{r.handleError(new Error("Client was closed and is not queryable"))}),i):(this._queryQueue.push(r),this._pulseQueryQueue(),i):(r.native=this.native,process.nextTick(()=>{r.handleError(new Error("Client has encountered a connection error and is not queryable"))}),i)};rt.prototype.end=function(t){let e=this;this._ending=!0,this._connected||this.once("connect",this.end.bind(this,t));let n;return t||(n=new this._Promise(function(r,i){t=a=>a?i(a):r()})),this.native.end(function(){e._errorAllQueries(new Error("Connection terminated")),process.nextTick(()=>{e.emit("end"),t&&t()})}),n};rt.prototype._hasActiveQuery=function(){return this._activeQuery&&this._activeQuery.state!=="error"&&this._activeQuery.state!=="end"};rt.prototype._pulseQueryQueue=function(t){if(!this._connected||this._hasActiveQuery())return;let e=this._queryQueue.shift();if(!e){t||this.emit("drain");return}this._activeQuery=e,e.submit(this);let n=this;e.once("_done",function(){n._pulseQueryQueue()})};rt.prototype.cancel=function(t){this._activeQuery===t?this.native.cancel(function(){}):this._queryQueue.indexOf(t)!==-1&&this._queryQueue.splice(this._queryQueue.indexOf(t),1)};rt.prototype.ref=function(){};rt.prototype.unref=function(){};rt.prototype.setTypeParser=function(t,e,n){return this._types.setTypeParser(t,e,n)};rt.prototype.getTypeParser=function(t,e){return this._types.getTypeParser(t,e)}});var Zd=g((g7,$w)=>{"use strict";$w.exports=Fw()});var Kd=g((x7,Ma)=>{"use strict";var hI=Aw(),vI=qa(),gI=$d(),yI=hd(),xI=ni(),bI=Ow(),wI=No(),{DatabaseError:SI}=Bd(),{escapeIdentifier:_I,escapeLiteral:CI}=ni(),EI=t=>class extends bI{constructor(n){super(n,t)}},Jd=function(t){this.defaults=vI,this.Client=t,this.Query=this.Client.Query,this.Pool=EI(this.Client),this._pools=[],this.Connection=gI,this.types=ja(),this.DatabaseError=SI,this.TypeOverrides=wI,this.escapeIdentifier=_I,this.escapeLiteral=CI,this.Result=yI,this.utils=xI};typeof process.env.NODE_PG_FORCE_NATIVE<"u"?Ma.exports=new Jd(Zd()):(Ma.exports=new Jd(hI),Object.defineProperty(Ma.exports,"native",{configurable:!0,enumerable:!1,get(){let t=null;try{t=new Jd(Zd())}catch(e){if(e.code!=="MODULE_NOT_FOUND")throw e}return Object.defineProperty(Ma.exports,"native",{value:t}),t}}))});var II={};cf(II,{log:()=>sf});module.exports=eS(II);var Qo=pi(tu(),1);var Kp={};cf(Kp,{calls:()=>ct,claimEvents:()=>tr,claims:()=>zt,denials:()=>vn,encounters:()=>Yr,insertCallSchema:()=>v5,insertClaimEventSchema:()=>m5,insertClaimSchema:()=>f5,insertDenialSchema:()=>h5,insertEncounterSchema:()=>d5,insertLeadSchema:()=>Vp,insertPatientSchema:()=>p5,insertPriorAuthSchema:()=>g5,insertRuleSchema:()=>Gp,insertUserSchema:()=>u5,leads:()=>Ft,patients:()=>$t,priorAuthorizations:()=>tt,rules:()=>gt,users:()=>hn});var m=Symbol.for("drizzle:entityKind"),GO=Symbol.for("drizzle:hasOwnEntityKind");function w(t,e){if(!t||typeof t!="object")return!1;if(t instanceof e)return!0;if(!Object.prototype.hasOwnProperty.call(e,m))throw new Error(`Class "${e.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let n=Object.getPrototypeOf(t).constructor;if(n)for(;n;){if(m in n&&n[m]===e[m])return!0;n=Object.getPrototypeOf(n)}return!1}var W=class{constructor(e,n){this.table=e,this.config=n,this.name=n.name,this.keyAsName=n.keyAsName,this.notNull=n.notNull,this.default=n.default,this.defaultFn=n.defaultFn,this.onUpdateFn=n.onUpdateFn,this.hasDefault=n.hasDefault,this.primary=n.primaryKey,this.isUnique=n.isUnique,this.uniqueName=n.uniqueName,this.uniqueType=n.uniqueType,this.dataType=n.dataType,this.columnType=n.columnType,this.generated=n.generated,this.generatedIdentity=n.generatedIdentity}static[m]="Column";name;keyAsName;primary;notNull;default;defaultFn;onUpdateFn;hasDefault;isUnique;uniqueName;uniqueType;dataType;columnType;enumValues=void 0;generated=void 0;generatedIdentity=void 0;config;mapFromDriverValue(e){return e}mapToDriverValue(e){return e}shouldDisableInsert(){return this.config.generated!==void 0&&this.config.generated.type!=="byDefault"}};var Ws=class{static[m]="ColumnBuilder";config;constructor(e,n,r){this.config={name:e,keyAsName:e==="",notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:n,columnType:r,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(e){return this.config.default=e,this.config.hasDefault=!0,this}$defaultFn(e){return this.config.defaultFn=e,this.config.hasDefault=!0,this}$default=this.$defaultFn;$onUpdateFn(e){return this.config.onUpdateFn=e,this.config.hasDefault=!0,this}$onUpdate=this.$onUpdateFn;primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(e){this.config.name===""&&(this.config.name=e)}};var Ct=Symbol.for("drizzle:Name");var Zs=class{static[m]="PgForeignKeyBuilder";reference;_onUpdate="no action";_onDelete="no action";constructor(e,n){this.reference=()=>{let{name:r,columns:i,foreignColumns:a}=e();return{name:r,columns:i,foreignTable:a[0].table,foreignColumns:a}},n&&(this._onUpdate=n.onUpdate,this._onDelete=n.onDelete)}onUpdate(e){return this._onUpdate=e===void 0?"no action":e,this}onDelete(e){return this._onDelete=e===void 0?"no action":e,this}build(e){return new nu(e,this)}},nu=class{constructor(e,n){this.table=e,this.reference=n.reference,this.onUpdate=n._onUpdate,this.onDelete=n._onDelete}static[m]="PgForeignKey";reference;onUpdate;onDelete;getName(){let{name:e,columns:n,foreignColumns:r}=this.reference(),i=n.map(o=>o.name),a=r.map(o=>o.name),s=[this.table[Ct],...i,r[0].table[Ct],...a];return e??`${s.join("_")}_fk`}};function Js(t,...e){return t(...e)}function au(t,e){return`${t[Ct]}_${e.join("_")}_unique`}var ru=class{constructor(e,n){this.name=n,this.columns=e}static[m]="PgUniqueConstraintBuilder";columns;nullsNotDistinctConfig=!1;nullsNotDistinct(){return this.nullsNotDistinctConfig=!0,this}build(e){return new iu(e,this.columns,this.nullsNotDistinctConfig,this.name)}},gb=class{static[m]="PgUniqueOnConstraintBuilder";name;constructor(e){this.name=e}on(...e){return new ru(e,this.name)}},iu=class{constructor(e,n,r,i){this.table=e,this.columns=n,this.name=i??au(this.table,this.columns.map(a=>a.name)),this.nullsNotDistinct=r}static[m]="PgUniqueConstraint";columns;name;nullsNotDistinct=!1;getName(){return this.name}};function yb(t,e,n){for(let r=e;r<t.length;r++){let i=t[r];if(i==="\\"){r++;continue}if(i==='"')return[t.slice(e,r).replace(/\\/g,""),r+1];if(!n&&(i===","||i==="}"))return[t.slice(e,r).replace(/\\/g,""),r]}return[t.slice(e).replace(/\\/g,""),t.length]}function xb(t,e=0){let n=[],r=e,i=!1;for(;r<t.length;){let a=t[r];if(a===","){(i||r===e)&&n.push(""),i=!0,r++;continue}if(i=!1,a==="\\"){r+=2;continue}if(a==='"'){let[l,c]=yb(t,r+1,!0);n.push(l),r=c;continue}if(a==="}")return[n,r+1];if(a==="{"){let[l,c]=xb(t,r+1);n.push(l),r=c;continue}let[s,o]=yb(t,r,!1);n.push(s),r=o}return[n,r]}function bb(t){let[e]=xb(t,1);return e}function su(t){return`{${t.map(e=>Array.isArray(e)?su(e):typeof e=="string"?`"${e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${e}`).join(",")}}`}var N=class extends Ws{foreignKeyConfigs=[];static[m]="PgColumnBuilder";array(e){return new cu(this.config.name,this,e)}references(e,n={}){return this.foreignKeyConfigs.push({ref:e,actions:n}),this}unique(e,n){return this.config.isUnique=!0,this.config.uniqueName=e,this.config.uniqueType=n?.nulls,this}generatedAlwaysAs(e){return this.config.generated={as:e,type:"always",mode:"stored"},this}buildForeignKeys(e,n){return this.foreignKeyConfigs.map(({ref:r,actions:i})=>Js((a,s)=>{let o=new Zs(()=>{let l=a();return{columns:[e],foreignColumns:[l]}});return s.onUpdate&&o.onUpdate(s.onUpdate),s.onDelete&&o.onDelete(s.onDelete),o.build(n)},r,i))}buildExtraConfigColumn(e){return new ou(e,this.config)}},E=class extends W{constructor(e,n){n.uniqueName||(n.uniqueName=au(e,[n.name])),super(e,n),this.table=e}static[m]="PgColumn"},ou=class extends E{static[m]="ExtraConfigColumn";getSQLType(){return this.getSQLType()}indexConfig={order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass};defaultConfig={order:"asc",nulls:"last",opClass:void 0};asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(e){return this.indexConfig.opClass=e,this}},wb=class{static[m]="IndexedColumn";constructor(e,n,r,i){this.name=e,this.keyAsName=n,this.type=r,this.indexConfig=i}name;keyAsName;type;indexConfig},cu=class extends N{static[m]="PgArrayBuilder";constructor(e,n,r){super(e,"array","PgArray"),this.config.baseBuilder=n,this.config.size=r}build(e){let n=this.config.baseBuilder.build(e);return new lu(e,this.config,n)}},lu=class t extends E{constructor(e,n,r,i){super(e,n),this.baseColumn=r,this.range=i,this.size=n.size}size;static[m]="PgArray";getSQLType(){return`${this.baseColumn.getSQLType()}[${typeof this.size=="number"?this.size:""}]`}mapFromDriverValue(e){return typeof e=="string"&&(e=bb(e)),e.map(n=>this.baseColumn.mapFromDriverValue(n))}mapToDriverValue(e,n=!1){let r=e.map(i=>i===null?null:w(this.baseColumn,t)?this.baseColumn.mapToDriverValue(i,!0):this.baseColumn.mapToDriverValue(i));return n?r:su(r)}};var Sb=Symbol.for("drizzle:isPgEnum");function Cb(t){return!!t&&typeof t=="function"&&Sb in t&&t[Sb]===!0}var _b=class extends N{static[m]="PgEnumColumnBuilder";constructor(e,n){super(e,"string","PgEnumColumn"),this.config.enum=n}build(e){return new uu(e,this.config)}},uu=class extends E{static[m]="PgEnumColumn";enum=this.config.enum;enumValues=this.config.enum.enumValues;constructor(e,n){super(e,n),this.enum=n.enum}getSQLType(){return this.enum.enumName}};var we=class{static[m]="Subquery";constructor(e,n,r,i=!1){this._={brand:"Subquery",sql:e,selectedFields:n,alias:r,isWith:i}}},Br=class extends we{static[m]="WithSubquery"};var Eb="0.39.3";var pu,du,ae={startActiveSpan(t,e){return pu?(du||(du=pu.trace.getTracer("drizzle-orm",Eb)),Js((n,r)=>r.startActiveSpan(t,i=>{try{return e(i)}catch(a){throw i.setStatus({code:n.SpanStatusCode.ERROR,message:a instanceof Error?a.message:"Unknown error"}),a}finally{i.end()}}),pu,du)):e()}};var se=Symbol.for("drizzle:ViewBaseConfig");var Xs=Symbol.for("drizzle:Schema"),Ys=Symbol.for("drizzle:Columns"),kb=Symbol.for("drizzle:ExtraConfigColumns"),fu=Symbol.for("drizzle:OriginalName"),mu=Symbol.for("drizzle:BaseName"),na=Symbol.for("drizzle:IsAlias"),Tb=Symbol.for("drizzle:ExtraConfigBuilder"),Ab=Symbol.for("drizzle:IsDrizzleTable"),T=class{static[m]="Table";static Symbol={Name:Ct,Schema:Xs,OriginalName:fu,Columns:Ys,ExtraConfigColumns:kb,BaseName:mu,IsAlias:na,ExtraConfigBuilder:Tb};[Ct];[fu];[Xs];[Ys];[kb];[mu];[na]=!1;[Ab]=!0;[Tb]=void 0;constructor(e,n,r){this[Ct]=this[fu]=e,this[Xs]=n,this[mu]=r}};function hu(t){return typeof t=="object"&&t!==null&&Ab in t}function Je(t){return t[Ct]}function Rn(t){return`${t[Xs]??"public"}.${t[Ct]}`}var Pb=class{static[m]="FakePrimitiveParam"};function vu(t){return t!=null&&typeof t.getSQL=="function"}function jA(t){let e={sql:"",params:[]};for(let n of t)e.sql+=n.sql,e.params.push(...n.params),n.typings?.length&&(e.typings||(e.typings=[]),e.typings.push(...n.typings));return e}var Se=class{static[m]="StringChunk";value;constructor(e){this.value=Array.isArray(e)?e:[e]}getSQL(){return new I([this])}},I=class t{constructor(e){this.queryChunks=e}static[m]="SQL";decoder=Nb;shouldInlineParams=!1;append(e){return this.queryChunks.push(...e.queryChunks),this}toQuery(e){return ae.startActiveSpan("drizzle.buildSQL",n=>{let r=this.buildQueryFromSourceParams(this.queryChunks,e);return n?.setAttributes({"drizzle.query.text":r.sql,"drizzle.query.params":JSON.stringify(r.params)}),r})}buildQueryFromSourceParams(e,n){let r=Object.assign({},n,{inlineParams:n.inlineParams||this.shouldInlineParams,paramStartIndex:n.paramStartIndex||{value:0}}),{casing:i,escapeName:a,escapeParam:s,prepareTyping:o,inlineParams:l,paramStartIndex:c}=r;return jA(e.map(u=>{if(w(u,Se))return{sql:u.value.join(""),params:[]};if(w(u,ra))return{sql:a(u.value),params:[]};if(u===void 0)return{sql:"",params:[]};if(Array.isArray(u)){let p=[new Se("(")];for(let[d,f]of u.entries())p.push(f),d<u.length-1&&p.push(new Se(", "));return p.push(new Se(")")),this.buildQueryFromSourceParams(p,r)}if(w(u,t))return this.buildQueryFromSourceParams(u.queryChunks,{...r,inlineParams:l||u.shouldInlineParams});if(w(u,T)){let p=u[T.Symbol.Schema],d=u[T.Symbol.Name];return{sql:p===void 0||u[na]?a(d):a(p)+"."+a(d),params:[]}}if(w(u,W)){let p=i.getColumnCasing(u);if(n.invokeSource==="indexes")return{sql:a(p),params:[]};let d=u.table[T.Symbol.Schema];return{sql:u.table[na]||d===void 0?a(u.table[T.Symbol.Name])+"."+a(p):a(d)+"."+a(u.table[T.Symbol.Name])+"."+a(p),params:[]}}if(w(u,ze)){let p=u[se].schema,d=u[se].name;return{sql:p===void 0||u[se].isAlias?a(d):a(p)+"."+a(d),params:[]}}if(w(u,Xe)){if(w(u.value,Vt))return{sql:s(c.value++,u),params:[u],typings:["none"]};let p=u.value===null?null:u.encoder.mapToDriverValue(u.value);if(w(p,t))return this.buildQueryFromSourceParams([p],r);if(l)return{sql:this.mapInlineParam(p,r),params:[]};let d=["none"];return o&&(d=[o(u.encoder)]),{sql:s(c.value++,p),params:[p],typings:d}}return w(u,Vt)?{sql:s(c.value++,u),params:[u],typings:["none"]}:w(u,t.Aliased)&&u.fieldAlias!==void 0?{sql:a(u.fieldAlias),params:[]}:w(u,we)?u._.isWith?{sql:a(u._.alias),params:[]}:this.buildQueryFromSourceParams([new Se("("),u._.sql,new Se(") "),new ra(u._.alias)],r):Cb(u)?u.schema?{sql:a(u.schema)+"."+a(u.enumName),params:[]}:{sql:a(u.enumName),params:[]}:vu(u)?u.shouldOmitSQLParens?.()?this.buildQueryFromSourceParams([u.getSQL()],r):this.buildQueryFromSourceParams([new Se("("),u.getSQL(),new Se(")")],r):l?{sql:this.mapInlineParam(u,r),params:[]}:{sql:s(c.value++,u),params:[u],typings:["none"]}}))}mapInlineParam(e,{escapeString:n}){if(e===null)return"null";if(typeof e=="number"||typeof e=="boolean")return e.toString();if(typeof e=="string")return n(e);if(typeof e=="object"){let r=e.toString();return n(r==="[object Object]"?JSON.stringify(e):r)}throw new Error("Unexpected param value: "+e)}getSQL(){return this}as(e){return e===void 0?this:new t.Aliased(this,e)}mapWith(e){return this.decoder=typeof e=="function"?{mapFromDriverValue:e}:e,this}inlineParams(){return this.shouldInlineParams=!0,this}if(e){return e?this:void 0}},ra=class{constructor(e){this.value=e}static[m]="Name";brand;getSQL(){return new I([this])}};function Ib(t){return typeof t=="object"&&t!==null&&"mapToDriverValue"in t&&typeof t.mapToDriverValue=="function"}var Nb={mapFromDriverValue:t=>t},Ob={mapToDriverValue:t=>t},Rj={...Nb,...Ob},Xe=class{constructor(e,n=Ob){this.value=e,this.encoder=n}static[m]="Param";brand;getSQL(){return new I([this])}};function h(t,...e){let n=[];(e.length>0||t.length>0&&t[0]!=="")&&n.push(new Se(t[0]));for(let[r,i]of e.entries())n.push(i,new Se(t[r+1]));return new I(n)}(t=>{function e(){return new I([])}t.empty=e;function n(l){return new I(l)}t.fromList=n;function r(l){return new I([new Se(l)])}t.raw=r;function i(l,c){let u=[];for(let[p,d]of l.entries())p>0&&c!==void 0&&u.push(c),u.push(d);return new I(u)}t.join=i;function a(l){return new ra(l)}t.identifier=a;function s(l){return new Vt(l)}t.placeholder=s;function o(l,c){return new Xe(l,c)}t.param=o})(h||(h={}));(t=>{class e{constructor(r,i){this.sql=r,this.fieldAlias=i}static[m]="SQL.Aliased";isSelectionField=!1;getSQL(){return this.sql}clone(){return new e(this.sql,this.fieldAlias)}}t.Aliased=e})(I||(I={}));var Vt=class{constructor(e){this.name=e}static[m]="Placeholder";getSQL(){return new I([this])}};function gu(t,e){return t.map(n=>{if(w(n,Vt)){if(!(n.name in e))throw new Error(`No value for placeholder "${n.name}" was provided`);return e[n.name]}if(w(n,Xe)&&w(n.value,Vt)){if(!(n.value.name in e))throw new Error(`No value for placeholder "${n.value.name}" was provided`);return n.encoder.mapToDriverValue(e[n.value.name])}return n})}var jb=Symbol.for("drizzle:IsDrizzleView"),ze=class{static[m]="View";[se];[jb]=!0;constructor({name:e,schema:n,selectedFields:r,query:i}){this[se]={name:e,originalName:e,schema:n,selectedFields:r,query:i,isExisting:!i,isAlias:!1}}getSQL(){return new I([this])}};function qb(t){return typeof t=="object"&&t!==null&&jb in t}W.prototype.getSQL=function(){return new I([this])};T.prototype.getSQL=function(){return new I([this])};we.prototype.getSQL=function(){return new I([this])};var Mn=class{constructor(e){this.table=e}static[m]="ColumnAliasProxyHandler";get(e,n){return n==="table"?this.table:e[n]}},Lr=class{constructor(e,n){this.alias=e,this.replaceOriginalName=n}static[m]="TableAliasProxyHandler";get(e,n){if(n===T.Symbol.IsAlias)return!0;if(n===T.Symbol.Name)return this.alias;if(this.replaceOriginalName&&n===T.Symbol.OriginalName)return this.alias;if(n===se)return{...e[se],name:this.alias,isAlias:!0};if(n===T.Symbol.Columns){let i=e[T.Symbol.Columns];if(!i)return i;let a={};return Object.keys(i).map(s=>{a[s]=new Proxy(i[s],new Mn(new Proxy(e,this)))}),a}let r=e[n];return w(r,W)?new Proxy(r,new Mn(new Proxy(e,this))):r}},Db=class{constructor(e){this.alias=e}static[m]="RelationTableAliasProxyHandler";get(e,n){return n==="sourceTable"?ia(e.sourceTable,this.alias):e[n]}};function ia(t,e){return new Proxy(t,new Lr(e,!1))}function Dt(t,e){return new Proxy(t,new Mn(new Proxy(t.table,new Lr(e,!1))))}function yu(t,e){return new I.Aliased(aa(t.sql,e),t.fieldAlias)}function aa(t,e){return h.join(t.queryChunks.map(n=>w(n,W)?Dt(n,e):w(n,I)?aa(n,e):w(n,I.Aliased)?yu(n,e):n))}var sa=class extends Error{static[m]="DrizzleError";constructor({message:e,cause:n}){super(e),this.name="DrizzleError",this.cause=n}},eo=class extends sa{static[m]="TransactionRollbackError";constructor(){super({message:"Rollback"})}};function Ye(t,e){return Ib(e)&&!vu(t)&&!w(t,Xe)&&!w(t,Vt)&&!w(t,W)&&!w(t,T)&&!w(t,ze)?new Xe(t,e):t}var ne=(t,e)=>h`${t} = ${Ye(e,t)}`,Rb=(t,e)=>h`${t} <> ${Ye(e,t)}`;function oa(...t){let e=t.filter(n=>n!==void 0);if(e.length!==0)return e.length===1?new I(e):new I([new Se("("),h.join(e,new Se(" and ")),new Se(")")])}function Mb(...t){let e=t.filter(n=>n!==void 0);if(e.length!==0)return e.length===1?new I(e):new I([new Se("("),h.join(e,new Se(" or ")),new Se(")")])}function Bb(t){return h`not ${t}`}var Lb=(t,e)=>h`${t} > ${Ye(e,t)}`,Fb=(t,e)=>h`${t} >= ${Ye(e,t)}`,$b=(t,e)=>h`${t} < ${Ye(e,t)}`,zb=(t,e)=>h`${t} <= ${Ye(e,t)}`;function Ub(t,e){return Array.isArray(e)?e.length===0?h`false`:h`${t} in ${e.map(n=>Ye(n,t))}`:h`${t} in ${Ye(e,t)}`}function Qb(t,e){return Array.isArray(e)?e.length===0?h`true`:h`${t} not in ${e.map(n=>Ye(n,t))}`:h`${t} not in ${Ye(e,t)}`}function Hb(t){return h`${t} is null`}function Vb(t){return h`${t} is not null`}function Gb(t){return h`exists ${t}`}function Kb(t){return h`not exists ${t}`}function Wb(t,e,n){return h`${t} between ${Ye(e,t)} and ${Ye(n,t)}`}function Zb(t,e,n){return h`${t} not between ${Ye(e,t)} and ${Ye(n,t)}`}function Jb(t,e){return h`${t} like ${e}`}function Xb(t,e){return h`${t} not like ${e}`}function Yb(t,e){return h`${t} ilike ${e}`}function e0(t,e){return h`${t} not ilike ${e}`}function t0(t){return h`${t} asc`}function Rt(t){return h`${t} desc`}var xu=class{static[m]="ConsoleLogWriter";write(e){console.log(e)}},to=class{static[m]="DefaultLogger";writer;constructor(e){this.writer=e?.writer??new xu}logQuery(e,n){let r=n.map(a=>{try{return JSON.stringify(a)}catch{return String(a)}}),i=r.length?` -- params: [${r.join(", ")}]`:"";this.writer.write(`Query: ${e}${i}`)}},no=class{static[m]="NoopLogger";logQuery(){}};var qe=class{static[m]="QueryPromise";[Symbol.toStringTag]="QueryPromise";catch(e){return this.then(void 0,e)}finally(e){return this.then(n=>(e?.(),n),n=>{throw e?.(),n})}then(e,n){return this.execute().then(e,n)}};function n0(t,e,n){let r={},i=t.reduce((a,{path:s,field:o},l)=>{let c;w(o,W)?c=o:w(o,I)?c=o.decoder:c=o.sql.decoder;let u=a;for(let[p,d]of s.entries())if(p<s.length-1)d in u||(u[d]={}),u=u[d];else{let f=e[l],v=u[d]=f===null?null:c.mapFromDriverValue(f);if(n&&w(o,W)&&s.length===2){let y=s[0];y in r?typeof r[y]=="string"&&r[y]!==Je(o.table)&&(r[y]=!1):r[y]=v===null?Je(o.table):!1}}return a},{});if(n&&Object.keys(r).length>0)for(let[a,s]of Object.entries(r))typeof s=="string"&&!n[s]&&(i[a]=null);return i}function ft(t,e){return Object.entries(t).reduce((n,[r,i])=>{if(typeof r!="string")return n;let a=e?[...e,r]:[r];return w(i,W)||w(i,I)||w(i,I.Aliased)?n.push({path:a,field:i}):w(i,T)?n.push(...ft(i[T.Symbol.Columns],a)):n.push(...ft(i,a)),n},[])}function ca(t,e){let n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(let[i,a]of n.entries())if(a!==r[i])return!1;return!0}function ro(t,e){let n=Object.entries(e).filter(([,r])=>r!==void 0).map(([r,i])=>w(i,I)||w(i,W)?[r,i]:[r,new Xe(i,t[T.Symbol.Columns][r])]);if(n.length===0)throw new Error("No values to set");return Object.fromEntries(n)}function r0(t,e){for(let n of e)for(let r of Object.getOwnPropertyNames(n.prototype))r!=="constructor"&&Object.defineProperty(t.prototype,r,Object.getOwnPropertyDescriptor(n.prototype,r)||Object.create(null))}function io(t){return t[T.Symbol.Columns]}function i0(t){return t[se].selectedFields}function Gt(t){return w(t,we)?t._.alias:w(t,ze)?t[se].name:w(t,I)?void 0:t[T.Symbol.IsAlias]?t[T.Symbol.Name]:t[T.Symbol.BaseName]}function V(t,e){return{name:typeof t=="string"&&t.length>0?t:"",config:typeof t=="object"?t:e}}function a0(t){if(typeof t!="object"||t===null||t.constructor.name!=="Object")return!1;if("logger"in t){let e=typeof t.logger;return!(e!=="boolean"&&(e!=="object"||typeof t.logger.logQuery!="function")&&e!=="undefined")}if("schema"in t){let e=typeof t.logger;return!(e!=="object"&&e!=="undefined")}if("casing"in t){let e=typeof t.logger;return!(e!=="string"&&e!=="undefined")}if("mode"in t)return!(t.mode!=="default"||t.mode!=="planetscale"||t.mode!==void 0);if("connection"in t){let e=typeof t.connection;return!(e!=="string"&&e!=="object"&&e!=="undefined")}if("client"in t){let e=typeof t.client;return!(e!=="object"&&e!=="function"&&e!=="undefined")}return Object.keys(t).length===0}var Kt=class extends N{static[m]="PgIntColumnBaseBuilder";generatedAlwaysAsIdentity(e){if(e){let{name:n,...r}=e;this.config.generatedIdentity={type:"always",sequenceName:n,sequenceOptions:r}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(e){if(e){let{name:n,...r}=e;this.config.generatedIdentity={type:"byDefault",sequenceName:n,sequenceOptions:r}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}};var bu=class extends Kt{static[m]="PgBigInt53Builder";constructor(e){super(e,"number","PgBigInt53")}build(e){return new wu(e,this.config)}},wu=class extends E{static[m]="PgBigInt53";getSQLType(){return"bigint"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}},Su=class extends Kt{static[m]="PgBigInt64Builder";constructor(e){super(e,"bigint","PgBigInt64")}build(e){return new _u(e,this.config)}},_u=class extends E{static[m]="PgBigInt64";getSQLType(){return"bigint"}mapFromDriverValue(e){return BigInt(e)}};function s0(t,e){let{name:n,config:r}=V(t,e);return r.mode==="number"?new bu(n):new Su(n)}var Cu=class extends N{static[m]="PgBigSerial53Builder";constructor(e){super(e,"number","PgBigSerial53"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new Eu(e,this.config)}},Eu=class extends E{static[m]="PgBigSerial53";getSQLType(){return"bigserial"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}},ku=class extends N{static[m]="PgBigSerial64Builder";constructor(e){super(e,"bigint","PgBigSerial64"),this.config.hasDefault=!0}build(e){return new Tu(e,this.config)}},Tu=class extends E{static[m]="PgBigSerial64";getSQLType(){return"bigserial"}mapFromDriverValue(e){return BigInt(e)}};function o0(t,e){let{name:n,config:r}=V(t,e);return r.mode==="number"?new Cu(n):new ku(n)}var Au=class extends N{static[m]="PgBooleanBuilder";constructor(e){super(e,"boolean","PgBoolean")}build(e){return new Pu(e,this.config)}},Pu=class extends E{static[m]="PgBoolean";getSQLType(){return"boolean"}};function Fr(t){return new Au(t??"")}var Iu=class extends N{static[m]="PgCharBuilder";constructor(e,n){super(e,"string","PgChar"),this.config.length=n.length,this.config.enumValues=n.enum}build(e){return new Nu(e,this.config)}},Nu=class extends E{static[m]="PgChar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return this.length===void 0?"char":`char(${this.length})`}};function c0(t,e={}){let{name:n,config:r}=V(t,e);return new Iu(n,r)}var Ou=class extends N{static[m]="PgCidrBuilder";constructor(e){super(e,"string","PgCidr")}build(e){return new ju(e,this.config)}},ju=class extends E{static[m]="PgCidr";getSQLType(){return"cidr"}};function l0(t){return new Ou(t??"")}var qu=class extends N{static[m]="PgCustomColumnBuilder";constructor(e,n,r){super(e,"custom","PgCustomColumn"),this.config.fieldConfig=n,this.config.customTypeParams=r}build(e){return new Du(e,this.config)}},Du=class extends E{static[m]="PgCustomColumn";sqlName;mapTo;mapFrom;constructor(e,n){super(e,n),this.sqlName=n.customTypeParams.dataType(n.fieldConfig),this.mapTo=n.customTypeParams.toDriver,this.mapFrom=n.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(e){return typeof this.mapFrom=="function"?this.mapFrom(e):e}mapToDriverValue(e){return typeof this.mapTo=="function"?this.mapTo(e):e}};function u0(t){return(e,n)=>{let{name:r,config:i}=V(e,n);return new qu(r,i,t)}}var Mt=class extends N{static[m]="PgDateColumnBaseBuilder";defaultNow(){return this.default(h`now()`)}};var Ru=class extends Mt{static[m]="PgDateBuilder";constructor(e){super(e,"date","PgDate")}build(e){return new la(e,this.config)}},la=class extends E{static[m]="PgDate";getSQLType(){return"date"}mapFromDriverValue(e){return new Date(e)}mapToDriverValue(e){return e.toISOString()}},Mu=class extends Mt{static[m]="PgDateStringBuilder";constructor(e){super(e,"string","PgDateString")}build(e){return new ua(e,this.config)}},ua=class extends E{static[m]="PgDateString";getSQLType(){return"date"}};function p0(t,e){let{name:n,config:r}=V(t,e);return r?.mode==="date"?new Ru(n):new Mu(n)}var Bu=class extends N{static[m]="PgDoublePrecisionBuilder";constructor(e){super(e,"number","PgDoublePrecision")}build(e){return new Lu(e,this.config)}},Lu=class extends E{static[m]="PgDoublePrecision";getSQLType(){return"double precision"}mapFromDriverValue(e){return typeof e=="string"?Number.parseFloat(e):e}};function d0(t){return new Bu(t??"")}var Fu=class extends N{static[m]="PgInetBuilder";constructor(e){super(e,"string","PgInet")}build(e){return new $u(e,this.config)}},$u=class extends E{static[m]="PgInet";getSQLType(){return"inet"}};function f0(t){return new Fu(t??"")}var zu=class extends Kt{static[m]="PgIntegerBuilder";constructor(e){super(e,"number","PgInteger")}build(e){return new Uu(e,this.config)}},Uu=class extends E{static[m]="PgInteger";getSQLType(){return"integer"}mapFromDriverValue(e){return typeof e=="string"?Number.parseInt(e):e}};function mt(t){return new zu(t??"")}var Qu=class extends N{static[m]="PgIntervalBuilder";constructor(e,n){super(e,"string","PgInterval"),this.config.intervalConfig=n}build(e){return new Hu(e,this.config)}},Hu=class extends E{static[m]="PgInterval";fields=this.config.intervalConfig.fields;precision=this.config.intervalConfig.precision;getSQLType(){let e=this.fields?` ${this.fields}`:"",n=this.precision?`(${this.precision})`:"";return`interval${e}${n}`}};function m0(t,e={}){let{name:n,config:r}=V(t,e);return new Qu(n,r)}var Vu=class extends N{static[m]="PgJsonBuilder";constructor(e){super(e,"json","PgJson")}build(e){return new pa(e,this.config)}},pa=class extends E{static[m]="PgJson";constructor(e,n){super(e,n)}getSQLType(){return"json"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}};function h0(t){return new Vu(t??"")}var Gu=class extends N{static[m]="PgJsonbBuilder";constructor(e){super(e,"json","PgJsonb")}build(e){return new da(e,this.config)}},da=class extends E{static[m]="PgJsonb";constructor(e,n){super(e,n)}getSQLType(){return"jsonb"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}};function Bn(t){return new Gu(t??"")}var Ku=class extends N{static[m]="PgLineBuilder";constructor(e){super(e,"array","PgLine")}build(e){return new Wu(e,this.config)}},Wu=class extends E{static[m]="PgLine";getSQLType(){return"line"}mapFromDriverValue(e){let[n,r,i]=e.slice(1,-1).split(",");return[Number.parseFloat(n),Number.parseFloat(r),Number.parseFloat(i)]}mapToDriverValue(e){return`{${e[0]},${e[1]},${e[2]}}`}},Zu=class extends N{static[m]="PgLineABCBuilder";constructor(e){super(e,"json","PgLineABC")}build(e){return new Ju(e,this.config)}},Ju=class extends E{static[m]="PgLineABC";getSQLType(){return"line"}mapFromDriverValue(e){let[n,r,i]=e.slice(1,-1).split(",");return{a:Number.parseFloat(n),b:Number.parseFloat(r),c:Number.parseFloat(i)}}mapToDriverValue(e){return`{${e.a},${e.b},${e.c}}`}};function v0(t,e){let{name:n,config:r}=V(t,e);return!r?.mode||r.mode==="tuple"?new Ku(n):new Zu(n)}var Xu=class extends N{static[m]="PgMacaddrBuilder";constructor(e){super(e,"string","PgMacaddr")}build(e){return new Yu(e,this.config)}},Yu=class extends E{static[m]="PgMacaddr";getSQLType(){return"macaddr"}};function g0(t){return new Xu(t??"")}var ep=class extends N{static[m]="PgMacaddr8Builder";constructor(e){super(e,"string","PgMacaddr8")}build(e){return new tp(e,this.config)}},tp=class extends E{static[m]="PgMacaddr8";getSQLType(){return"macaddr8"}};function y0(t){return new ep(t??"")}var np=class extends N{static[m]="PgNumericBuilder";constructor(e,n,r){super(e,"string","PgNumeric"),this.config.precision=n,this.config.scale=r}build(e){return new fa(e,this.config)}},fa=class extends E{static[m]="PgNumeric";precision;scale;constructor(e,n){super(e,n),this.precision=n.precision,this.scale=n.scale}getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}};function x0(t,e){let{name:n,config:r}=V(t,e);return new np(n,r?.precision,r?.scale)}var rp=class extends N{static[m]="PgPointTupleBuilder";constructor(e){super(e,"array","PgPointTuple")}build(e){return new ip(e,this.config)}},ip=class extends E{static[m]="PgPointTuple";getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){let[n,r]=e.slice(1,-1).split(",");return[Number.parseFloat(n),Number.parseFloat(r)]}return[e.x,e.y]}mapToDriverValue(e){return`(${e[0]},${e[1]})`}},ap=class extends N{static[m]="PgPointObjectBuilder";constructor(e){super(e,"json","PgPointObject")}build(e){return new sp(e,this.config)}},sp=class extends E{static[m]="PgPointObject";getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){let[n,r]=e.slice(1,-1).split(",");return{x:Number.parseFloat(n),y:Number.parseFloat(r)}}return e}mapToDriverValue(e){return`(${e.x},${e.y})`}};function b0(t,e){let{name:n,config:r}=V(t,e);return!r?.mode||r.mode==="tuple"?new rp(n):new ap(n)}function qA(t){let e=[];for(let n=0;n<t.length;n+=2)e.push(Number.parseInt(t.slice(n,n+2),16));return new Uint8Array(e)}function w0(t,e){let n=new ArrayBuffer(8),r=new DataView(n);for(let i=0;i<8;i++)r.setUint8(i,t[e+i]);return r.getFloat64(0,!0)}function op(t){let e=qA(t),n=0,r=e[n];n+=1;let i=new DataView(e.buffer),a=i.getUint32(n,r===1);n+=4;let s;if(a&536870912&&(s=i.getUint32(n,r===1),n+=4),(a&65535)===1){let o=w0(e,n);n+=8;let l=w0(e,n);return n+=8,[o,l]}throw new Error("Unsupported geometry type")}var cp=class extends N{static[m]="PgGeometryBuilder";constructor(e){super(e,"array","PgGeometry")}build(e){return new lp(e,this.config)}},lp=class extends E{static[m]="PgGeometry";getSQLType(){return"geometry(point)"}mapFromDriverValue(e){return op(e)}mapToDriverValue(e){return`point(${e[0]} ${e[1]})`}},up=class extends N{static[m]="PgGeometryObjectBuilder";constructor(e){super(e,"json","PgGeometryObject")}build(e){return new pp(e,this.config)}},pp=class extends E{static[m]="PgGeometryObject";getSQLType(){return"geometry(point)"}mapFromDriverValue(e){let n=op(e);return{x:n[0],y:n[1]}}mapToDriverValue(e){return`point(${e.x} ${e.y})`}};function S0(t,e){let{name:n,config:r}=V(t,e);return!r?.mode||r.mode==="tuple"?new cp(n):new up(n)}var dp=class extends N{static[m]="PgRealBuilder";constructor(e,n){super(e,"number","PgReal"),this.config.length=n}build(e){return new fp(e,this.config)}},fp=class extends E{static[m]="PgReal";constructor(e,n){super(e,n)}getSQLType(){return"real"}mapFromDriverValue=e=>typeof e=="string"?Number.parseFloat(e):e};function ma(t){return new dp(t??"")}var mp=class extends N{static[m]="PgSerialBuilder";constructor(e){super(e,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new hp(e,this.config)}},hp=class extends E{static[m]="PgSerial";getSQLType(){return"serial"}};function _0(t){return new mp(t??"")}var vp=class extends Kt{static[m]="PgSmallIntBuilder";constructor(e){super(e,"number","PgSmallInt")}build(e){return new gp(e,this.config)}},gp=class extends E{static[m]="PgSmallInt";getSQLType(){return"smallint"}mapFromDriverValue=e=>typeof e=="string"?Number(e):e};function C0(t){return new vp(t??"")}var yp=class extends N{static[m]="PgSmallSerialBuilder";constructor(e){super(e,"number","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new xp(e,this.config)}},xp=class extends E{static[m]="PgSmallSerial";getSQLType(){return"smallserial"}};function E0(t){return new yp(t??"")}var bp=class extends N{static[m]="PgTextBuilder";constructor(e,n){super(e,"string","PgText"),this.config.enumValues=n.enum}build(e){return new wp(e,this.config)}},wp=class extends E{static[m]="PgText";enumValues=this.config.enumValues;getSQLType(){return"text"}};function A(t,e={}){let{name:n,config:r}=V(t,e);return new bp(n,r)}var Sp=class extends Mt{constructor(e,n,r){super(e,"string","PgTime"),this.withTimezone=n,this.precision=r,this.config.withTimezone=n,this.config.precision=r}static[m]="PgTimeBuilder";build(e){return new ha(e,this.config)}},ha=class extends E{static[m]="PgTime";withTimezone;precision;constructor(e,n){super(e,n),this.withTimezone=n.withTimezone,this.precision=n.precision}getSQLType(){return`time${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}};function k0(t,e={}){let{name:n,config:r}=V(t,e);return new Sp(n,r.withTimezone??!1,r.precision)}var _p=class extends Mt{static[m]="PgTimestampBuilder";constructor(e,n,r){super(e,"date","PgTimestamp"),this.config.withTimezone=n,this.config.precision=r}build(e){return new va(e,this.config)}},va=class extends E{static[m]="PgTimestamp";withTimezone;precision;constructor(e,n){super(e,n),this.withTimezone=n.withTimezone,this.precision=n.precision}getSQLType(){return`timestamp${this.precision===void 0?"":` (${this.precision})`}${this.withTimezone?" with time zone":""}`}mapFromDriverValue=e=>new Date(this.withTimezone?e:e+"+0000");mapToDriverValue=e=>e.toISOString()},Cp=class extends Mt{static[m]="PgTimestampStringBuilder";constructor(e,n,r){super(e,"string","PgTimestampString"),this.config.withTimezone=n,this.config.precision=r}build(e){return new ga(e,this.config)}},ga=class extends E{static[m]="PgTimestampString";withTimezone;precision;constructor(e,n){super(e,n),this.withTimezone=n.withTimezone,this.precision=n.precision}getSQLType(){return`timestamp${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}};function Ue(t,e={}){let{name:n,config:r}=V(t,e);return r?.mode==="string"?new Cp(n,r.withTimezone??!1,r.precision):new _p(n,r?.withTimezone??!1,r?.precision)}var Ep=class extends N{static[m]="PgUUIDBuilder";constructor(e){super(e,"string","PgUUID")}defaultRandom(){return this.default(h`gen_random_uuid()`)}build(e){return new ya(e,this.config)}},ya=class extends E{static[m]="PgUUID";getSQLType(){return"uuid"}};function T0(t){return new Ep(t??"")}var kp=class extends N{static[m]="PgVarcharBuilder";constructor(e,n){super(e,"string","PgVarchar"),this.config.length=n.length,this.config.enumValues=n.enum}build(e){return new Tp(e,this.config)}},Tp=class extends E{static[m]="PgVarchar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return this.length===void 0?"varchar":`varchar(${this.length})`}};function ue(t,e={}){let{name:n,config:r}=V(t,e);return new kp(n,r)}var Ap=class extends N{static[m]="PgBinaryVectorBuilder";constructor(e,n){super(e,"string","PgBinaryVector"),this.config.dimensions=n.dimensions}build(e){return new Pp(e,this.config)}},Pp=class extends E{static[m]="PgBinaryVector";dimensions=this.config.dimensions;getSQLType(){return`bit(${this.dimensions})`}};function A0(t,e){let{name:n,config:r}=V(t,e);return new Ap(n,r)}var Ip=class extends N{static[m]="PgHalfVectorBuilder";constructor(e,n){super(e,"array","PgHalfVector"),this.config.dimensions=n.dimensions}build(e){return new Np(e,this.config)}},Np=class extends E{static[m]="PgHalfVector";dimensions=this.config.dimensions;getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){return e.slice(1,-1).split(",").map(n=>Number.parseFloat(n))}};function P0(t,e){let{name:n,config:r}=V(t,e);return new Ip(n,r)}var Op=class extends N{static[m]="PgSparseVectorBuilder";constructor(e,n){super(e,"string","PgSparseVector"),this.config.dimensions=n.dimensions}build(e){return new jp(e,this.config)}},jp=class extends E{static[m]="PgSparseVector";dimensions=this.config.dimensions;getSQLType(){return`sparsevec(${this.dimensions})`}};function I0(t,e){let{name:n,config:r}=V(t,e);return new Op(n,r)}var qp=class extends N{static[m]="PgVectorBuilder";constructor(e,n){super(e,"array","PgVector"),this.config.dimensions=n.dimensions}build(e){return new Dp(e,this.config)}},Dp=class extends E{static[m]="PgVector";dimensions=this.config.dimensions;getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){return e.slice(1,-1).split(",").map(n=>Number.parseFloat(n))}};function N0(t,e){let{name:n,config:r}=V(t,e);return new qp(n,r)}function O0(){return{bigint:s0,bigserial:o0,boolean:Fr,char:c0,cidr:l0,customType:u0,date:p0,doublePrecision:d0,inet:f0,integer:mt,interval:m0,json:h0,jsonb:Bn,line:v0,macaddr:g0,macaddr8:y0,numeric:x0,point:b0,geometry:S0,real:ma,serial:_0,smallint:C0,smallserial:E0,text:A,time:k0,timestamp:Ue,uuid:T0,varchar:ue,bit:A0,halfvec:P0,sparsevec:I0,vector:N0}}var Rp=Symbol.for("drizzle:PgInlineForeignKeys"),j0=Symbol.for("drizzle:EnableRLS"),Ie=class extends T{static[m]="PgTable";static Symbol=Object.assign({},T.Symbol,{InlineForeignKeys:Rp,EnableRLS:j0});[Rp]=[];[j0]=!1;[T.Symbol.ExtraConfigBuilder]=void 0};function DA(t,e,n,r,i=t){let a=new Ie(t,r,i),s=typeof e=="function"?e(O0()):e,o=Object.fromEntries(Object.entries(s).map(([u,p])=>{let d=p;d.setName(u);let f=d.build(a);return a[Rp].push(...d.buildForeignKeys(f,a)),[u,f]})),l=Object.fromEntries(Object.entries(s).map(([u,p])=>{let d=p;d.setName(u);let f=d.buildExtraConfigColumn(a);return[u,f]})),c=Object.assign(a,o);return c[T.Symbol.Columns]=o,c[T.Symbol.ExtraConfigColumns]=l,n&&(c[Ie.Symbol.ExtraConfigBuilder]=n),Object.assign(c,{enableRLS:()=>(c[Ie.Symbol.EnableRLS]=!0,c)})}var Et=(t,e,n)=>DA(t,e,n,void 0);var ao=class{static[m]="PgPrimaryKeyBuilder";columns;name;constructor(e,n){this.columns=e,this.name=n}build(e){return new Mp(e,this.columns,this.name)}},Mp=class{constructor(e,n,r){this.table=e,this.columns=n,this.name=r}static[m]="PgPrimaryKey";columns;name;getName(){return this.name??`${this.table[Ie.Symbol.Name]}_${this.columns.map(e=>e.name).join("_")}_pk`}};var so=class{constructor(e,n,r){this.sourceTable=e,this.referencedTable=n,this.relationName=r,this.referencedTableName=n[T.Symbol.Name]}static[m]="Relation";referencedTableName;fieldName},Bp=class{constructor(e,n){this.table=e,this.config=n}static[m]="Relations"},un=class t extends so{constructor(e,n,r,i){super(e,n,r?.relationName),this.config=r,this.isNullable=i}static[m]="One";withFieldName(e){let n=new t(this.sourceTable,this.referencedTable,this.config,this.isNullable);return n.fieldName=e,n}},xa=class t extends so{constructor(e,n,r){super(e,n,r?.relationName),this.config=r}static[m]="Many";withFieldName(e){let n=new t(tnpm warn config production Use `--omit=dev` instead.
  routine: 'parserOpenTable'
}
> rest-express@1.0.0 seed
  schema: undefined,
  constraint: undefined,
  detail: undefined,
> NODE_ENV=production node dist/seed.cjs
  table: undefined,
  file: 'parse_relation.c',
  hint: undefined,
  column: undefined,
Seeding database with realistic healthcare data...
  position: '55',
  line: '1449',
  dataType: undefined,
error: relation "users" does not exist
  internalPosition: undefined,
    at /app/dist/seed.cjs:2:13326
  internalQuery: undefined,
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async /app/dist/seed.cjs:8:31375
  where: undefined,
    at async Rp (/app/dist/seed.cjs:8:114026) {
  length: 104,
  severity: 'ERROR',
  code: '42P01',
npm warn config production Use `--omit=dev` instead.
> rest-express@1.0.0 start
> NODE_ENV=production node dist/index.cjs
11:35:33 PM [express] serving on port 8080
/app/dist/index.cjs:64
  schema: undefined,
  table: undefined,
  column: undefined,
`);Ra.write(ww.format.apply(ww,e))}}Object.defineProperty(Yt.exports,"isWin",{get:function(){return Bo},set:function(t){Bo=t}});Yt.exports.warnTo=function(t){var e=Ra;return Ra=t,e};Yt.exports.getFileName=function(t){var e=t||process.env,n=e.PGPASSFILE||(Bo?bw.join(e.APPDATA||"./","postgresql","pgpass.conf"):bw.join(e.HOME||"./",".pgpass"));return n};Yt.exports.usePgPass=function(t,e){return Object.prototype.hasOwnProperty.call(process.env,"PGPASSWORD")?!1:Bo?!0:(e=e||"<unkn>",Z9(t.mode)?t.mode&(V9|G9)?(Ud('WARNING: password file "%s" has group or world access; permissions should be u=rw (0600) or less',e),!1):!0:(Ud('WARNING: password file "%s" is not a plain file',e),!1))};var X9=Yt.exports.match=function(t,e){return oi.slice(0,-1).reduce(function(n,r,i){return i==1&&Number(t[r]||H9)===Number(e[r])?n&&!0:n&&(e[r]==="*"||e[r]===t[r])},!0)};Yt.exports.getPassword=function(t,e,n){var r,i=e.pipe(Q9());function a(l){var c=Y9(l);c&&eI(c)&&X9(t,c)&&(r=c[J9],i.end())}var s=function(){e.destroy(),n(r)},o=function(l){e.destroy(),Ud("WARNING: error on reading file: %s",l),n(void 0)};e.on("error",o),i.on("data",a).on("end",s).on("error",o)};var Y9=Yt.exports.parseLine=function(t){if(t.length<11||t.match(/^\s+#/))return null;for(var e="",n="",r=0,i=0,a=0,s={},o=!1,l=function(u,p,d){var f=t.substring(p,d);Object.hasOwnProperty.call(process.env,"PGPASS_NO_DEESCAPE")||(f=f.replace(/\\([:\\])/g,"$1")),s[oi[u]]=f},c=0;c<t.length-1;c+=1){if(e=t.charAt(c+1),n=t.charAt(c),o=r==zd-1,o){l(r,i);break}c>=0&&e==":"&&n!=="\\"&&(l(r,i,c+1),i=c+2,r+=1)}return s=Object.keys(s).length===zd?s:null,s},eI=Yt.exports.isValidEntry=function(t){for(var e={0:function(s){return s.length>0},1:function(s){return s==="*"?!0:(s=Number(s),isFinite(s)&&s>0&&s<9007199254740992&&Math.floor(s)===s)},2:function(s){return s.length>0},3:function(s){return s.length>0},4:function(s){return s.length>0}},n=0;n<oi.length;n+=1){var r=e[n],i=t[oi[n]]||"",a=r(i);if(!a)return!1}return!0}});var Cw=g((d7,Qd)=>{"use strict";var p7=require("path"),_w=require("fs"),Lo=Sw();Qd.exports=function(t,e){var n=Lo.getFileName();_w.stat(n,function(r,i){if(r||!Lo.usePgPass(i,n))return e(void 0);var a=_w.createReadStream(n);Lo.getPassword(t,a,e)})};Qd.exports.warnTo=Lo.warnTo});var Aw=g((f7,Tw)=>{"use strict";var tI=require("events").EventEmitter,Ew=ni(),Hd=H1(),nI=No(),rI=fd(),kw=iw(),iI=qa(),aI=$d(),sI=ud(),Fo=class extends tI{constructor(e){super(),this.connectionParameters=new rI(e),this.user=this.connectionParameters.user,this.database=this.connectionParameters.database,this.port=this.connectionParameters.port,this.host=this.connectionParameters.host,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:this.connectionParameters.password}),this.replication=this.connectionParameters.replication;let n=e||{};this._Promise=n.Promise||global.Promise,this._types=new nI(n.types),this._ending=!1,this._ended=!1,this._connecting=!1,this._connected=!1,this._connectionError=!1,this._queryable=!0,this.enableChannelBinding=!!n.enableChannelBinding,this.connection=n.connection||new aI({stream:n.stream,ssl:this.connectionParameters.ssl,keepAlive:n.keepAlive||!1,keepAliveInitialDelayMillis:n.keepAliveInitialDelayMillis||0,encoding:this.connectionParameters.client_encoding||"utf8"}),this.queryQueue=[],this.binary=n.binary||iI.binary,this.processID=null,this.secretKey=null,this.ssl=this.connectionParameters.ssl||!1,this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this._connectionTimeoutMillis=n.connectionTimeoutMillis||0}_errorAllQueries(e){let n=r=>{process.nextTick(()=>{r.handleError(e,this.connection)})};this.activeQuery&&(n(this.activeQuery),this.activeQuery=null),this.queryQueue.forEach(n),this.queryQueue.length=0}_connect(e){let n=this,r=this.connection;if(this._connectionCallback=e,this._connecting||this._connected){let i=new Error("Client has already been connected. You cannot reuse a client.");process.nextTick(()=>{e(i)});return}this._connecting=!0,this._connectionTimeoutMillis>0&&(this.connectionTimeoutHandle=setTimeout(()=>{r._ending=!0,r.stream.destroy(new Error("timeout expired"))},this._connectionTimeoutMillis),this.connectionTimeoutHandle.unref&&this.connectionTimeoutHandle.unref()),this.host&&this.host.indexOf("/")===0?r.connect(this.host+"/.s.PGSQL."+this.port):r.connect(this.port,this.host),r.on("connect",function(){n.ssl?r.requestSsl():r.startup(n.getStartupConf())}),r.on("sslconnect",function(){r.startup(n.getStartupConf())}),this._attachListeners(r),r.once("end",()=>{let i=this._ending?new Error("Connection terminated"):new Error("Connection terminated unexpectedly");clearTimeout(this.connectionTimeoutHandle),this._errorAllQueries(i),this._ended=!0,this._ending||(this._connecting&&!this._connectionError?this._connectionCallback?this._connectionCallback(i):this._handleErrorEvent(i):this._connectionError||this._handleErrorEvent(i)),process.nextTick(()=>{this.emit("end")})})}connect(e){if(e){this._connect(e);return}return new this._Promise((n,r)=>{this._connect(i=>{i?r(i):n()})})}_attachListeners(e){e.on("authenticationCleartextPassword",this._handleAuthCleartextPassword.bind(this)),e.on("authenticationMD5Password",this._handleAuthMD5Password.bind(this)),e.on("authenticationSASL",this._handleAuthSASL.bind(this)),e.on("authenticationSASLContinue",this._handleAuthSASLContinue.bind(this)),e.on("authenticationSASLFinal",this._handleAuthSASLFinal.bind(this)),e.on("backendKeyData",this._handleBackendKeyData.bind(this)),e.on("error",this._handleErrorEvent.bind(this)),e.on("errorMessage",this._handleErrorMessage.bind(this)),e.on("readyForQuery",this._handleReadyForQuery.bind(this)),e.on("notice",this._handleNotice.bind(this)),e.on("rowDescription",this._handleRowDescription.bind(this)),e.on("dataRow",this._handleDataRow.bind(this)),e.on("portalSuspended",this._handlePortalSuspended.bind(this)),e.on("emptyQuery",this._handleEmptyQuery.bind(this)),e.on("commandComplete",this._handleCommandComplete.bind(this)),e.on("parseComplete",this._handleParseComplete.bind(this)),e.on("copyInResponse",this._handleCopyInResponse.bind(this)),e.on("copyData",this._handleCopyData.bind(this)),e.on("notification",this._handleNotification.bind(this))}_checkPgPass(e){let n=this.connection;if(typeof this.password=="function")this._Promise.resolve().then(()=>this.password()).then(r=>{if(r!==void 0){if(typeof r!="string"){n.emit("error",new TypeError("Password must be a string"));return}this.connectionParameters.password=this.password=r}else this.connectionParameters.password=this.password=null;e()}).catch(r=>{n.emit("error",r)});else if(this.password!==null)e();else try{Cw()(this.connectionParameters,i=>{i!==void 0&&(this.connectionParameters.password=this.password=i),e()})}catch(r){this.emit("error",r)}}_handleAuthCleartextPassword(e){this._checkPgPass(()=>{this.connection.password(this.password)})}_handleAuthMD5Password(e){this._checkPgPass(async()=>{try{let n=await sI.postgresMd5PasswordHash(this.user,this.password,e.salt);this.connection.password(n)}catch(n){this.emit("error",n)}})}_handleAuthSASL(e){this._checkPgPass(()=>{try{this.saslSession=Hd.startSession(e.mechanisms,this.enableChannelBinding&&this.connection.stream),this.connection.sendSASLInitialResponseMessage(this.saslSession.mechanism,this.saslSession.response)}catch(n){this.connection.emit("error",n)}})}async _handleAuthSASLContinue(e){try{await Hd.continueSession(this.saslSession,this.password,e.data,this.enableChannelBinding&&this.connection.stream),this.connection.sendSCRAMClientFinalMessage(this.saslSession.response)}catch(n){this.connection.emit("error",n)}}_handleAuthSASLFinal(e){try{Hd.finalizeSession(this.saslSession,e.data),this.saslSession=null}catch(n){this.connection.emit("error",n)}}_handleBackendKeyData(e){this.processID=e.processID,this.secretKey=e.secretKey}_handleReadyForQuery(e){this._connecting&&(this._connecting=!1,this._connected=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback&&(this._connectionCallback(null,this),this._connectionCallback=null),this.emit("connect"));let{activeQuery:n}=this;this.activeQuery=null,this.readyForQuery=!0,n&&n.handleReadyForQuery(this.connection),this._pulseQueryQueue()}_handleErrorWhileConnecting(e){if(!this._connectionError){if(this._connectionError=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback)return this._connectionCallback(e);this.emit("error",e)}}_handleErrorEvent(e){if(this._connecting)return this._handleErrorWhileConnecting(e);this._queryable=!1,this._errorAllQueries(e),this.emit("error",e)}_handleErrorMessage(e){if(this._connecting)return this._handleErrorWhileConnecting(e);let n=this.activeQuery;if(!n){this._handleErrorEvent(e);return}this.activeQuery=null,n.handleError(e,this.connection)}_handleRowDescription(e){this.activeQuery.handleRowDescription(e)}_handleDataRow(e){this.activeQuery.handleDataRow(e)}_handlePortalSuspended(e){this.activeQuery.handlePortalSuspended(this.connection)}_handleEmptyQuery(e){this.activeQuery.handleEmptyQuery(this.connection)}_handleCommandComplete(e){if(this.activeQuery==null){let n=new Error("Received unexpected commandComplete message from backend.");this._handleErrorEvent(n);return}this.activeQuery.handleCommandComplete(e,this.connection)}_handleParseComplete(){if(this.activeQuery==null){let e=new Error("Received unexpected parseComplete message from backend.");this._handleErrorEvent(e);return}this.activeQuery.name&&(this.connection.parsedStatements[this.activeQuery.name]=this.activeQuery.text)}_handleCopyInResponse(e){this.activeQuery.handleCopyInResponse(this.connection)}_handleCopyData(e){this.activeQuery.handleCopyData(e,this.connection)}_handleNotification(e){this.emit("notification",e)}_handleNotice(e){this.emit("notice",e)}getStartupConf(){let e=this.connectionParameters,n={user:e.user,database:e.database},r=e.application_name||e.fallback_application_name;return r&&(n.application_name=r),e.replication&&(n.replication=""+e.replication),e.statement_timeout&&(n.statement_timeout=String(parseInt(e.statement_timeout,10))),e.lock_timeout&&(n.lock_timeout=String(parseInt(e.lock_timeout,10))),e.idle_in_transaction_session_timeout&&(n.idle_in_transaction_session_timeout=String(parseInt(e.idle_in_transaction_session_timeout,10))),e.options&&(n.options=e.options),n}cancel(e,n){if(e.activeQuery===n){let r=this.connection;this.host&&this.host.indexOf("/")===0?r.connect(this.host+"/.s.PGSQL."+this.port):r.connect(this.port,this.host),r.on("connect",function(){r.cancel(e.processID,e.secretKey)})}else e.queryQueue.indexOf(n)!==-1&&e.queryQueue.splice(e.queryQueue.indexOf(n),1)}setTypeParser(e,n,r){return this._types.setTypeParser(e,n,r)}getTypeParser(e,n){return this._types.getTypeParser(e,n)}escapeIdentifier(e){return Ew.escapeIdentifier(e)}escapeLiteral(e){return Ew.escapeLiteral(e)}_pulseQueryQueue(){if(this.readyForQuery===!0)if(this.activeQuery=this.queryQueue.shift(),this.activeQuery){this.readyForQuery=!1,this.hasExecuted=!0;let e=this.activeQuery.submit(this.connection);e&&process.nextTick(()=>{this.activeQuery.handleError(e,this.connection),this.readyForQuery=!0,this._pulseQueryQueue()})}else this.hasExecuted&&(this.activeQuery=null,this.emit("drain"))}query(e,n,r){let i,a,s,o,l;if(e==null)throw new TypeError("Client was passed a null or undefined query");return typeof e.submit=="function"?(s=e.query_timeout||this.connectionParameters.query_timeout,a=i=e,typeof n=="function"&&(i.callback=i.callback||n)):(s=e.query_timeout||this.connectionParameters.query_timeout,i=new kw(e,n,r),i.callback||(a=new this._Promise((c,u)=>{i.callback=(p,d)=>p?u(p):c(d)}).catch(c=>{throw Error.captureStackTrace(c),c}))),s&&(l=i.callback,o=setTimeout(()=>{let c=new Error("Query read timeout");process.nextTick(()=>{i.handleError(c,this.connection)}),l(c),i.callback=()=>{};let u=this.queryQueue.indexOf(i);u>-1&&this.queryQueue.splice(u,1),this._pulseQueryQueue()},s),i.callback=(c,u)=>{clearTimeout(o),l(c,u)}),this.binary&&!i.binary&&(i.binary=!0),i._result&&!i._result._types&&(i._result._types=this._types),this._queryable?this._ending?(process.nextTick(()=>{i.handleError(new Error("Client was closed and is not queryable"),this.connection)}),a):(this.queryQueue.push(i),this._pulseQueryQueue(),a):(process.nextTick(()=>{i.handleError(new Error("Client has encountered a connection error and is not queryable"),this.connection)}),a)}ref(){this.connection.ref()}unref(){this.connection.unref()}end(e){if(this._ending=!0,!this.connection._connecting||this._ended)if(e)e();else return this._Promise.resolve();if(this.activeQuery||!this._queryable?this.connection.stream.destroy():this.connection.end(),e)this.connection.once("end",e);else return new this._Promise(n=>{this.connection.once("end",n)})}};Fo.Query=kw;Tw.exports=Fo});var Ow=g((m7,Nw)=>{"use strict";var oI=require("events").EventEmitter,Pw=function(){},Iw=(t,e)=>{let n=t.findIndex(e);return n===-1?void 0:t.splice(n,1)[0]},Vd=class{constructor(e,n,r){this.client=e,this.idleListener=n,this.timeoutId=r}},ci=class{constructor(e){this.callback=e}};function cI(){throw new Error("Release called on client which has already been released to the pool.")}function $o(t,e){if(e)return{callback:e,result:void 0};let n,r,i=function(s,o){s?n(s):r(o)},a=new t(function(s,o){r=s,n=o}).catch(s=>{throw Error.captureStackTrace(s),s});return{callback:i,result:a}}function lI(t,e){return function n(r){r.client=e,e.removeListener("error",n),e.on("error",()=>{t.log("additional client error after disconnection due to error",r)}),t._remove(e),t.emit("error",r,e)}}var Gd=class extends oI{constructor(e,n){super(),this.options=Object.assign({},e),e!=null&&"password"in e&&Object.defineProperty(this.options,"password",{configurable:!0,enumerable:!1,writable:!0,value:e.password}),e!=null&&e.ssl&&e.ssl.key&&Object.defineProperty(this.options.ssl,"key",{enumerable:!1}),this.options.max=this.options.max||this.options.poolSize||10,this.options.min=this.options.min||0,this.options.maxUses=this.options.maxUses||1/0,this.options.allowExitOnIdle=this.options.allowExitOnIdle||!1,this.options.maxLifetimeSeconds=this.options.maxLifetimeSeconds||0,this.log=this.options.log||function(){},this.Client=this.options.Client||n||Kd().Client,this.Promise=this.options.Promise||global.Promise,typeof this.options.idleTimeoutMillis>"u"&&(this.options.idleTimeoutMillis=1e4),this._clients=[],this._idle=[],this._expired=new WeakSet,this._pendingQueue=[],this._endCallback=void 0,this.ending=!1,this.ended=!1}_isFull(){return this._clients.length>=this.options.max}_isAboveMin(){return this._clients.length>this.options.min}_pulseQueue(){if(this.log("pulse queue"),this.ended){this.log("pulse queue ended");return}if(this.ending){this.log("pulse queue on ending"),this._idle.length&&this._idle.slice().map(n=>{this._remove(n.client)}),this._clients.length||(this.ended=!0,this._endCallback());return}if(!this._pendingQueue.length){this.log("no queued requests");return}if(!this._idle.length&&this._isFull())return;let e=this._pendingQueue.shift();if(this._idle.length){let n=this._idle.pop();clearTimeout(n.timeoutId);let r=n.client;r.ref&&r.ref();let i=n.idleListener;return this._acquireClient(r,e,i,!1)}if(!this._isFull())return this.newClient(e);throw new Error("unexpected condition")}_remove(e,n){let r=Iw(this._idle,a=>a.client===e);r!==void 0&&clearTimeout(r.timeoutId),this._clients=this._clients.filter(a=>a!==e);let i=this;e.end(()=>{i.emit("remove",e),typeof n=="function"&&n()})}connect(e){if(this.ending){let i=new Error("Cannot use a pool after calling end on the pool");return e?e(i):this.Promise.reject(i)}let n=$o(this.Promise,e),r=n.result;if(this._isFull()||this._idle.length){if(this._idle.length&&process.nextTick(()=>this._pulseQueue()),!this.options.connectionTimeoutMillis)return this._pendingQueue.push(new ci(n.callback)),r;let i=(o,l,c)=>{clearTimeout(s),n.callback(o,l,c)},a=new ci(i),s=setTimeout(()=>{Iw(this._pendingQueue,o=>o.callback===i),a.timedOut=!0,n.callback(new Error("timeout exceeded when trying to connect"))},this.options.connectionTimeoutMillis);return s.unref&&s.unref(),this._pendingQueue.push(a),r}return this.newClient(new ci(n.callback)),r}newClient(e){let n=new this.Client(this.options);this._clients.push(n);let r=lI(this,n);this.log("checking client timeout");let i,a=!1;this.options.connectionTimeoutMillis&&(i=setTimeout(()=>{this.log("ending client due to timeout"),a=!0,n.connection?n.connection.stream.destroy():n.end()},this.options.connectionTimeoutMillis)),this.log("connecting new client"),n.connect(s=>{if(i&&clearTimeout(i),n.on("error",r),s)this.log("client failed to connect",s),this._clients=this._clients.filter(o=>o!==n),a&&(s=new Error("Connection terminated due to connection timeout",{cause:s})),this._pulseQueue(),e.timedOut||e.callback(s,void 0,Pw);else{if(this.log("new client connected"),this.options.maxLifetimeSeconds!==0){let o=setTimeout(()=>{this.log("ending client due to expired lifetime"),this._expired.add(n),this._idle.findIndex(c=>c.client===n)!==-1&&this._acquireClient(n,new ci((c,u,p)=>p()),r,!1)},this.options.maxLifetimeSeconds*1e3);o.unref(),n.once("end",()=>clearTimeout(o))}return this._acquireClient(n,e,r,!0)}})}_acquireClient(e,n,r,i){i&&this.emit("connect",e),this.emit("acquire",e),e.release=this._releaseOnce(e,r),e.removeListener("error",r),n.timedOut?i&&this.options.verify?this.options.verify(e,e.release):e.release():i&&this.options.verify?this.options.verify(e,a=>{if(a)return e.release(a),n.callback(a,void 0,Pw);n.callback(void 0,e,e.release)}):n.callback(void 0,e,e.release)}_releaseOnce(e,n){let r=!1;return i=>{r&&cI(),r=!0,this._release(e,n,i)}}_release(e,n,r){if(e.on("error",n),e._poolUseCount=(e._poolUseCount||0)+1,this.emit("release",r,e),r||this.ending||!e._queryable||e._ending||e._poolUseCount>=this.options.maxUses)return e._poolUseCount>=this.options.maxUses&&this.log("remove expended client"),this._remove(e,this._pulseQueue.bind(this));if(this._expired.has(e))return this.log("remove expired client"),this._expired.delete(e),this._remove(e,this._pulseQueue.bind(this));let a;this.options.idleTimeoutMillis&&this._isAboveMin()&&(a=setTimeout(()=>{this.log("remove idle client"),this._remove(e,this._pulseQueue.bind(this))},this.options.idleTimeoutMillis),this.options.allowExitOnIdle&&a.unref()),this.options.allowExitOnIdle&&e.unref(),this._idle.push(new Vd(e,n,a)),this._pulseQueue()}query(e,n,r){if(typeof e=="function"){let a=$o(this.Promise,e);return setImmediate(function(){return a.callback(new Error("Passing a function as the first parameter to pool.query is not supported"))}),a.result}typeof n=="function"&&(r=n,n=void 0);let i=$o(this.Promise,r);return r=i.callback,this.connect((a,s)=>{if(a)return r(a);let o=!1,l=c=>{o||(o=!0,s.release(c),r(c))};s.once("error",l),this.log("dispatching query");try{s.query(e,n,(c,u)=>{if(this.log("query dispatched"),s.removeListener("error",l),!o)return o=!0,s.release(c),c?r(c):r(void 0,u)})}catch(c){return s.release(c),r(c)}}),i.result}end(e){if(this.log("ending"),this.ending){let r=new Error("Called end on pool more than once");return e?e(r):this.Promise.reject(r)}this.ending=!0;let n=$o(this.Promise,e);return this._endCallback=n.callback,this._pulseQueue(),n.result}get waitingCount(){return this._pendingQueue.length}get idleCount(){return this._idle.length}get expiredCount(){return this._clients.reduce((e,n)=>e+(this._expired.has(n)?1:0),0)}get totalCount(){return this._clients.length}};Nw.exports=Gd});var Dw=g((h7,qw)=>{"use strict";var jw=require("events").EventEmitter,uI=require("util"),Wd=ni(),li=qw.exports=function(t,e,n){jw.call(this),t=Wd.normalizeQueryConfig(t,e,n),this.text=t.text,this.values=t.values,this.name=t.name,this.queryMode=t.queryMode,this.callback=t.callback,this.state="new",this._arrayMode=t.rowMode==="array",this._emitRowEvents=!1,this.on("newListener",function(r){r==="row"&&(this._emitRowEvents=!0)}.bind(this))};uI.inherits(li,jw);var pI={sqlState:"code",statementPosition:"position",messagePrimary:"message",context:"where",schemaName:"schema",tableName:"table",columnName:"column",dataTypeName:"dataType",constraintName:"constraint",sourceFile:"file",sourceLine:"line",sourceFunction:"routine"};li.prototype.handleError=function(t){let e=this.native.pq.resultErrorFields();if(e)for(let n in e){let r=pI[n]||n;t[r]=e[n]}this.callback?this.callback(t):this.emit("error",t),this.state="error"};li.prototype.then=function(t,e){return this._getPromise().then(t,e)};li.prototype.catch=function(t){return this._getPromise().catch(t)};li.prototype._getPromise=function(){return this._promise?this._promise:(this._promise=new Promise(function(t,e){this._once("end",t),this._once("error",e)}.bind(this)),this._promise)};li.prototype.submit=function(t){this.state="running";let e=this;this.native=t.native,t.native.arrayMode=this._arrayMode;let n=function(r,i,a){if(t.native.arrayMode=!1,setImmediate(function(){e.emit("_done")}),r)return e.handleError(r);e._emitRowEvents&&(a.length>1?i.forEach((s,o)=>{s.forEach(l=>{e.emit("row",l,a[o])})}):i.forEach(function(s){e.emit("row",s,a)})),e.state="end",e.emit("end",a),e.callback&&e.callback(null,a)};if(process.domain&&(n=process.domain.bind(n)),this.name){this.name.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",this.name,this.name.length),console.error("This can cause conflicts and silent errors executing queries"));let r=(this.values||[]).map(Wd.prepareValue);if(t.namedQueries[this.name]){if(this.text&&t.namedQueries[this.name]!==this.text){let i=new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`);return n(i)}return t.native.execute(this.name,r,n)}return t.native.prepare(this.name,this.text,r.length,function(i){return i?n(i):(t.namedQueries[e.name]=e.text,e.native.execute(e.name,r,n))})}else if(this.values){if(!Array.isArray(this.values)){let i=new Error("Query values must be an array");return n(i)}let r=this.values.map(Wd.prepareValue);t.native.query(this.text,r,n)}else this.queryMode==="extended"?t.native.query(this.text,[],n):t.native.query(this.text,n)}});var Fw=g((v7,Lw)=>{"use strict";var Rw;try{Rw=require("pg-native")}catch(t){throw t}var dI=No(),Mw=require("events").EventEmitter,fI=require("util"),mI=fd(),Bw=Dw(),rt=Lw.exports=function(t){Mw.call(this),t=t||{},this._Promise=t.Promise||global.Promise,this._types=new dI(t.types),this.native=new Rw({types:this._types}),this._queryQueue=[],this._ending=!1,this._connecting=!1,this._connected=!1,this._queryable=!0;let e=this.connectionParameters=new mI(t);t.nativeConnectionString&&(e.nativeConnectionString=t.nativeConnectionString),this.user=e.user,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:e.password}),this.database=e.database,this.host=e.host,this.port=e.port,this.namedQueries={}};rt.Query=Bw;fI.inherits(rt,Mw);rt.prototype._errorAllQueries=function(t){let e=n=>{process.nextTick(()=>{n.native=this.native,n.handleError(t)})};this._hasActiveQuery()&&(e(this._activeQuery),this._activeQuery=null),this._queryQueue.forEach(e),this._queryQueue.length=0};rt.prototype._connect=function(t){let e=this;if(this._connecting){process.nextTick(()=>t(new Error("Client has already been connected. You cannot reuse a client.")));return}this._connecting=!0,this.connectionParameters.getLibpqConnectionString(function(n,r){if(e.connectionParameters.nativeConnectionString&&(r=e.connectionParameters.nativeConnectionString),n)return t(n);e.native.connect(r,function(i){if(i)return e.native.end(),t(i);e._connected=!0,e.native.on("error",function(a){e._queryable=!1,e._errorAllQueries(a),e.emit("error",a)}),e.native.on("notification",function(a){e.emit("notification",{channel:a.relname,payload:a.extra})}),e.emit("connect"),e._pulseQueryQueue(!0),t()})})};rt.prototype.connect=function(t){if(t){this._connect(t);return}return new this._Promise((e,n)=>{this._connect(r=>{r?n(r):e()})})};rt.prototype.query=function(t,e,n){let r,i,a,s,o;if(t==null)throw new TypeError("Client was passed a null or undefined query");if(typeof t.submit=="function")a=t.query_timeout||this.connectionParameters.query_timeout,i=r=t,typeof e=="function"&&(t.callback=e);else if(a=t.query_timeout||this.connectionParameters.query_timeout,r=new Bw(t,e,n),!r.callback){let l,c;i=new this._Promise((u,p)=>{l=u,c=p}).catch(u=>{throw Error.captureStackTrace(u),u}),r.callback=(u,p)=>u?c(u):l(p)}return a&&(o=r.callback,s=setTimeout(()=>{let l=new Error("Query read timeout");process.nextTick(()=>{r.handleError(l,this.connection)}),o(l),r.callback=()=>{};let c=this._queryQueue.indexOf(r);c>-1&&this._queryQueue.splice(c,1),this._pulseQueryQueue()},a),r.callback=(l,c)=>{clearTimeout(s),o(l,c)}),this._queryable?this._ending?(r.native=this.native,process.nextTick(()=>{r.handleError(new Error("Client was closed and is not queryable"))}),i):(this._queryQueue.push(r),this._pulseQueryQueue(),i):(r.native=this.native,process.nextTick(()=>{r.handleError(new Error("Client has encountered a connection error and is not queryable"))}),i)};rt.prototype.end=function(t){let e=this;this._ending=!0,this._connected||this.once("connect",this.end.bind(this,t));let n;return t||(n=new this._Promise(function(r,i){t=a=>a?i(a):r()})),this.native.end(function(){e._errorAllQueries(new Error("Connection terminated")),process.nextTick(()=>{e.emit("end"),t&&t()})}),n};rt.prototype._hasActiveQuery=function(){return this._activeQuery&&this._activeQuery.state!=="error"&&this._activeQuery.state!=="end"};rt.prototype._pulseQueryQueue=function(t){if(!this._connected||this._hasActiveQuery())return;let e=this._queryQueue.shift();if(!e){t||this.emit("drain");return}this._activeQuery=e,e.submit(this);let n=this;e.once("_done",function(){n._pulseQueryQueue()})};rt.prototype.cancel=function(t){this._activeQuery===t?this.native.cancel(function(){}):this._queryQueue.indexOf(t)!==-1&&this._queryQueue.splice(this._queryQueue.indexOf(t),1)};rt.prototype.ref=function(){};rt.prototype.unref=function(){};rt.prototype.setTypeParser=function(t,e,n){return this._types.setTypeParser(t,e,n)};rt.prototype.getTypeParser=function(t,e){return this._types.getTypeParser(t,e)}});var Zd=g((g7,$w)=>{"use strict";$w.exports=Fw()});var Kd=g((x7,Ma)=>{"use strict";var hI=Aw(),vI=qa(),gI=$d(),yI=hd(),xI=ni(),bI=Ow(),wI=No(),{DatabaseError:SI}=Bd(),{escapeIdentifier:_I,escapeLiteral:CI}=ni(),EI=t=>class extends bI{constructor(n){super(n,t)}},Jd=function(t){this.defaults=vI,this.Client=t,this.Query=this.Client.Query,this.Pool=EI(this.Client),this._pools=[],this.Connection=gI,this.types=ja(),this.DatabaseError=SI,this.TypeOverrides=wI,this.escapeIdentifier=_I,this.escapeLiteral=CI,this.Result=yI,this.utils=xI};typeof process.env.NODE_PG_FORCE_NATIVE<"u"?Ma.exports=new Jd(Zd()):(Ma.exports=new Jd(hI),Object.defineProperty(Ma.exports,"native",{configurable:!0,enumerable:!1,get(){let t=null;try{t=new Jd(Zd())}catch(e){if(e.code!=="MODULE_NOT_FOUND")throw e}return Object.defineProperty(Ma.exports,"native",{value:t}),t}}))});var II={};cf(II,{log:()=>sf});module.exports=eS(II);var Qo=pi(tu(),1);var Kp={};cf(Kp,{calls:()=>ct,claimEvents:()=>tr,claims:()=>zt,denials:()=>vn,encounters:()=>Yr,insertCallSchema:()=>v5,insertClaimEventSchema:()=>m5,insertClaimSchema:()=>f5,insertDenialSchema:()=>h5,insertEncounterSchema:()=>d5,insertLeadSchema:()=>Vp,insertPatientSchema:()=>p5,insertPriorAuthSchema:()=>g5,insertRuleSchema:()=>Gp,insertUserSchema:()=>u5,leads:()=>Ft,patients:()=>$t,priorAuthorizations:()=>tt,rules:()=>gt,users:()=>hn});var m=Symbol.for("drizzle:entityKind"),GO=Symbol.for("drizzle:hasOwnEntityKind");function w(t,e){if(!t||typeof t!="object")return!1;if(t instanceof e)return!0;if(!Object.prototype.hasOwnProperty.call(e,m))throw new Error(`Class "${e.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let n=Object.getPrototypeOf(t).constructor;if(n)for(;n;){if(m in n&&n[m]===e[m])return!0;n=Object.getPrototypeOf(n)}return!1}var W=class{constructor(e,n){this.table=e,this.config=n,this.name=n.name,this.keyAsName=n.keyAsName,this.notNull=n.notNull,this.default=n.default,this.defaultFn=n.defaultFn,this.onUpdateFn=n.onUpdateFn,this.hasDefault=n.hasDefault,this.primary=n.primaryKey,this.isUnique=n.isUnique,this.uniqueName=n.uniqueName,this.uniqueType=n.uniqueType,this.dataType=n.dataType,this.columnType=n.columnType,this.generated=n.generated,this.generatedIdentity=n.generatedIdentity}static[m]="Column";name;keyAsName;primary;notNull;default;defaultFn;onUpdateFn;hasDefault;isUnique;uniqueName;uniqueType;dataType;columnType;enumValues=void 0;generated=void 0;generatedIdentity=void 0;config;mapFromDriverValue(e){return e}mapToDriverValue(e){return e}shouldDisableInsert(){return this.config.generated!==void 0&&this.config.generated.type!=="byDefault"}};var Ws=class{static[m]="ColumnBuilder";config;constructor(e,n,r){this.config={name:e,keyAsName:e==="",notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:n,columnType:r,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(e){return this.config.default=e,this.config.hasDefault=!0,this}$defaultFn(e){return this.config.defaultFn=e,this.config.hasDefault=!0,this}$default=this.$defaultFn;$onUpdateFn(e){return this.config.onUpdateFn=e,this.config.hasDefault=!0,this}$onUpdate=this.$onUpdateFn;primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(e){this.config.name===""&&(this.config.name=e)}};var Ct=Symbol.for("drizzle:Name");var Zs=class{static[m]="PgForeignKeyBuilder";reference;_onUpdate="no action";_onDelete="no action";constructor(e,n){this.reference=()=>{let{name:r,columns:i,foreignColumns:a}=e();return{name:r,columns:i,foreignTable:a[0].table,foreignColumns:a}},n&&(this._onUpdate=n.onUpdate,this._onDelete=n.onDelete)}onUpdate(e){return this._onUpdate=e===void 0?"no action":e,this}onDelete(e){return this._onDelete=e===void 0?"no action":e,this}build(e){return new nu(e,this)}},nu=class{constructor(e,n){this.table=e,this.reference=n.reference,this.onUpdate=n._onUpdate,this.onDelete=n._onDelete}static[m]="PgForeignKey";reference;onUpdate;onDelete;getName(){let{name:e,columns:n,foreignColumns:r}=this.reference(),i=n.map(o=>o.name),a=r.map(o=>o.name),s=[this.table[Ct],...i,r[0].table[Ct],...a];return e??`${s.join("_")}_fk`}};function Js(t,...e){return t(...e)}function au(t,e){return`${t[Ct]}_${e.join("_")}_unique`}var ru=class{constructor(e,n){this.name=n,this.columns=e}static[m]="PgUniqueConstraintBuilder";columns;nullsNotDistinctConfig=!1;nullsNotDistinct(){return this.nullsNotDistinctConfig=!0,this}build(e){return new iu(e,this.columns,this.nullsNotDistinctConfig,this.name)}},gb=class{static[m]="PgUniqueOnConstraintBuilder";name;constructor(e){this.name=e}on(...e){return new ru(e,this.name)}},iu=class{constructor(e,n,r,i){this.table=e,this.columns=n,this.name=i??au(this.table,this.columns.map(a=>a.name)),this.nullsNotDistinct=r}static[m]="PgUniqueConstraint";columns;name;nullsNotDistinct=!1;getName(){return this.name}};function yb(t,e,n){for(let r=e;r<t.length;r++){let i=t[r];if(i==="\\"){r++;continue}if(i==='"')return[t.slice(e,r).replace(/\\/g,""),r+1];if(!n&&(i===","||i==="}"))return[t.slice(e,r).replace(/\\/g,""),r]}return[t.slice(e).replace(/\\/g,""),t.length]}function xb(t,e=0){let n=[],r=e,i=!1;for(;r<t.length;){let a=t[r];if(a===","){(i||r===e)&&n.push(""),i=!0,r++;continue}if(i=!1,a==="\\"){r+=2;continue}if(a==='"'){let[l,c]=yb(t,r+1,!0);n.push(l),r=c;continue}if(a==="}")return[n,r+1];if(a==="{"){let[l,c]=xb(t,r+1);n.push(l),r=c;continue}let[s,o]=yb(t,r,!1);n.push(s),r=o}return[n,r]}function bb(t){let[e]=xb(t,1);return e}function su(t){return`{${t.map(e=>Array.isArray(e)?su(e):typeof e=="string"?`"${e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${e}`).join(",")}}`}var N=class extends Ws{foreignKeyConfigs=[];static[m]="PgColumnBuilder";array(e){return new cu(this.config.name,this,e)}references(e,n={}){return this.foreignKeyConfigs.push({ref:e,actions:n}),this}unique(e,n){return this.config.isUnique=!0,this.config.uniqueName=e,this.config.uniqueType=n?.nulls,this}generatedAlwaysAs(e){return this.config.generated={as:e,type:"always",mode:"stored"},this}buildForeignKeys(e,n){return this.foreignKeyConfigs.map(({ref:r,actions:i})=>Js((a,s)=>{let o=new Zs(()=>{let l=a();return{columns:[e],foreignColumns:[l]}});return s.onUpdate&&o.onUpdate(s.onUpdate),s.onDelete&&o.onDelete(s.onDelete),o.build(n)},r,i))}buildExtraConfigColumn(e){return new ou(e,this.config)}},E=class extends W{constructor(e,n){n.uniqueName||(n.uniqueName=au(e,[n.name])),super(e,n),this.table=e}static[m]="PgColumn"},ou=class extends E{static[m]="ExtraConfigColumn";getSQLType(){return this.getSQLType()}indexConfig={order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass};defaultConfig={order:"asc",nulls:"last",opClass:void 0};asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(e){return this.indexConfig.opClass=e,this}},wb=class{static[m]="IndexedColumn";constructor(e,n,r,i){this.name=e,this.keyAsName=n,this.type=r,this.indexConfig=i}name;keyAsName;type;indexConfig},cu=class extends N{static[m]="PgArrayBuilder";constructor(e,n,r){super(e,"array","PgArray"),this.config.baseBuilder=n,this.config.size=r}build(e){let n=this.config.baseBuilder.build(e);return new lu(e,this.config,n)}},lu=class t extends E{constructor(e,n,r,i){super(e,n),this.baseColumn=r,this.range=i,this.size=n.size}size;static[m]="PgArray";getSQLType(){return`${this.baseColumn.getSQLType()}[${typeof this.size=="number"?this.size:""}]`}mapFromDriverValue(e){return typeof e=="string"&&(e=bb(e)),e.map(n=>this.baseColumn.mapFromDriverValue(n))}mapToDriverValue(e,n=!1){let r=e.map(i=>i===null?null:w(this.baseColumn,t)?this.baseColumn.mapToDriverValue(i,!0):this.baseColumn.mapToDriverValue(i));return n?r:su(r)}};var Sb=Symbol.for("drizzle:isPgEnum");function Cb(t){return!!t&&typeof t=="function"&&Sb in t&&t[Sb]===!0}var _b=class extends N{static[m]="PgEnumColumnBuilder";constructor(e,n){super(e,"string","PgEnumColumn"),this.config.enum=n}build(e){return new uu(e,this.config)}},uu=class extends E{static[m]="PgEnumColumn";enum=this.config.enum;enumValues=this.config.enum.enumValues;constructor(e,n){super(e,n),this.enum=n.enum}getSQLType(){return this.enum.enumName}};var we=class{static[m]="Subquery";constructor(e,n,r,i=!1){this._={brand:"Subquery",sql:e,selectedFields:n,alias:r,isWith:i}}},Br=class extends we{static[m]="WithSubquery"};var Eb="0.39.3";var pu,du,ae={startActiveSpan(t,e){return pu?(du||(du=pu.trace.getTracer("drizzle-orm",Eb)),Js((n,r)=>r.startActiveSpan(t,i=>{try{return e(i)}catch(a){throw i.setStatus({code:n.SpanStatusCode.ERROR,message:a instanceof Error?a.message:"Unknown error"}),a}finally{i.end()}}),pu,du)):e()}};var se=Symbol.for("drizzle:ViewBaseConfig");var Xs=Symbol.for("drizzle:Schema"),Ys=Symbol.for("drizzle:Columns"),kb=Symbol.for("drizzle:ExtraConfigColumns"),fu=Symbol.for("drizzle:OriginalName"),mu=Symbol.for("drizzle:BaseName"),na=Symbol.for("drizzle:IsAlias"),Tb=Symbol.for("drizzle:ExtraConfigBuilder"),Ab=Symbol.for("drizzle:IsDrizzleTable"),T=class{static[m]="Table";static Symbol={Name:Ct,Schema:Xs,OriginalName:fu,Columns:Ys,ExtraConfigColumns:kb,BaseName:mu,IsAlias:na,ExtraConfigBuilder:Tb};[Ct];[fu];[Xs];[Ys];[kb];[mu];[na]=!1;[Ab]=!0;[Tb]=void 0;constructor(e,n,r){this[Ct]=this[fu]=e,this[Xs]=n,this[mu]=r}};function hu(t){return typeof t=="object"&&t!==null&&Ab in t}function Je(t){return t[Ct]}function Rn(t){return`${t[Xs]??"public"}.${t[Ct]}`}var Pb=class{static[m]="FakePrimitiveParam"};function vu(t){return t!=null&&typeof t.getSQL=="function"}function jA(t){let e={sql:"",params:[]};for(let n of t)e.sql+=n.sql,e.params.push(...n.params),n.typings?.length&&(e.typings||(e.typings=[]),e.typings.push(...n.typings));return e}var Se=class{static[m]="StringChunk";value;constructor(e){this.value=Array.isArray(e)?e:[e]}getSQL(){return new I([this])}},I=class t{constructor(e){this.queryChunks=e}static[m]="SQL";decoder=Nb;shouldInlineParams=!1;append(e){return this.queryChunks.push(...e.queryChunks),this}toQuery(e){return ae.startActiveSpan("drizzle.buildSQL",n=>{let r=this.buildQueryFromSourceParams(this.queryChunks,e);return n?.setAttributes({"drizzle.query.text":r.sql,"drizzle.query.params":JSON.stringify(r.params)}),r})}buildQueryFromSourceParams(e,n){let r=Object.assign({},n,{inlineParams:n.inlineParams||this.shouldInlineParams,paramStartIndex:n.paramStartIndex||{value:0}}),{casing:i,escapeName:a,escapeParam:s,prepareTyping:o,inlineParams:l,paramStartIndex:c}=r;return jA(e.map(u=>{if(w(u,Se))return{sql:u.value.join(""),params:[]};if(w(u,ra))return{sql:a(u.value),params:[]};if(u===void 0)return{sql:"",params:[]};if(Array.isArray(u)){let p=[new Se("(")];for(let[d,f]of u.entries())p.push(f),d<u.length-1&&p.push(new Se(", "));return p.push(new Se(")")),this.buildQueryFromSourceParams(p,r)}if(w(u,t))return this.buildQueryFromSourceParams(u.queryChunks,{...r,inlineParams:l||u.shouldInlineParams});if(w(u,T)){let p=u[T.Symbol.Schema],d=u[T.Symbol.Name];return{sql:p===void 0||u[na]?a(d):a(p)+"."+a(d),params:[]}}if(w(u,W)){let p=i.getColumnCasing(u);if(n.invokeSource==="indexes")return{sql:a(p),params:[]};let d=u.table[T.Symbol.Schema];return{sql:u.table[na]||d===void 0?a(u.table[T.Symbol.Name])+"."+a(p):a(d)+"."+a(u.table[T.Symbol.Name])+"."+a(p),params:[]}}if(w(u,ze)){let p=u[se].schema,d=u[se].name;return{sql:p===void 0||u[se].isAlias?a(d):a(p)+"."+a(d),params:[]}}if(w(u,Xe)){if(w(u.value,Vt))return{sql:s(c.value++,u),params:[u],typings:["none"]};let p=u.value===null?null:u.encoder.mapToDriverValue(u.value);if(w(p,t))return this.buildQueryFromSourceParams([p],r);if(l)return{sql:this.mapInlineParam(p,r),params:[]};let d=["none"];return o&&(d=[o(u.encoder)]),{sql:s(c.value++,p),params:[p],typings:d}}return w(u,Vt)?{sql:s(c.value++,u),params:[u],typings:["none"]}:w(u,t.Aliased)&&u.fieldAlias!==void 0?{sql:a(u.fieldAlias),params:[]}:w(u,we)?u._.isWith?{sql:a(u._.alias),params:[]}:this.buildQueryFromSourceParams([new Se("("),u._.sql,new Se(") "),new ra(u._.alias)],r):Cb(u)?u.schema?{sql:a(u.schema)+"."+a(u.enumName),params:[]}:{sql:a(u.enumName),params:[]}:vu(u)?u.shouldOmitSQLParens?.()?this.buildQueryFromSourceParams([u.getSQL()],r):this.buildQueryFromSourceParams([new Se("("),u.getSQL(),new Se(")")],r):l?{sql:this.mapInlineParam(u,r),params:[]}:{sql:s(c.value++,u),params:[u],typings:["none"]}}))}mapInlineParam(e,{escapeString:n}){if(e===null)return"null";if(typeof e=="number"||typeof e=="boolean")return e.toString();if(typeof e=="string")return n(e);if(typeof e=="object"){let r=e.toString();return n(r==="[object Object]"?JSON.stringify(e):r)}throw new Error("Unexpected param value: "+e)}getSQL(){return this}as(e){return e===void 0?this:new t.Aliased(this,e)}mapWith(e){return this.decoder=typeof e=="function"?{mapFromDriverValue:e}:e,this}inlineParams(){return this.shouldInlineParams=!0,this}if(e){return e?this:void 0}},ra=class{constructor(e){this.value=e}static[m]="Name";brand;getSQL(){return new I([this])}};function Ib(t){return typeof t=="object"&&t!==null&&"mapToDriverValue"in t&&typeof t.mapToDriverValue=="function"}var Nb={mapFromDriverValue:t=>t},Ob={mapToDriverValue:t=>t},Rj={...Nb,...Ob},Xe=class{constructor(e,n=Ob){this.value=e,this.encoder=n}static[m]="Param";brand;getSQL(){return new I([this])}};function h(t,...e){let n=[];(e.length>0||t.length>0&&t[0]!=="")&&n.push(new Se(t[0]));for(let[r,i]of e.entries())n.push(i,new Se(t[r+1]));return new I(n)}(t=>{function e(){return new I([])}t.empty=e;function n(l){return new I(l)}t.fromList=n;function r(l){return new I([new Se(l)])}t.raw=r;function i(l,c){let u=[];for(let[p,d]of l.entries())p>0&&c!==void 0&&u.push(c),u.push(d);return new I(u)}t.join=i;function a(l){return new ra(l)}t.identifier=a;function s(l){return new Vt(l)}t.placeholder=s;function o(l,c){return new Xe(l,c)}t.param=o})(h||(h={}));(t=>{class e{constructor(r,i){this.sql=r,this.fieldAlias=i}static[m]="SQL.Aliased";isSelectionField=!1;getSQL(){return this.sql}clone(){return new e(this.sql,this.fieldAlias)}}t.Aliased=e})(I||(I={}));var Vt=class{constructor(e){this.name=e}static[m]="Placeholder";getSQL(){return new I([this])}};function gu(t,e){return t.map(n=>{if(w(n,Vt)){if(!(n.name in e))throw new Error(`No value for placeholder "${n.name}" was provided`);return e[n.name]}if(w(n,Xe)&&w(n.value,Vt)){if(!(n.value.name in e))throw new Error(`No value for placeholder "${n.value.name}" was provided`);return n.encoder.mapToDriverValue(e[n.value.name])}return n})}var jb=Symbol.for("drizzle:IsDrizzleView"),ze=class{static[m]="View";[se];[jb]=!0;constructor({name:e,schema:n,selectedFields:r,query:i}){this[se]={name:e,originalName:e,schema:n,selectedFields:r,query:i,isExisting:!i,isAlias:!1}}getSQL(){return new I([this])}};function qb(t){return typeof t=="object"&&t!==null&&jb in t}W.prototype.getSQL=function(){return new I([this])};T.prototype.getSQL=function(){return new I([this])};we.prototype.getSQL=function(){return new I([this])};var Mn=class{constructor(e){this.table=e}static[m]="ColumnAliasProxyHandler";get(e,n){return n==="table"?this.table:e[n]}},Lr=class{constructor(e,n){this.alias=e,this.replaceOriginalName=n}static[m]="TableAliasProxyHandler";get(e,n){if(n===T.Symbol.IsAlias)return!0;if(n===T.Symbol.Name)return this.alias;if(this.replaceOriginalName&&n===T.Symbol.OriginalName)return this.alias;if(n===se)return{...e[se],name:this.alias,isAlias:!0};if(n===T.Symbol.Columns){let i=e[T.Symbol.Columns];if(!i)return i;let a={};return Object.keys(i).map(s=>{a[s]=new Proxy(i[s],new Mn(new Proxy(e,this)))}),a}let r=e[n];return w(r,W)?new Proxy(r,new Mn(new Proxy(e,this))):r}},Db=class{constructor(e){this.alias=e}static[m]="RelationTableAliasProxyHandler";get(e,n){return n==="sourceTable"?ia(e.sourceTable,this.alias):e[n]}};function ia(t,e){return new Proxy(t,new Lr(e,!1))}function Dt(t,e){return new Proxy(t,new Mn(new Proxy(t.table,new Lr(e,!1))))}function yu(t,e){return new I.Aliased(aa(t.sql,e),t.fieldAlias)}function aa(t,e){return h.join(t.queryChunks.map(n=>w(n,W)?Dt(n,e):w(n,I)?aa(n,e):w(n,I.Aliased)?yu(n,e):n))}var sa=class extends Error{static[m]="DrizzleError";constructor({message:e,cause:n}){super(e),this.name="DrizzleError",this.cause=n}},eo=class extends sa{static[m]="TransactionRollbackError";constructor(){super({message:"Rollback"})}};function Ye(t,e){return Ib(e)&&!vu(t)&&!w(t,Xe)&&!w(t,Vt)&&!w(t,W)&&!w(t,T)&&!w(t,ze)?new Xe(t,e):t}var ne=(t,e)=>h`${t} = ${Ye(e,t)}`,Rb=(t,e)=>h`${t} <> ${Ye(e,t)}`;function oa(...t){let e=t.filter(n=>n!==void 0);if(e.length!==0)return e.length===1?new I(e):new I([new Se("("),h.join(e,new Se(" and ")),new Se(")")])}function Mb(...t){let e=t.filter(n=>n!==void 0);if(e.length!==0)return e.length===1?new I(e):new I([new Se("("),h.join(e,new Se(" or ")),new Se(")")])}function Bb(t){return h`not ${t}`}var Lb=(t,e)=>h`${t} > ${Ye(e,t)}`,Fb=(t,e)=>h`${t} >= ${Ye(e,t)}`,$b=(t,e)=>h`${t} < ${Ye(e,t)}`,zb=(t,e)=>h`${t} <= ${Ye(e,t)}`;function Ub(t,e){return Array.isArray(e)?e.length===0?h`false`:h`${t} in ${e.map(n=>Ye(n,t))}`:h`${t} in ${Ye(e,t)}`}function Qb(t,e){return Array.isArray(e)?e.length===0?h`true`:h`${t} not in ${e.map(n=>Ye(n,t))}`:h`${t} not in ${Ye(e,t)}`}function Hb(t){return h`${t} is null`}function Vb(t){return h`${t} is not null`}function Gb(t){return h`exists ${t}`}function Kb(t){return h`not exists ${t}`}function Wb(t,e,n){return h`${t} between ${Ye(e,t)} and ${Ye(n,t)}`}function Zb(t,e,n){return h`${t} not between ${Ye(e,t)} and ${Ye(n,t)}`}function Jb(t,e){return h`${t} like ${e}`}function Xb(t,e){return h`${t} not like ${e}`}function Yb(t,e){return h`${t} ilike ${e}`}function e0(t,e){return h`${t} not ilike ${e}`}function t0(t){return h`${t} asc`}function Rt(t){return h`${t} desc`}var xu=class{static[m]="ConsoleLogWriter";write(e){console.log(e)}},to=class{static[m]="DefaultLogger";writer;constructor(e){this.writer=e?.writer??new xu}logQuery(e,n){let r=n.map(a=>{try{return JSON.stringify(a)}catch{return String(a)}}),i=r.length?` -- params: [${r.join(", ")}]`:"";this.writer.write(`Query: ${e}${i}`)}},no=class{static[m]="NoopLogger";logQuery(){}};var qe=class{static[m]="QueryPromise";[Symbol.toStringTag]="QueryPromise";catch(e){return this.then(void 0,e)}finally(e){return this.then(n=>(e?.(),n),n=>{throw e?.(),n})}then(e,n){return this.execute().then(e,n)}};function n0(t,e,n){let r={},i=t.reduce((a,{path:s,field:o},l)=>{let c;w(o,W)?c=o:w(o,I)?c=o.decoder:c=o.sql.decoder;let u=a;for(let[p,d]of s.entries())if(p<s.length-1)d in u||(u[d]={}),u=u[d];else{let f=e[l],v=u[d]=f===null?null:c.mapFromDriverValue(f);if(n&&w(o,W)&&s.length===2){let y=s[0];y in r?typeof r[y]=="string"&&r[y]!==Je(o.table)&&(r[y]=!1):r[y]=v===null?Je(o.table):!1}}return a},{});if(n&&Object.keys(r).length>0)for(let[a,s]of Object.entries(r))typeof s=="string"&&!n[s]&&(i[a]=null);return i}function ft(t,e){return Object.entries(t).reduce((n,[r,i])=>{if(typeof r!="string")return n;let a=e?[...e,r]:[r];return w(i,W)||w(i,I)||w(i,I.Aliased)?n.push({path:a,field:i}):w(i,T)?n.push(...ft(i[T.Symbol.Columns],a)):n.push(...ft(i,a)),n},[])}function ca(t,e){let n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(let[i,a]of n.entries())if(a!==r[i])return!1;return!0}function ro(t,e){let n=Object.entries(e).filter(([,r])=>r!==void 0).map(([r,i])=>w(i,I)||w(i,W)?[r,i]:[r,new Xe(i,t[T.Symbol.Columns][r])]);if(n.length===0)throw new Error("No values to set");return Object.fromEntries(n)}function r0(t,e){for(let n of e)for(let r of Object.getOwnPropertyNames(n.prototype))r!=="constructor"&&Object.defineProperty(t.prototype,r,Object.getOwnPropertyDescriptor(n.prototype,r)||Object.create(null))}function io(t){return t[T.Symbol.Columns]}function i0(t){return t[se].selectedFields}function Gt(t){return w(t,we)?t._.alias:w(t,ze)?t[se].name:w(t,I)?void 0:t[T.Symbol.IsAlias]?t[T.Symbol.Name]:t[T.Symbol.BaseName]}function V(t,e){return{name:typeof t=="string"&&t.length>0?t:"",config:typeof t=="object"?t:e}}function a0(t){if(typeof t!="object"||t===null||t.constructor.name!=="Object")return!1;if("logger"in t){let e=typeof t.logger;return!(e!=="boolean"&&(e!=="object"||typeof t.logger.logQuery!="function")&&e!=="undefined")}if("schema"in t){let e=typeof t.logger;return!(e!=="object"&&e!=="undefined")}if("casing"in t){let e=typeof t.logger;return!(e!=="string"&&e!=="undefined")}if("mode"in t)return!(t.mode!=="default"||t.mode!=="planetscale"||t.mode!==void 0);if("connection"in t){let e=typeof t.connection;return!(e!=="string"&&e!=="object"&&e!=="undefined")}if("client"in t){let e=typeof t.client;return!(e!=="object"&&e!=="function"&&e!=="undefined")}return Object.keys(t).length===0}var Kt=class extends N{static[m]="PgIntColumnBaseBuilder";generatedAlwaysAsIdentity(e){if(e){let{name:n,...r}=e;this.config.generatedIdentity={type:"always",sequenceName:n,sequenceOptions:r}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(e){if(e){let{name:n,...r}=e;this.config.generatedIdentity={type:"byDefault",sequenceName:n,sequenceOptions:r}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}};var bu=class extends Kt{static[m]="PgBigInt53Builder";constructor(e){super(e,"number","PgBigInt53")}build(e){return new wu(e,this.config)}},wu=class extends E{static[m]="PgBigInt53";getSQLType(){return"bigint"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}},Su=class extends Kt{static[m]="PgBigInt64Builder";constructor(e){super(e,"bigint","PgBigInt64")}build(e){return new _u(e,this.config)}},_u=class extends E{static[m]="PgBigInt64";getSQLType(){return"bigint"}mapFromDriverValue(e){return BigInt(e)}};function s0(t,e){let{name:n,config:r}=V(t,e);return r.mode==="number"?new bu(n):new Su(n)}var Cu=class extends N{static[m]="PgBigSerial53Builder";constructor(e){super(e,"number","PgBigSerial53"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new Eu(e,this.config)}},Eu=class extends E{static[m]="PgBigSerial53";getSQLType(){return"bigserial"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}},ku=class extends N{static[m]="PgBigSerial64Builder";constructor(e){super(e,"bigint","PgBigSerial64"),this.config.hasDefault=!0}build(e){return new Tu(e,this.config)}},Tu=class extends E{static[m]="PgBigSerial64";getSQLType(){return"bigserial"}mapFromDriverValue(e){return BigInt(e)}};function o0(t,e){let{name:n,config:r}=V(t,e);return r.mode==="number"?new Cu(n):new ku(n)}var Au=class extends N{static[m]="PgBooleanBuilder";constructor(e){super(e,"boolean","PgBoolean")}build(e){return new Pu(e,this.config)}},Pu=class extends E{static[m]="PgBoolean";getSQLType(){return"boolean"}};function Fr(t){return new Au(t??"")}var Iu=class extends N{static[m]="PgCharBuilder";constructor(e,n){super(e,"string","PgChar"),this.config.length=n.length,this.config.enumValues=n.enum}build(e){return new Nu(e,this.config)}},Nu=class extends E{static[m]="PgChar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return this.length===void 0?"char":`char(${this.length})`}};function c0(t,e={}){let{name:n,config:r}=V(t,e);return new Iu(n,r)}var Ou=class extends N{static[m]="PgCidrBuilder";constructor(e){super(e,"string","PgCidr")}build(e){return new ju(e,this.config)}},ju=class extends E{static[m]="PgCidr";getSQLType(){return"cidr"}};function l0(t){return new Ou(t??"")}var qu=class extends N{static[m]="PgCustomColumnBuilder";constructor(e,n,r){super(e,"custom","PgCustomColumn"),this.config.fieldConfig=n,this.config.customTypeParams=r}build(e){return new Du(e,this.config)}},Du=class extends E{static[m]="PgCustomColumn";sqlName;mapTo;mapFrom;constructor(e,n){super(e,n),this.sqlName=n.customTypeParams.dataType(n.fieldConfig),this.mapTo=n.customTypeParams.toDriver,this.mapFrom=n.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(e){return typeof this.mapFrom=="function"?this.mapFrom(e):e}mapToDriverValue(e){return typeof this.mapTo=="function"?this.mapTo(e):e}};function u0(t){return(e,n)=>{let{name:r,config:i}=V(e,n);return new qu(r,i,t)}}var Mt=class extends N{static[m]="PgDateColumnBaseBuilder";defaultNow(){return this.default(h`now()`)}};var Ru=class extends Mt{static[m]="PgDateBuilder";constructor(e){super(e,"date","PgDate")}build(e){return new la(e,this.config)}},la=class extends E{static[m]="PgDate";getSQLType(){return"date"}mapFromDriverValue(e){return new Date(e)}mapToDriverValue(e){return e.toISOString()}},Mu=class extends Mt{static[m]="PgDateStringBuilder";constructor(e){super(e,"string","PgDateString")}build(e){return new ua(e,this.config)}},ua=class extends E{static[m]="PgDateString";getSQLType(){return"date"}};function p0(t,e){let{name:n,config:r}=V(t,e);return r?.mode==="date"?new Ru(n):new Mu(n)}var Bu=class extends N{static[m]="PgDoublePrecisionBuilder";constructor(e){super(e,"number","PgDoublePrecision")}build(e){return new Lu(e,this.config)}},Lu=class extends E{static[m]="PgDoublePrecision";getSQLType(){return"double precision"}mapFromDriverValue(e){return typeof e=="string"?Number.parseFloat(e):e}};function d0(t){return new Bu(t??"")}var Fu=class extends N{static[m]="PgInetBuilder";constructor(e){super(e,"string","PgInet")}build(e){return new $u(e,this.config)}},$u=class extends E{static[m]="PgInet";getSQLType(){return"inet"}};function f0(t){return new Fu(t??"")}var zu=class extends Kt{static[m]="PgIntegerBuilder";constructor(e){super(e,"number","PgInteger")}build(e){return new Uu(e,this.config)}},Uu=class extends E{static[m]="PgInteger";getSQLType(){return"integer"}mapFromDriverValue(e){return typeof e=="string"?Number.parseInt(e):e}};function mt(t){return new zu(t??"")}var Qu=class extends N{static[m]="PgIntervalBuilder";constructor(e,n){super(e,"string","PgInterval"),this.config.intervalConfig=n}build(e){return new Hu(e,this.config)}},Hu=class extends E{static[m]="PgInterval";fields=this.config.intervalConfig.fields;precision=this.config.intervalConfig.precision;getSQLType(){let e=this.fields?` ${this.fields}`:"",n=this.precision?`(${this.precision})`:"";return`interval${e}${n}`}};function m0(t,e={}){let{name:n,config:r}=V(t,e);return new Qu(n,r)}var Vu=class extends N{static[m]="PgJsonBuilder";constructor(e){super(e,"json","PgJson")}build(e){return new pa(e,this.config)}},pa=class extends E{static[m]="PgJson";constructor(e,n){super(e,n)}getSQLType(){return"json"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}};function h0(t){return new Vu(t??"")}var Gu=class extends N{static[m]="PgJsonbBuilder";constructor(e){super(e,"json","PgJsonb")}build(e){return new da(e,this.config)}},da=class extends E{static[m]="PgJsonb";constructor(e,n){super(e,n)}getSQLType(){return"jsonb"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}};function Bn(t){return new Gu(t??"")}var Ku=class extends N{static[m]="PgLineBuilder";constructor(e){super(e,"array","PgLine")}build(e){return new Wu(e,this.config)}},Wu=class extends E{static[m]="PgLine";getSQLType(){return"line"}mapFromDriverValue(e){let[n,r,i]=e.slice(1,-1).split(",");return[Number.parseFloat(n),Number.parseFloat(r),Number.parseFloat(i)]}mapToDriverValue(e){return`{${e[0]},${e[1]},${e[2]}}`}},Zu=class extends N{static[m]="PgLineABCBuilder";constructor(e){super(e,"json","PgLineABC")}build(e){return new Ju(e,this.config)}},Ju=class extends E{static[m]="PgLineABC";getSQLType(){return"line"}mapFromDriverValue(e){let[n,r,i]=e.slice(1,-1).split(",");return{a:Number.parseFloat(n),b:Number.parseFloat(r),c:Number.parseFloat(i)}}mapToDriverValue(e){return`{${e.a},${e.b},${e.c}}`}};function v0(t,e){let{name:n,config:r}=V(t,e);return!r?.mode||r.mode==="tuple"?new Ku(n):new Zu(n)}var Xu=class extends N{static[m]="PgMacaddrBuilder";constructor(e){super(e,"string","PgMacaddr")}build(e){return new Yu(e,this.config)}},Yu=class extends E{static[m]="PgMacaddr";getSQLType(){return"macaddr"}};function g0(t){return new Xu(t??"")}var ep=class extends N{static[m]="PgMacaddr8Builder";constructor(e){super(e,"string","PgMacaddr8")}build(e){return new tp(e,this.config)}},tp=class extends E{static[m]="PgMacaddr8";getSQLType(){return"macaddr8"}};function y0(t){return new ep(t??"")}var np=class extends N{static[m]="PgNumericBuilder";constructor(e,n,r){super(e,"string","PgNumeric"),this.config.precision=n,this.config.scale=r}build(e){return new fa(e,this.config)}},fa=class extends E{static[m]="PgNumeric";precision;scale;constructor(e,n){super(e,n),this.precision=n.precision,this.scale=n.scale}getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}};function x0(t,e){let{name:n,config:r}=V(t,e);return new np(n,r?.precision,r?.scale)}var rp=class extends N{static[m]="PgPointTupleBuilder";constructor(e){super(e,"array","PgPointTuple")}build(e){return new ip(e,this.config)}},ip=class extends E{static[m]="PgPointTuple";getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){let[n,r]=e.slice(1,-1).split(",");return[Number.parseFloat(n),Number.parseFloat(r)]}return[e.x,e.y]}mapToDriverValue(e){return`(${e[0]},${e[1]})`}},ap=class extends N{static[m]="PgPointObjectBuilder";constructor(e){super(e,"json","PgPointObject")}build(e){return new sp(e,this.config)}},sp=class extends E{static[m]="PgPointObject";getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){let[n,r]=e.slice(1,-1).split(",");return{x:Number.parseFloat(n),y:Number.parseFloat(r)}}return e}mapToDriverValue(e){return`(${e.x},${e.y})`}};function b0(t,e){let{name:n,config:r}=V(t,e);return!r?.mode||r.mode==="tuple"?new rp(n):new ap(n)}function qA(t){let e=[];for(let n=0;n<t.length;n+=2)e.push(Number.parseInt(t.slice(n,n+2),16));return new Uint8Array(e)}function w0(t,e){let n=new ArrayBuffer(8),r=new DataView(n);for(let i=0;i<8;i++)r.setUint8(i,t[e+i]);return r.getFloat64(0,!0)}function op(t){let e=qA(t),n=0,r=e[n];n+=1;let i=new DataView(e.buffer),a=i.getUint32(n,r===1);n+=4;let s;if(a&536870912&&(s=i.getUint32(n,r===1),n+=4),(a&65535)===1){let o=w0(e,n);n+=8;let l=w0(e,n);return n+=8,[o,l]}throw new Error("Unsupported geometry type")}var cp=class extends N{static[m]="PgGeometryBuilder";constructor(e){super(e,"array","PgGeometry")}build(e){return new lp(e,this.config)}},lp=class extends E{static[m]="PgGeometry";getSQLType(){return"geometry(point)"}mapFromDriverValue(e){return op(e)}mapToDriverValue(e){return`point(${e[0]} ${e[1]})`}},up=class extends N{static[m]="PgGeometryObjectBuilder";constructor(e){super(e,"json","PgGeometryObject")}build(e){return new pp(e,this.config)}},pp=class extends E{static[m]="PgGeometryObject";getSQLType(){return"geometry(point)"}mapFromDriverValue(e){let n=op(e);return{x:n[0],y:n[1]}}mapToDriverValue(e){return`point(${e.x} ${e.y})`}};function S0(t,e){let{name:n,config:r}=V(t,e);return!r?.mode||r.mode==="tuple"?new cp(n):new up(n)}var dp=class extends N{static[m]="PgRealBuilder";constructor(e,n){super(e,"number","PgReal"),this.config.length=n}build(e){return new fp(e,this.config)}},fp=class extends E{static[m]="PgReal";constructor(e,n){super(e,n)}getSQLType(){return"real"}mapFromDriverValue=e=>typeof e=="string"?Number.parseFloat(e):e};function ma(t){return new dp(t??"")}var mp=class extends N{static[m]="PgSerialBuilder";constructor(e){super(e,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new hp(e,this.config)}},hp=class extends E{static[m]="PgSerial";getSQLType(){return"serial"}};function _0(t){return new mp(t??"")}var vp=class extends Kt{static[m]="PgSmallIntBuilder";constructor(e){super(e,"number","PgSmallInt")}build(e){return new gp(e,this.config)}},gp=class extends E{static[m]="PgSmallInt";getSQLType(){return"smallint"}mapFromDriverValue=e=>typeof e=="string"?Number(e):e};function C0(t){return new vp(t??"")}var yp=class extends N{static[m]="PgSmallSerialBuilder";constructor(e){super(e,"number","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new xp(e,this.config)}},xp=class extends E{static[m]="PgSmallSerial";getSQLType(){return"smallserial"}};function E0(t){return new yp(t??"")}var bp=class extends N{static[m]="PgTextBuilder";constructor(e,n){super(e,"string","PgText"),this.config.enumValues=n.enum}build(e){return new wp(e,this.config)}},wp=class extends E{static[m]="PgText";enumValues=this.config.enumValues;getSQLType(){return"text"}};function A(t,e={}){let{name:n,config:r}=V(t,e);return new bp(n,r)}var Sp=class extends Mt{constructor(e,n,r){super(e,"string","PgTime"),this.withTimezone=n,this.precision=r,this.config.withTimezone=n,this.config.precision=r}static[m]="PgTimeBuilder";build(e){return new ha(e,this.config)}},ha=class extends E{static[m]="PgTime";withTimezone;precision;constructor(e,n){super(e,n),this.withTimezone=n.withTimezone,this.precision=n.precision}getSQLType(){return`time${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}};function k0(t,e={}){let{name:n,config:r}=V(t,e);return new Sp(n,r.withTimezone??!1,r.precision)}var _p=class extends Mt{static[m]="PgTimestampBuilder";constructor(e,n,r){super(e,"date","PgTimestamp"),this.config.withTimezone=n,this.config.precision=r}build(e){return new va(e,this.config)}},va=class extends E{static[m]="PgTimestamp";withTimezone;precision;constructor(e,n){super(e,n),this.withTimezone=n.withTimezone,this.precision=n.precision}getSQLType(){return`timestamp${this.precision===void 0?"":` (${this.precision})`}${this.withTimezone?" with time zone":""}`}mapFromDriverValue=e=>new Date(this.withTimezone?e:e+"+0000");mapToDriverValue=e=>e.toISOString()},Cp=class extends Mt{static[m]="PgTimestampStringBuilder";constructor(e,n,r){super(e,"string","PgTimestampString"),this.config.withTimezone=n,this.config.precision=r}build(e){return new ga(e,this.config)}},ga=class extends E{static[m]="PgTimestampString";withTimezone;precision;constructor(e,n){super(e,n),this.withTimezone=n.withTimezone,this.precision=n.precision}getSQLType(){return`timestamp${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}};function Ue(t,e={}){let{name:n,config:r}=V(t,e);return r?.mode==="string"?new Cp(n,r.withTimezone??!1,r.precision):new _p(n,r?.withTimezone??!1,r?.precision)}var Ep=class extends N{static[m]="PgUUIDBuilder";constructor(e){super(e,"string","PgUUID")}defaultRandom(){return this.default(h`gen_random_uuid()`)}build(e){return new ya(e,this.config)}},ya=class extends E{static[m]="PgUUID";getSQLType(){return"uuid"}};function T0(t){return new Ep(t??"")}var kp=class extends N{static[m]="PgVarcharBuilder";constructor(e,n){super(e,"string","PgVarchar"),this.config.length=n.length,this.config.enumValues=n.enum}build(e){return new Tp(e,this.config)}},Tp=class extends E{static[m]="PgVarchar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return this.length===void 0?"varchar":`varchar(${this.length})`}};function ue(t,e={}){let{name:n,config:r}=V(t,e);return new kp(n,r)}var Ap=class extends N{static[m]="PgBinaryVectorBuilder";constructor(e,n){super(e,"string","PgBinaryVector"),this.config.dimensions=n.dimensions}build(e){return new Pp(e,this.config)}},Pp=class extends E{static[m]="PgBinaryVector";dimensions=this.config.dimensions;getSQLType(){return`bit(${this.dimensions})`}};function A0(t,e){let{name:n,config:r}=V(t,e);return new Ap(n,r)}var Ip=class extends N{static[m]="PgHalfVectorBuilder";constructor(e,n){super(e,"array","PgHalfVector"),this.config.dimensions=n.dimensions}build(e){return new Np(e,this.config)}},Np=class extends E{static[m]="PgHalfVector";dimensions=this.config.dimensions;getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){return e.slice(1,-1).split(",").map(n=>Number.parseFloat(n))}};function P0(t,e){let{name:n,config:r}=V(t,e);return new Ip(n,r)}var Op=class extends N{static[m]="PgSparseVectorBuilder";constructor(e,n){super(e,"string","PgSparseVector"),this.config.dimensions=n.dimensions}build(e){return new jp(e,this.config)}},jp=class extends E{static[m]="PgSparseVector";dimensions=this.config.dimensions;getSQLType(){return`sparsevec(${this.dimensions})`}};function I0(t,e){let{name:n,config:r}=V(t,e);return new Op(n,r)}var qp=class extends N{static[m]="PgVectorBuilder";constructor(e,n){super(e,"array","PgVector"),this.config.dimensions=n.dimensions}build(e){return new Dp(e,this.config)}},Dp=class extends E{static[m]="PgVector";dimensions=this.config.dimensions;getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){return e.slice(1,-1).split(",").map(n=>Number.parseFloat(n))}};function N0(t,e){let{name:n,config:r}=V(t,e);return new qp(n,r)}function O0(){return{bigint:s0,bigserial:o0,boolean:Fr,char:c0,cidr:l0,customType:u0,date:p0,doublePrecision:d0,inet:f0,integer:mt,interval:m0,json:h0,jsonb:Bn,line:v0,macaddr:g0,macaddr8:y0,numeric:x0,point:b0,geometry:S0,real:ma,serial:_0,smallint:C0,smallserial:E0,text:A,time:k0,timestamp:Ue,uuid:T0,varchar:ue,bit:A0,halfvec:P0,sparsevec:I0,vector:N0}}var Rp=Symbol.for("drizzle:PgInlineForeignKeys"),j0=Symbol.for("drizzle:EnableRLS"),Ie=class extends T{static[m]="PgTable";static Symbol=Object.assign({},T.Symbol,{InlineForeignKeys:Rp,EnableRLS:j0});[Rp]=[];[j0]=!1;[T.Symbol.ExtraConfigBuilder]=void 0};function DA(t,e,n,r,i=t){let a=new Ie(t,r,i),s=typeof e=="function"?e(O0()):e,o=Object.fromEntries(Object.entries(s).map(([u,p])=>{let d=p;d.setName(u);let f=d.build(a);return a[Rp].push(...d.buildForeignKeys(f,a)),[u,f]})),l=Object.fromEntries(Object.entries(s).map(([u,p])=>{let d=p;d.setName(u);let f=d.buildExtraConfigColumn(a);return[u,f]})),c=Object.assign(a,o);return c[T.Symbol.Columns]=o,c[T.Symbol.ExtraConfigColumns]=l,n&&(c[Ie.Symbol.ExtraConfigBuilder]=n),Object.assign(c,{enableRLS:()=>(c[Ie.Symbol.EnableRLS]=!0,c)})}var Et=(t,e,n)=>DA(t,e,n,void 0);var ao=class{static[m]="PgPrimaryKeyBuilder";columns;name;constructor(e,n){this.columns=e,this.name=n}build(e){return new Mp(e,this.columns,this.name)}},Mp=class{constructor(e,n,r){this.table=e,this.columns=n,this.name=r}static[m]="PgPrimaryKey";columns;name;getName(){return this.name??`${this.table[Ie.Symbol.Name]}_${this.columns.map(e=>e.name).join("_")}_pk`}};var so=class{constructor(e,n,r){this.sourceTable=e,this.referencedTable=n,this.relationName=r,this.referencedTableName=n[T.Symbol.Name]}static[m]="Relation";referencedTableName;fieldName},Bp=class{constructor(e,n){this.table=e,this.config=n}static[m]="Relations"},un=class t extends so{constructor(e,n,r,i){super(e,n,r?.relationName),this.config=r,this.isNullable=i}static[m]="One";withFieldName(e){let n=new t(this.sourceTable,this.referencedTable,this.config,this.isNullable);return n.fieldName=e,n}},xa=class t extends so{constructor(e,n,r){super(e,n,r?.relationName),this.config=r}static[m]="Many";withFieldName(e){let n=new t(tnpm warn config production Use `--omit=dev` instead.
  dataType: undefined,
  constraint: undefined,
  file: 'parse_relation.c',
> rest-express@1.0.0 seed
  line: '1449',
> NODE_ENV=production node dist/seed.cjs
  routine: 'parserOpenTable'
}
Seeding database with realistic healthcare data...
error: relation "users" does not exist
    at /app/dist/seed.cjs:2:13326
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async /app/dist/seed.cjs:8:31375
    at async Rp (/app/dist/seed.cjs:8:114026) {
  length: 104,
  severity: 'ERROR',
  code: '42P01',
  detail: undefined,
  hint: undefined,
  position: '55',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
npm warn config production Use `--omit=dev` instead.
> rest-express@1.0.0 start
> NODE_ENV=production node dist/index.cjs
11:35:35 PM [express] serving on port 8080